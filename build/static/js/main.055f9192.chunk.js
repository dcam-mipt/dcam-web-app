(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(n,e,t){n.exports=t.p+"static/media/undo.feaa06e5.svg"},108:function(n,e,t){n.exports=t.p+"static/media/egg.70b07e14.svg"},109:function(n,e,t){n.exports=t.p+"static/media/no-stopping.22d397a4.svg"},129:function(n,e,t){n.exports=t.p+"static/media/laundry_selected.634e9cac.svg"},184:function(n,e,t){n.exports=t.p+"static/media/logout.d1ad6d96.png"},186:function(n,e,t){n.exports=t.p+"static/media/cros_white.eb3c67d1.svg"},187:function(n,e,t){n.exports=t.p+"static/media/upload.e7bc3c08.svg"},190:function(n,e,t){n.exports=t(411)},195:function(n,e,t){},243:function(n,e,t){n.exports=t.p+"static/media/user_selected.15168650.png"},244:function(n,e,t){n.exports=t.p+"static/media/settings_selected.9cfd49f2.svg"},313:function(n,e){},315:function(n,e){},356:function(n,e){},357:function(n,e){},41:function(n,e,t){n.exports=t.p+"static/media/cros.b1585ec7.svg"},411:function(n,e,t){"use strict";t.r(e);var r=t(0),o=t.n(r),i=t(79),a=t.n(i),c=(t(195),t(4)),s=t(10),u=t(29),l=t(12),d=t(11),p=t(13),f=t(14),h=t.n(f),m=(t(111),h()().startOf("day").add(8,"hour"),h()().startOf("day").add(17,"hour"),{test:"test",colors:{black:"#000",white:"#FFF",back:"#EEEEEE",border:"#939393",lightdark:"#d5d5d5",dark:"#727272",yellow:"#FFCC00",accept:"#66CC33",reject:"#DF422B",blue:"#2B8AFF",purple:"#895aca",darkblue:"#2F61D5",modernblue:"#1e07ca",lightblue:"#3FB6DC",vk:"#3A60A1",WARM_ORANGE:"#FF7052",background:{primary:"#fff",secondary:"#EEEEEE",support:"#d5d5d5"},text:{primary:"#000",secondary:"#fff",support:"#939393"}},colors_:{SPACE_NAVY:"#25265E",STEEL_GREY:"#868697",SATE_PURPLE:"#7540EE",HAN_BLUE:"#2F61D5",PICTION_BLUE:"#3FB6DC",GRASS_GREEN:"#2DC76D",WARM_ORANGE:"#FF7052",GOLDEN_BAY:"#FFC800"},screens:{home:"HOME",laundry:"LAUNDRY",users:"USERS",club:"club",settings:"SETTINGS",settings_user:"SETTINGS_USER",settings_notifications:"SETTINGS_NOTIFICATIONS",settings_payment:"SETTINGS_PAYMENT"},roles:{USER:"USER",ADMIN:"ADMIN",LAUNDRY_WATCHER:"LAUNDRY_WATCHER"},popUps:{BOOKING_WINDOW:"BOOKING_WINDOW",TOP_PROFILE_MENU:"TOP_PROFILE_MENU",TOP_BALANCE_WINDOW:"TOP_BALANCE_WINDOW",RESEVATIONS:"RESEVATIONS",MOBILE_MENU:"MOBILE_MENU",LAUNDRY_SETTINGS:"LAUNDRY_SETTINGS",EMPTY:"EMPTY",SHOPPING_BASKET:"SHOPPING_BASKET",GET_NFC:"GET_NFC",LAUNDRY_OPTIONS:"LAUNDRY_OPTIONS",CLUB_BOOK:"CLUB_BOOK"},status:{booked:"booked",myBook:"myBook",selected:"selected",free:"free"},errors:{emptyAccount:"users account is exist, but empty"}}),v="SET_ENTRY_SCREEN",w="SET_MAIN_APP_SCREEN",b="SET_POP_UP_WINDOW",g="SET_LAUNDRY_COST",y="LOAD_LAUNDRY_SUCCESS",x="LOAD_MACHINES_START",E="LOAD_MACHINES_SUCCESS",k="LOAD_MACHINES_FAIL",O="MACHINES_SUBSCRIPTION_ENABLED",_="MACHINES_SUBSCRIPTION_DISABLED",U="SET_SERVER_TIME",j="SELECT_SLOT",P="SET_NFC_OWNER",S="SET_MONEY",C="OPEN_BOOK_POP_UP",N=function(n){return{type:v,data:n}},A=function(n){return{type:w,data:n}},I=function(n){return{type:b,data:n}},M=t(9),T=t(3);function W(){var n=Object(c.a)(["\n\n    ","\n    ","\n    ","\n    ","\n    \n    box-sizing: border-box;\n    \n    user-select: none;\n    display: flex;\n    justify-content: ",";\n    align-items: ",";\n    text-align: ",";\n    flex-direction: ",";\n    font-size: ","vw;\n\n    -webkit-overflow-scrolling: touch;\n    ::-webkit-scrollbar {\n        width: 0;\n    }\n    \n    ","\n"]);return W=function(){return n},n}var D=T.a.div(W(),function(n){return void 0===n.width?null:"width: ".concat(n.width).concat(void 0===n.widthUnit?"vw":n.widthUnit)},function(n){return void 0===n.height?null:"height: ".concat(n.height).concat(void 0===n.heightUnit?"vh":n.heightUnit)},function(n){return void 0===n.backgroundColor?null:"background-color: ".concat(n.backgroundColor)},function(n){return void 0===n.bold?null:"font-family: Lato-Bold"},function(n){return void 0===n.justifyContent?"center":n.justifyContent},function(n){return void 0===n.alignItems?"center":n.alignItems},function(n){return void 0===n.textAlign?"center":n.textAlign},function(n){return void 0===n.flexDirection?"column":n.flexDirection},function(n){return void 0===n.fontSize?n.mobile?4:1:(n.mobile?4:1)*n.fontSize},function(n){return void 0===n.extraProps?null:n.extraProps}),z=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).render=function(){var n="\n            width: ".concat(100*(t.props.short?.0825:.17),"vw;\n            height: ").concat(100*(t.props.visible?.03:0),"vw;\n            padding: ").concat(100*(t.props.visible?.01:0),"vw;\n            border-radius: ").concat(.5,"vw;\n            background-color: ").concat(t.props.disabled?m.colors.background.support:t.props.backgroundColor,";\n            margin: ").concat(100*(t.props.visible?.0025:0),"vw;\n            color: white;\n            font-size: ").concat(.8,"vw;\n            cursor: ").concat(t.props.disabled?null:"pointer",";\n            visibility: ").concat(t.props.visible?"visible":"hidden",";\n            opacity: ").concat(t.props.visible?1:0,";\n            transition: 0.2s;\n            transition-delay: ").concat(t.props.visible?-1:.2,"s;\n            @media (min-width: 320px) and (max-width: 480px) {\n                width: ").concat(100*(t.props.short?.33:.68),"vw;\n                height: ").concat(100*(t.props.visible?.12:0),"vw;\n                padding: ").concat(100*(t.props.visible?.04:0),"vw;\n                border-radius: ").concat(2,"vw;\n                margin: ").concat(100*(t.props.visible?.01:0),"vw;\n                font-size: ").concat(3.2,"vw;\n            }\n        ");return o.a.createElement(D,{extraProps:n,onClick:function(){t.props.disabled||t.props.onClick()}},t.props.children||t.props.title)},t}return Object(p.a)(e,n),e}(o.a.Component);z.defaultProps={mobile:!1,title:"title",visible:!0,short:!0,disabled:!1,backgroundColor:m.colors.yellow,onClick:function(){}};var B,L=Object(M.b)(function(n){return{mobile:n.ui.mobile}})(z),R=window.gapi,Y="https://www.googleapis.com/auth/userinfo.email",G={apiKey:"AIzaSyCSGE3JZpVhBKSAHYJXkuzopFOJhx67F4w",clientId:"914233098415-eqgtkp13ai5lb3ba0m8i8an5h1lir93k.apps.googleusercontent.com",scope:Y,hosted_domain:"phystech.edu"},F=function(n){B.currentUser.get().hasGrantedScopes(Y)},K=function(){return B.currentUser.get()},H=function(){if(void 0!==B){var n=B.currentUser.get().hasGrantedScopes(Y);return n}return!1},V={initGoogle:function(n){return new Promise(function(n,e){R.load("client:auth2",n,e)})},initClient:function(){return R.client.init(G).then(function(n){B=R.auth2.getAuthInstance(),F()})},signIn:function(){B.signIn()},signOut:function(){B.signOut()},getCurrentUser:K,isAuthorized:H,GoogleAuth:B,subscribeSignIn:function(n){B.isSignedIn.listen(function(){n(H())})}};function Q(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 30vw\nheight: 100vh\nbackground-color: ","\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100vw\n}\n"]);return Q=function(){return n},n}function q(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 70vw\nheight: 100vh\nbackground-color: ","\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    display: none;\n}\n"]);return q=function(){return n},n}function J(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nwidth: 100vw\nheight: 100vh\nbackground-color: ","\ntransition: 0.2s\n"]);return J=function(){return n},n}var X=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).render=function(){return o.a.createElement(Z,null,o.a.createElement($,null),o.a.createElement(nn,null,o.a.createElement(L,{short:!0,backgroundColor:m.colors.yellow,onClick:function(){V.signIn()}},o.a.createElement(D,{extraProps:"flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; }"},"sign in ",o.a.createElement("span",{role:"img","aria-label":"hand"},"\ud83d\udc4b")))))},t}return Object(p.a)(e,n),e}(o.a.Component),Z=T.a.div(J(),m.colors.background.primary),$=T.a.div(q(),m.colors.yellow),nn=T.a.div(Q(),m.colors.purple),en={VK:void 0,initVK:function(){window.VK.init({apiId:6652742})},login:function(n){n||(n=function(){}),window.VK.Auth.login(function(e){return n(e)})},logout:function(n){n||(n=function(){}),window.VK.Auth.logout(function(e){return n(e)})},getLoginStatus:function(n){n||(n=function(){}),window.VK.Auth.getLoginStatus(function(e){return n(e)})},getAvatar:function(n,e){e||(e=function(){}),window.VK.Api.call("users.get",{user_ids:n,v:"5.73",fields:"photo_200"},function(n){n.response&&e(n.response[0].photo_200)})},getUserIsDeactivated:function(n,e){e||(e=function(){}),window.VK.Api.call("users.get",{user_ids:n,v:"5.89"},function(n){n.response&&e(n.response)})},observeSubscribe:function(n,e){e||(e=function(){}),window.VK.Observer.subscribe(n,function(n){return e(n)})},getUser:function(n,e){e||(e=function(){}),window.VK.Api.call("users.get",{user_ids:n,v:"5.89",fields:"photo_200"},function(n){n.response&&e(n.response)})}},tn=t(2),rn=t.n(tn),on=function(n){return{type:U,data:n}},an=function(n){return{type:g,data:n}},cn=function(n){return{type:P,data:n}},sn=function(n){return{type:S,data:n}};function un(){var n=Object(c.a)(["\n    width: ","",";\n    height: ","",";\n    ","\n    outline: none;\n    border: none;\n    text-align: center;\n    font-size: ","vw;\n    // color: ",";\n    ","\n    text-align: ",";\n    &::-webkit-input-placeholder {\n        // color: ",";\n        ","\n    }\n    \n    ","\n"]);return un=function(){return n},n}var ln=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).render=function(){var n=t.props.mobile?400:100,e="\n            width: ".concat(n*(t.props.width?.01*t.props.width:t.props.short?.0625:.15),"vw;\n            height: ").concat(n*(t.props.visible?.01:0),"vw;\n            padding: ").concat(n*(t.props.visible?.01:0),"vw;\n            border-radius: ").concat(.005*n,"vw;\n            background-color: ").concat(t.props.backgroundColor?t.props.backgroundColor:m.colors.background.secondary,";\n            margin: ").concat(n*(t.props.visible?.0025:0),"vw;\n            color: ").concat(t.props.color?t.props.color:m.colors.text.primary,";\n            font-size: ").concat(.01*n,"vw;\n            visibility: ").concat(t.props.visible?"visible":"hidden",";\n            opacity: ").concat(t.props.visible?1:0,";\n            transition: visibility 0.2s, opaicty 0.2s, height 0.2s; \n            ::placeholder {\n                color: ").concat(m.colors.text.support,";\n            }\n        ");return o.a.createElement(pn,{extraProps:e,placeholder:t.props.placeholder,type:t.props.password?"password":"input",value:t.props.value,textAlign:t.props.textAlign,onChange:function(n){!t.props.validator(n.target.value)&&n.target.value.length||t.props.onChange(n.target.value)},onKeyPress:function(n){13!==n.which&&13!==n.keyCode||t.props.onEnterPress()}})},t}return Object(p.a)(e,n),e}(o.a.Component);ln.defaultProps={mobile:!1,placeholder:"placeholder",visible:!0,short:!1,suffix:"",onEnterPress:function(){},onChange:function(){},validator:function(){return!0}};var dn=Object(M.b)(function(n){return{mobile:n.ui.mobile}})(ln),pn=T.a.input(un(),function(n){return void 0===n.width?18:n.width},function(n){return void 0===n.widthUnit?"vw":n.widthUnit},function(n){return n.square?void 0===n.width?5:n.width:void 0===n.height?5:n.height},function(n){return void 0===n.heightUnit?"vh":n.heightUnit},function(n){return void 0===n.backgroundColor?null:"background-color: ".concat(n.backgroundColor)},function(n){return n.fontSize?n.fontSize:1},function(n){return n.light?m.colors.background.primary:m.colors.black},function(n){return void 0===n.color?null:"color: ".concat(n.color)},function(n){return n.textAlign?n.textAlign:"left"},function(n){return n.placeholderColor?m.colors.background.primary:m.colors.text.support},function(n){return void 0===n.placeholderColor?null:"color: ".concat(n.placeholderColor)},function(n){return void 0===n.extraProps?null:n.extraProps}),fn=t(6),hn=t.n(fn),mn=function(n){return function(e,t){+hn()(t().constants.server_time).tz("Europe/Moscow")<+hn()(n.timestamp).tz("Europe/Moscow").add(2,"hour")&&!t().machines.machines.filter(function(e){return e.machineId===n.machineId})[0].isDisabled&&!t().laundry.laundry.filter(function(e){return e.timestamp===n.timestamp&&e.machineId===n.machineId}).length&&e({type:j,data:{timestamp:n.timestamp,machineId:n.machineId}})}},vn=function(n){return function(e,t){var r=n.filter(function(n){return n.userId===rn.a.User.current().id&&+hn()(n.timestamp)>+hn()(t().constants.server_time).startOf("hour")}).sort(function(n,e){return n.timestamp-e.timestamp});e({type:y,data:[].concat(n)}),r.length||e({type:b,data:m.popUps.EMPTY})}},wn=function(n){return{type:E,data:(e=[].concat(n),e.map(function(n){return{machineId:n.id,isBroken:n.get("isBroken"),isDisabled:n.get("isDisabled"),comment:n.get("comment")}}))};var e};function bn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: space-between\nalign-items: center\nflex-direction: row\nwidth: 63vw\nheight: 10vh\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    height: 100%\n    flex-direction: column\n}\n"]);return bn=function(){return n},n}function gn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nheight: 3vw;\nborder-radius: 0.5vw;\nmargin: 0.5vw;\n&:hover { background-color: ","; };\nbackground-color: ",";\npadding: 0 1vw 0 1vw;\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    height: 10vw\n}\n"]);return gn=function(){return n},n}function yn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: ","vw\nheight: ","vw\nborder: ","vw solid ",";\nborder-top-left-radius: ","vw;\nborder-bottom-left-radius: ","vw;\nborder-top-right-radius: ","vw;\nborder-bottom-right-radius: ","vw;\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\ncursor: ","\ntransition: 0.2s;\n&:hover{\n    ","\n}\n@media (min-width: 320px) and (max-width: 480px) {\n    width: ","vw\n    height: ","vw\n}\n"]);return yn=function(){return n},n}function xn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: ","vw\nheight: 3vw\nbackground: ",";\nbackground: ",";\nborder-top-left-radius: ","vw;\nborder-bottom-left-radius: ","vw;\nborder-top-right-radius: ","vw;\nborder-bottom-right-radius: ","vw;\ncolor: white\n","\ndisplay: -webkit-box;\n   -webkit-line-clamp: 3;\n   -webkit-box-orient: vertical;\n   overflow: hidden;\n   text-overflow: ellipsis;\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    width: ","vw\n    height: 10vh\n}\n"]);return xn=function(){return n},n}function En(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 30vw\nheight: 90vh\njustify-content: flex-start;\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100%\n    height: 100%\n}\n"]);return En=function(){return n},n}var kn=["\u0412\u0421","\u041f\u041d","\u0412\u0422","\u0421\u0420","\u0427\u0422","\u041f\u0422","\u0421\u0411"],On=function(n,e){var t=parseInt(n.slice(1),16),r=e<0?0:255,o=e<0?-1*e:e,i=t>>16,a=t>>8&255,c=255&t;return"#"+(16777216+65536*(Math.round((r-i)*o)+i)+256*(Math.round((r-a)*o)+a)+(Math.round((r-c)*o)+c)).toString(16).slice(1)},_n=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{day:+hn()(),laundry:[],machines:[],isSelected:!1,isBefore:!1},e=function(e){return"border-".concat(e,": 0.05vw solid ").concat(n.isSelected?"transparent":"rgba(0,0,0,0.1)",";")},t=12*n.machines.filter(function(n){return!n.isDisabled}).length-n.laundry.filter(function(e){return+hn()(e.timestamp).tz("Europe/Moscow").startOf("day")===+n.day}).length,r=12*n.machines.filter(function(n){return!n.isDisabled}).length;return o.a.createElement(D,{extraProps:"width: 6vw; height: 6vw; @media (min-width: 320px) and (max-width: 480px) { height: 10vw; }"},o.a.createElement(D,{extraProps:"flex-direction: row; ".concat(e("bottom"),";")},o.a.createElement(D,{extraProps:"width: 3vw; height: 3vw; ".concat(e("right"),"; font-size: ").concat(n.isSelected?1.5:1,"vw; transition: 0.2s; @media (min-width: 320px) and (max-width: 480px) { font-size: ").concat(n.isSelected?6:4,"vw; width: 8vw; height: 100%; } ")},hn()(n.day).tz("Europe/Moscow").format("DD")),o.a.createElement(D,{extraProps:"width: 3vw; height: 3vw; color: ".concat(m.colors.background.support,"; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; width: 8vw; height: 100%; } ")},hn()(n.day).tz("Europe/Moscow").format("MM"))),o.a.createElement(D,{extraProps:"flex-direction: row"},o.a.createElement(D,{extraProps:"width: 3vw; height: 3vw; ".concat(e("right"),"; color: ").concat(n.isBefore?m.colors.text.support:t/r>2/3?m.colors.accept:t/r>1/3?m.colors.yellow:m.colors.reject,"; transition: 0.2s; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; width: 8vw; height: 100%; } ")},t),o.a.createElement(D,{extraProps:"width: 3vw; height: 3vw; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; width: 8vw; height: 100%; } "},r)))},Un=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={selectedDay:+hn()(t.props.server_time).tz("Europe/Moscow").startOf("day"),is_admin:!1},t.subscriptionOptions=["update","create","delete","open"],t.machinesQuery=new rn.a.Query("Machines"),t.laundryQuery=new rn.a.Query("Laundry"),t.machinesSubscription=t.machinesQuery.subscribe(),t.laundrySubscription=t.laundryQuery.subscribe(),t.loadMachines=function(){t.machinesQuery.find().then(function(n){t.props.loadMachines(n)}).catch(function(n){console.log(n)})},t.loadLaundry=function(){rn.a.Cloud.run("getLaundry").then(function(n){t.props.loadLaundry(n)}).catch(function(n){console.log(n)})},t.render=function(){return o.a.createElement(D,{flexDirection:"row",extraProps:"position: relative; @media (min-width: 320px) and (max-width: 480px) { flex-direction: column; height: 100%; }"},o.a.createElement(Pn,{visible:t.state.selectedDay===+hn()(t.props.server_time).tz("Europe/Moscow").startOf("day")},t.props.server_time),o.a.createElement(D,null,o.a.createElement(In,null,o.a.createElement(D,{extraProps:"flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { flex-direction: column; } "},o.a.createElement(An,null,o.a.createElement(D,{extraProps:"flex-direction: row;  "},o.a.createElement(D,{extraProps:"color: ".concat(m.colors.text.support,"; font-size: 1.2vw;")},"\u0421\u0442\u0438\u0440\u0430\u043b\u043a\u0430"),o.a.createElement(D,{extraProps:"width: 1vw; color: ".concat(m.colors.yellow,"; font-size: 1.5vw;")},"|"),o.a.createElement(D,{extraProps:"font-size: 1.2vw; color: ".concat(m.colors.text.primary)},kn[hn()(t.state.selectedDay).tz("Europe/Moscow").day()]," ",hn()(t.state.selectedDay).tz("Europe/Moscow").format("DD.MM.YY")))),o.a.createElement(L,{backgroundColor:m.colors.purple,disabled:t.state.selectedDay===+hn()(t.props.server_time).tz("Europe/Moscow").startOf("day"),onClick:function(){t.setState({selectedDay:+hn()(t.props.server_time).tz("Europe/Moscow").startOf("day")})}},"\u0421\u0435\u0433\u043e\u0434\u043d\u044f")),o.a.createElement(D,{extraProps:"flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { flex-direction: column; }"},o.a.createElement(L,{visible:t.state.is_admin,backgroundColor:m.colors.accept,onClick:function(){t.props.setPopUpWindow(m.popUps.LAUNDRY_SETTINGS)}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),o.a.createElement(L,{backgroundColor:m.colors.lightblue,onClick:function(){t.props.setPopUpWindow(m.popUps.LAUNDRY_OPTIONS)}},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),o.a.createElement(L,{disabled:!t.props.laundry.filter(function(n){return n.userId===rn.a.User.current().id&&+hn()(n.timestamp)>+hn()(t.props.server_time).startOf("hour")}).length,onClick:function(){t.props.setPopUpWindow(m.popUps.RESEVATIONS)}},"\u0421\u0442\u0438\u0440\u043a\u0438 | ",t.props.laundry.filter(function(n){return n.userId===rn.a.User.current().id&&+hn()(n.timestamp)>+hn()(t.props.server_time).startOf("hour")}).length),o.a.createElement(L,{disabled:!t.props.selected_slots.length,backgroundColor:m.colors.accept,onClick:function(){t.props.setPopUpWindow(m.popUps.SHOPPING_BASKET)}},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 | ",t.props.selected_slots.length))),o.a.createElement(D,{extraProps:"width: 64vw; height: 80vh; justify-content: flex-start; @media (min-width: 320px) and (max-width: 480px) { width: 100vw; flex-direction: row; max-width: 100vw; overflow: scroll; height: 100%; } "},[0,1,2,3].map(function(n,e){return o.a.createElement(D,{extraProps:"flex-direction: row;",key:e},kn.map(function(n,r){var i=+hn()(t.props.server_time).tz("Europe/Moscow").startOf("isoWeek").add(e,"week").add(r,"day"),a=+hn()(t.props.server_time).tz("Europe/Moscow").startOf("day")>+hn()(i).tz("Europe/Moscow");return o.a.createElement(Nn,{key:r,inner:!1,week:e,day:r,isBefore:a},o.a.createElement(Nn,{key:r,inner:!0,week:e,day:r,isBefore:a,isToday:+hn()(t.props.server_time).tz("Europe/Moscow").startOf("day")===+hn()(i).tz("Europe/Moscow"),isSelected:+hn()(t.state.selectedDay).tz("Europe/Moscow").startOf("day")===+hn()(i).tz("Europe/Moscow"),isWeekEnd:hn()(i).tz("Europe/Moscow").add(-1,"day").day()>4,onClick:function(){a||t.setState({selectedDay:i})}},o.a.createElement(_n,{day:i,isSelected:+hn()(t.state.selectedDay).tz("Europe/Moscow").startOf("day")===+hn()(i).tz("Europe/Moscow"),isWeekEnd:hn()(i).tz("Europe/Moscow").add(-1,"day").day()>4,isBefore:a,laundry:t.props.laundry,machines:t.props.machines})))}))}))),o.a.createElement(Sn,null,[0,1,2,3,4,5,6,7,8,9,10,11].map(function(n,e){var r=+hn()(t.state.selectedDay).tz("Europe/Moscow").add(2*e,"hour");return o.a.createElement(D,{extraProps:"height: 3.4vw; flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { height: 11vh } ",key:e},o.a.createElement(D,{width:4,extraProps:"color: ".concat(m.colors.text.support,"; height: 4.5vw; justify-content: flex-start; ")},hn()(r).tz("Europe/Moscow").format("HH:mm")),t.props.machines.map(function(n,e){var i={timestamp:r,machineId:n.machineId},a=t.props.laundry.filter(function(n){return n.machineId===i.machineId&&n.timestamp===i.timestamp})[0];return o.a.createElement(D,{key:e},o.a.createElement(Cn,{first:0===e,last:e===t.props.machines.length-1,width:21/t.props.machines.length,isBefore:+hn()(t.props.server_time).tz("Europe/Moscow").add(-2,"hour")>+hn()(r).tz("Europe/Moscow"),isSelected:t.props.selected_slots.filter(function(n){return JSON.stringify(n)===JSON.stringify(i)}).length,isDisabled:n.isDisabled,isBook:!!a,isMyBook:!!a&&a.userId===rn.a.User.current().id,is_vk_owner:!!a&&!!a.vk,onClick:function(){a?a.vk&&window.open(a.vk):t.props.selectSlot(i)}},a?a.name.length>36/t.props.machines.length?a.name.substring(0,36/t.props.machines.length-2)+"...":a.name:"-"))}))})))},t}return Object(p.a)(e,n),Object(u.a)(e,[{key:"componentDidMount",value:function(){var n=this,e=new rn.a.Query(rn.a.Role);for(var t in e.equalTo("name","Admin"),e.find().then(function(e){new rn.a.Query("Roles").equalTo("userId",rn.a.User.current().id).equalTo("role","ADMIN").first().then(function(e){n.setState({is_admin:!!e})})}),this.subscriptionOptions)this.machinesSubscription.on(this.subscriptionOptions[t],function(){n.loadMachines()}),this.laundrySubscription.on(this.subscriptionOptions[t],function(){n.loadLaundry()})}},{key:"componentWillUnmount",value:function(){this.machinesSubscription.unsubscribe(),this.laundrySubscription.unsubscribe()}}]),e}(o.a.Component),jn=Object(M.b)(function(n){return{server_time:n.constants.server_time,selected_slots:n.laundry.selected_slots,machines:n.machines.machines,laundry:n.laundry.laundry}},function(n){return{selectSlot:function(e){return n(mn(e))},setPopUpWindow:function(e){return n(I(e))},loadMachines:function(e){return n(wn(e))},loadLaundry:function(e){return n(vn(e))}}})(Un),Pn=function(n){var e=40*((n.children-+hn()(n.children).tz("Europe/Moscow").startOf("day"))/864e5)-1;return o.a.createElement(D,{extraProps:"visibility: ".concat(n.visible?"visible":"hidden","; transition: 0.2s; opacity: ").concat(+n.visible,"; position: absolute; right: 23.5vw; top: ").concat(e+ +!n.visible,"vw; z-index: 1; color: ").concat(m.colors.purple,";")},o.a.createElement(D,{extraProps:"padding: 0 3vw 0 0; "},hn()(n.children).tz("Europe/Moscow").format("HH:mm")),o.a.createElement(D,{extraProps:"flex-direction: row"},o.a.createElement(D,{extraProps:"width: 0.5vw; height: 0.5vw; border-radius: 1vw; background-color: ".concat(m.colors.purple,";")}),o.a.createElement(D,{extraProps:"width: 6vw; height: 0.1vw; background-color: ".concat(On(m.colors.purple,.6),";")})))},Sn=T.a.div(En()),Cn=T.a.div(xn(),function(n){return n.width},function(n){return n.isBefore||n.isDisabled?m.colors.background.support:n.isSelected?m.colors.lightblue:"rgba(0, 0, 0, 0.03)"},function(n){return n.isBefore?null:n.isMyBook?m.colors.accept:n.isBook?m.colors.WARM_ORANGE:null},function(n){return n.first?.5:0},function(n){return n.first?.5:0},function(n){return n.last?.5:0},function(n){return n.last?.5:0},function(n){return n.isBefore||n.isDisabled?null:n.isBook?n.is_vk_owner?"cursor: pointer;":null:"cursor: pointer;"},function(n){return 4*n.width}),Nn=T.a.div(yn(),function(n){return n.inner?8.6:8.7},function(n){return n.inner?8.6:8.7},function(n){return n.inner?0:.1},m.colors.background.support,function(n){return 0===n.week&&0===n.day?1:0},function(n){return 3===n.week&&0===n.day?1:0},function(n){return 0===n.week&&6===n.day?1:0},function(n){return 3===n.week&&6===n.day?1:0},function(n){return n.inner?"background-color: transparent":null},function(n){return n.isToday?"border: 0.2vw solid ".concat(m.colors.accept):null},function(n){return n.isSelected?"border-radius: 0.5vw; border: 0.2vw solid ".concat(m.colors.purple):null},function(n){return n.isBefore?null:"background-color: transparent"},function(n){return n.isSelected?"background-color: ".concat(m.colors.background.primary):null},function(n){return n.isWeekEnd?"background-color: ".concat(m.colors.background.support):null},function(n){return n.isWeekEnd?"background-color: ".concat(On(m.colors.background.support,.2)):null},function(n){return n.isBefore?"background-color: transparent":null},function(n){return n.isWeekEnd?"color: ".concat(m.colors.text.secondary,";"):"color: ".concat(m.colors.text.primary)},function(n){return n.isBefore?"color: ".concat(m.colors.text.support,";"):null},function(n){return n.isBefore?"default":"pointer;"},function(n){return n.inner?"background-color: ".concat(m.colors.background.secondary,"\n    ").concat(function(n){return n.isWeekEnd?"background-color: ".concat(m.colors.background.support):null},"\n    ").concat(function(n){return n.isBefore?"background-color: transparent":null}):null},function(n){return n.inner?30:30.5},function(n){return n.inner?30:30.5}),An=T.a.div(gn(),m.colors.background.primary,m.colors.background.primary),In=T.a.div(bn()),Mn=t(16),Tn=function(n){return{type:C,data:n}};function Wn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: ","vw; \ncolor: ","; \nfont-size: 0.8vw; \n"]);return Wn=function(){return n},n}function Dn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 6vw;\nheight: 10vh;\nfont-size: 0.8vw;\ncolor: ",";\nbackground-color: ",";\nborder-right: 0.1vw solid ","; \ntransition: 0.2s\n"]);return Dn=function(){return n},n}function zn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: ","vw;\nheight: 9.4vh;\nbackground-color: ",";\nborder-radius: 0.5vw;\nposition: absolute;\nz-index: 2;\nleft: ","vw;\ntop: 0.3vh;\ncursor: pointer;\ntransition: 0.2s\n"]);return zn=function(){return n},n}function Bn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: ","vw;\nheight: 9.4vh;\nmargin: 0.3vh 0 0.3vh 0\nbackground-color: ",";\nborder-top-left-radius: ","vw;\nborder-bottom-left-radius: ","vw;\nborder-top-right-radius: ","vw;\nborder-bottom-right-radius: ","vw;\n&:hover {\n    background-color: ",";\n    border-top-left-radius: ","vw;\n    border-bottom-left-radius: ","vw;\n    border-top-right-radius: ","vw;\n    border-bottom-right-radius: ","vw;\n};\n"]);return Bn=function(){return n},n}function Ln(){var n=Object(c.a)(["\nwidth: 94vw;\nheight: 80vh;\ndisplay: block;\noverflow: auto;\nmax-height: 80vh;\ntransition: 0.2s\n"]);return Ln=function(){return n},n}function Rn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nwidth: 88vw;\nheight: 10vh;\nborder-bottom: 0.02vw solid ",";\ntransition: 0.2s\n"]);return Rn=function(){return n},n}function Yn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nwidth: 88vw;\nheight: 10vh;\npadding-left: 6vw;\nborder-bottom: 0.1vw solid ",";\ntransition: 0.2s\n"]);return Yn=function(){return n},n}function Gn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 94vw\nheight: 90vh\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    flex-direciton: column;\n}\n"]);return Gn=function(){return n},n}var Fn=Array.from({length:21},function(n,e){return e}),Kn=Array.from({length:48},function(n,e){return e}),Hn=["\u0412\u0421","\u041f\u041d","\u0412\u0422","\u0421\u0420","\u0427\u0422","\u041f\u0422","\u0421\u0411"],Vn=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={select_mode:void 0},t.render=function(){var n=t.state.select_mode,e=t.props.club.selected_slot;return o.a.createElement(Qn,null,o.a.createElement(qn,null,Kn.filter(function(n){return n%2===0}).map(function(n,e){return o.a.createElement(ee,{key:e},h()().startOf("day").add(e,"hour").format("HH:mm"))})),o.a.createElement(Xn,null,Fn.map(function(r,i){var a=h()().startOf("day").add(i,"day"),c=h()(a).day()>5||0===h()(a).day();return o.a.createElement(D,{extraProps:"flex-direction: row; position: relative;",key:i},o.a.createElement(ne,{isWeekEnd:c},h()(a).format("DD.MM"),", ",Hn[h()(a).day()]),e&&e.day===i?o.a.createElement($n,{selected_slot:e,onClick:function(){t.props.setPopUpWindow(m.popUps.CLUB_BOOK)}}):null,o.a.createElement(Jn,null,Kn.map(function(r,a){return o.a.createElement(Zn,{key:a,index:a,s:n,day_index:i,onMouseOver:function(){n&&n.from<=a&&t.setState({select_mode:Object(Mn.a)({},n,{to:a})})},onClick:function(){e||(t.props.openBookPopUp(n),n?t.setState({select_mode:void 0}):t.setState({select_mode:{day:i,from:a,to:a}}))}})})))})))},t}return Object(p.a)(e,n),e}(o.a.Component),Qn=T.a.div(Gn()),qn=T.a.div(Yn(),m.colors.background.support),Jn=T.a.div(Rn(),m.colors.background.support),Xn=T.a.div(Ln()),Zn=T.a.div(Bn(),function(n){return 88/Kn.length},function(n){return n.s&&n.s.day===n.day_index&&n.index>=n.s.from&&n.index<=n.s.to?m.colors.background.primary:null},function(n){return n.s&&n.s.from===n.index?.5:0},function(n){return n.s&&n.s.from===n.index?.5:0},function(n){return n.s&&n.s.to===n.index?.5:0},function(n){return n.s&&n.s.to===n.index?.5:0},function(n){return n.s?"white":"rgba(255, 255, 255, 0.3)"},function(n){return n.s?n.s.from===n.index?.5:0:.5},function(n){return n.s?n.s.from===n.index?.5:0:.5},function(n){return n.s?n.s.to===n.index?.5:0:.5},function(n){return n.s?n.s.to===n.index?.5:0:.5}),$n=T.a.div(zn(),function(n){return 88/Kn.length*(n.selected_slot.to-n.selected_slot.from+1)},m.colors.yellow,function(n){return 6+88*n.selected_slot.from/Kn.length}),ne=T.a.div(Dn(),function(n){return n.isWeekEnd?"white":m.colors.text.primary},function(n){return n.isWeekEnd?m.colors.yellow:null},m.colors.background.support),ee=T.a.div(Wn(),88/Kn.length*2,m.colors.text.primary),te=Object(M.b)(function(n){return{server_time:n.constants.server_time,club:n.club}},function(n){return{setPopUpWindow:function(e){return n(I(e))},openBookPopUp:function(e){return n(Tn(e))}}})(Vn),re=[o.a.createElement(jn,{name:m.screens.laundry}),o.a.createElement(te,{name:m.screens.club})];function oe(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 100vw;\nheight: 100vh;\nbackground-color: ",";\ntransition: 0.2s;\n"]);return oe=function(){return n},n}function ie(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nflex-direction: column;\nalign-items: center;\nwidth: 94vw;\nheight: 100vh;\nbackground-color: ",";\ntransition: 0.2s;\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100vw\n}\n"]);return ie=function(){return n},n}function ae(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nflex-direction: column;\nwidth: 6vw;\nheight: 100vh;\nbackground-color: ",";\ntransition: 0.2s;\n@media (min-width: 320px) and (max-width: 480px) {\n    display: none\n}\n"]);return ae=function(){return n},n}function ce(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 94vw;\nheight: 92vh;\ntransition: 0.2s;\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100vw\n    height: 100%;\n    max-height: 92vh;\n    overflow-y: scroll;\n}\n"]);return ce=function(){return n},n}function se(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: flex-end;\nalign-items: center;\nwidth: 94vw;\nheight: 10vh;\nz-index: 2;\ntransition: 0.2s;\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100vw\n}\n"]);return se=function(){return n},n}function ue(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 6vw;\nheight: 10vh;\ntransition: 0.2s;\nborder-bottom: 0.1vh solid ",";\n"]);return ue=function(){return n},n}function le(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nflex-direction: column;\nwidth: 6vw;\nheight: 10vh;\nbackground-color: ",";\ncursor: pointer;\nfont-size: 0.6vw;\ncolor: ",";\nposition: relative;\nbox-sizing: border-box;\nborder-right: 0.15vw solid ",";\n:hover {\n    background-color: ",";\n}\n// transition: 0.2s;\n"]);return le=function(){return n},n}function de(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nwidth: ","vw;\nheight: 4vw;\nborder-radius: 1vw;\nmargin: 0.5vw;\ncursor: pointer;\n&:hover { background-color: ","; };\n",";\ntransition: 0.2s\n"]);return de=function(){return n},n}var pe=function(n,e){var t=parseInt(n.slice(1),16),r=e<0?0:255,o=e<0?-1*e:e,i=t>>16,a=t>>8&255,c=255&t;return"#"+(16777216+65536*(Math.round((r-i)*o)+i)+256*(Math.round((r-a)*o)+a)+(Math.round((r-c)*o)+c)).toString(16).slice(1)},fe=[{title:"\u0421\u0442\u0438\u0440\u043a\u0430",image:t(129),color:m.colors.yellow,name:m.screens.laundry},{title:"\u041a\u043b\u0443\u0431 \u0438 \u041a\u0414\u0421",image:t(129),color:m.colors.accept,name:m.screens.club}],he=function(n,e,t,r){var o=new rn.a.Query(n);o.equalTo(e,t),o.first().then(function(n){r(n)});var i=o.subscribe();return i.on("update",function(n){r(n)}),i.on("create",function(n){r(n)}),i.on("delete",function(n){o.first().then(function(n){r(n)})}),i},me=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).render=function(){return o.a.createElement(Oe,null,o.a.createElement(Ee,null,o.a.createElement(ge,null,o.a.createElement("span",{role:"img","aria-label":"dcam"},"\ud83c\udf3f")),o.a.createElement(D,{width:6,height:90},fe.map(function(n,e){return o.a.createElement(be,{key:e,selected:t.props.mainAppScreen===n.name,color:n.color,onClick:function(){t.props.setMainAppScreen(n.name)}},o.a.createElement("img",{src:n.image,alt:n.title,style:{width:"2.5vw"}}),n.title)}))),o.a.createElement(ke,null,o.a.createElement(ye,null,o.a.createElement(we,{width:4,selected:t.props.popUpWindow===m.popUps.TOP_BALANCE_WINDOW,onClick:function(){t.props.setPopUpWindow(m.popUps.TOP_BALANCE_WINDOW)}},o.a.createElement(D,{extraProps:" width: 3vw; height: 3vw; border-radius: 3vw; background-color: ".concat(t.props.money>0?m.colors.accept:m.colors.background.support,"; color: white; font-size: 0.8vw; transition: background-color 0.2s; ")},t.props.money," \u20bd")),o.a.createElement(we,{width:16,selected:t.props.popUpWindow===m.popUps.TOP_PROFILE_MENU,onClick:function(){t.props.setPopUpWindow(m.popUps.TOP_PROFILE_MENU)}},o.a.createElement(D,{extraProps:" width: 3vw; height: 3vw; border-radius: 3vw; background-color: ".concat(m.colors.background.support,"; ")},o.a.createElement("img",{src:rn.a.User.current().get("avatar"),alt:"",style:{width:"3vw",borderRadius:"3vw"}})),o.a.createElement(D,{alignItems:"flex-start",extraProps:" width: 9vw; height: 1vw; margin: 0.5vw; color: ".concat(m.colors.text.primary,"; ")},rn.a.User.current().get("name").split(" ")[0]),"\ud83c\udf55")),o.a.createElement(xe,null,re.filter(function(n){return n.props.name===t.props.mainAppScreen})[0])))},t}return Object(p.a)(e,n),Object(u.a)(e,[{key:"componentDidMount",value:function(){var n=this;this.balance_sub=he("Balance","userId",rn.a.User.current().id,function(e){n.props.setBalance(e.get("money"))}),this.nfc_sub=he("NFC","userId",rn.a.User.current().id,function(e){n.props.setNfcOwner(!!e)})}},{key:"componentWillUnmount",value:function(){this.balance_sub.unsubscribe(),this.nfc_sub.unsubscribe()}}]),e}(o.a.Component),ve=Object(M.b)(function(n){return{mainAppScreen:n.ui.mainAppScreen,popUpWindow:n.ui.popUpWindow,money:n.constants.money}},function(n){return{setMainAppScreen:function(e){return n(A(e))},setPopUpWindow:function(e){return n(I(e))},setNfcOwner:function(e){return n(cn(e))},setBalance:function(e){return n(sn(e))}}})(me),we=T.a.div(de(),function(n){return n.width?n.width:4},m.colors.background.primary,function(n){return n.selected?"background-color: ".concat(m.colors.background.primary,";"):null}),be=T.a.div(le(),function(n){return n.selected?pe(n.color,.5):null},m.colors.text.support,function(n){return n.selected?n.color:"transparent"},function(n){return n.selected?pe(n.color,.3):m.colors.background.secondary}),ge=T.a.div(ue(),m.colors.background.secondary),ye=T.a.div(se()),xe=T.a.div(ce()),Ee=T.a.div(ae(),m.colors.background.primary),ke=T.a.div(ie(),m.colors.background.secondary),Oe=T.a.div(oe(),m.colors.background.primary),_e=t(106),Ue=t.n(_e),je=t(183),Pe=function(){var n=Object(je.a)(Ue.a.mark(function n(){var e,t;return Ue.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=V.getCurrentUser().w3,(t=new rn.a.Query("User")).equalTo("email",e.U3),n.abrupt("return",t.first().then(function(n){if(n)return rn.a.User.logIn(e.U3,e.Eea).then(function(n){return rn.a.User.current()}).catch(function(n){console.log(n)});var t=new rn.a.User;return t.set("username",e.U3),t.set("password",e.Eea),t.set("email",e.U3),t.set("name",e.ig),t.set("avatar",e.Paa),t.signUp().then(function(n){return rn.a.User.current()}).catch(function(n){console.log(n),V.signOut()})}).catch(function(n){console.log(n)}));case 4:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),Se=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).hideElement=function(n,e){var r=function(n){return!!n&&!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)};e===n&&function(e){var o=function(o){null===o.target.closest("."+n)&&r(e)&&(t.props.popUpWindow===n&&t.props.setPopUpWindow(m.popUps.EMPTY),i())},i=function(){document.removeEventListener("click",o)};document.addEventListener("click",o)}(document.getElementsByClassName(n)[0])},t.render=function(){var n=t.props.popUpWindow!==m.popUps.EMPTY&&t.props.mobile;return o.a.createElement(D,null,o.a.createElement(D,{extraProps:"\n                        width: 100vw;\n                        height: 100vh;\n                        position: absolute;\n                        background-color: rgba(0, 0, 0, ".concat(n?.2:0,");\n                        backdrop-filter: blur(").concat(n?5:0,"px);\n                        visibility: ").concat(n?"visible":"hidden",";\n                        z-index: 2;\n                        top: 0;\n                        transition: 0.2s;\n                    "),onClick:function(){t.props.popUpWindow!==m.popUps.EMPTY&&t.props.setPopUpWindow(m.popUps.EMPTY)}}),t.props.children)},t}return Object(p.a)(e,n),Object(u.a)(e,[{key:"componentWillReceiveProps",value:function(n){this.hideElement(this.props.children.props.name,n.popUpWindow),n.popUpWindow!==m.popUps.EMPTY&&n.mobile?document.getElementsByTagName("body")[0].style.position="fixed":document.getElementsByTagName("body")[0].style.position="inherit"}}]),e}(o.a.Component),Ce=Object(M.b)(function(n){return{popUpWindow:n.ui.popUpWindow,mobile:n.ui.mobile}},function(n){return{setPopUpWindow:function(e){return n(I(e))}}})(Se),Ne="http://dcam.pro:1337/parse/",Ae="dcam",Ie="dcam",Me=(t(243),t(244),t(184)),Te=t.n(Me),We=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).render=function(){var n=t.props.popUpWindow===m.popUps.TOP_PROFILE_MENU,e="\n            // width: 10vw;\n            padding: 0 1vw 0 1vw;\n            height: 4vw;\n            border-radius: 1vw;\n            position: absolute;\n            top: ".concat(n?10:12,"vh;\n            right: 0.5vw;\n            z-index: 1;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            // box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        "),r=[{image:Te.a,onClick:function(){V.signOut(),t.props.setPopUpWindow(m.popUps.EMPTY)}}];return o.a.createElement(D,{className:m.popUps.TOP_PROFILE_MENU,flexDirection:"row",backgroundColor:m.colors.background.primary,extraProps:e},r.map(function(n,e){return o.a.createElement(D,{key:e,extraProps:"\n                                padding: 0.5vw;\n                                border-left: ".concat(+(e===r.length-1&&r.length>1),"px solid ").concat(m.colors.background.secondary,";\n                                cursor: pointer;\n                            "),onClick:function(){n.onClick()}},o.a.createElement("img",{src:n.image,alt:"",style:{width:"2vw"}}))}))},t}return Object(p.a)(e,n),e}(o.a.Component);We.defaultProps={visible:!1};var De=Object(M.b)(function(n){return{popUpWindow:n.ui.popUpWindow}},function(n){return{setEntryScreen:function(e){return n(N(e))},setPopUpWindow:function(e){return n(I(e))}}})(We),ze=t(41),Be=t.n(ze),Le=t(185),Re=t.n(Le),Ye=(t(305),function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={value:"",order_id:""},t.render=function(){var n=t.props.popUpWindow===m.popUps.TOP_BALANCE_WINDOW,e="\n            padding: 1vw;\n            border-radius: 1vw;\n            position: absolute;\n            top: ".concat(n?10:12,"vh;\n            right: 17.5vw;\n            z-index: ").concat(n?1:-1,";\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            // box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            background-color: ").concat(m.colors.background.primary,";\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        ");return o.a.createElement(D,{className:m.popUps.TOP_BALANCE_WINDOW,extraProps:e},o.a.createElement(D,{extraProps:"flex-direction: row; color: ".concat(m.colors.text.primary)},"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c ",o.a.createElement("span",{role:"img","aria-label":"martini"},"\ud83c\udf78")),o.a.createElement(dn,{placeholder:"\u0421\u0443\u043c\u043c\u0430",short:!0,onChange:function(n){t.setState({value:n})},value:t.state.value,validator:function(n){return Re.a.isInt(n)}}),o.a.createElement("form",{method:"POST",action:"https://money.yandex.ru/quickpay/confirm.xml"},o.a.createElement("input",{type:"hidden",name:"receiver",value:"410018436058863"}),o.a.createElement("input",{type:"hidden",name:"label",value:t.state.order_id}),o.a.createElement("input",{type:"hidden",name:"quickpay-form",value:"donate"}),o.a.createElement("input",{type:"hidden",name:"targets",value:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438: ".concat(t.state.order_id)}),o.a.createElement("input",{type:"hidden",name:"sum",value:+t.state.value,"data-type":"number"}),o.a.createElement("input",{type:"hidden",name:"paymentType",value:"AC"}),o.a.createElement("input",{id:"yandex_money_button",type:"submit",value:"\u0414\u0430\u043b\u0435\u0435",style:{display:"none"}}),o.a.createElement(L,{visible:n,disabled:t.state.value<2,backgroundColor:m.colors.accept,onClick:function(){rn.a.Cloud.run("saveTransaction",{value:+t.state.value}).then(function(n){t.setState({order_id:n}),document.getElementById("yandex_money_button").click()})}},"\u0414\u0430\u043b\u0435\u0435")))},t}return Object(p.a)(e,n),e}(o.a.Component)),Ge=Object(M.b)(function(n){return{popUpWindow:n.ui.popUpWindow}},function(n){return{setPopUpWindow:function(e){return n(I(e))}}})(Ye);function Fe(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nheight: 3vw\ntransition: 0.2s\n"]);return Fe=function(){return n},n}var Ke=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).weekDays=["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],t.clearSelections=function(){for(var n in t.props.selected_slots)t.props.selectSlot(t.props.selected_slots[n]);t.props.setPopUpWindow(m.popUps.EMPTY)},t.render=function(){var n=t.props.popUpWindow===m.popUps.SHOPPING_BASKET,e="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(m.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 30.75vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            display: block;\n            max-height: 70vh;\n            overflow-y: scroll;\n            transition: 0.2s;\n        ");return o.a.createElement(D,{className:m.popUps.SHOPPING_BASKET,extraProps:e},t.props.selected_slots.map(function(n,e){return o.a.createElement(Ve,{key:e},o.a.createElement(D,{width:5,alignItems:"flex-start; margin: 0.5vw;"},o.a.createElement(D,{extraProps:" color: ".concat(m.colors.text.support,"; font-size: 0.8vw; ")},t.weekDays[h()(n.timestamp).day()]),o.a.createElement(D,{extraProps:" font-size: 0.8vw; color: ".concat(m.colors.text.primary,"; ")},h()(n.timestamp).format("DD.MM.YY"))),o.a.createElement(D,null,o.a.createElement(D,{extraProps:" font-size: 1.5vw; color: ".concat(m.colors.text.primary,"; ")},h()(n.timestamp).format("HH:mm"))),o.a.createElement(D,{fontSize:1,extraProps:" margin: 0.5vw; width: 2vw; height: 2vw; border-radius: 2vw; background-color: ".concat(m.colors.purple,"; color: white; ")},t.props.machines.map(function(n){return n.machineId}).indexOf(n.machineId)+1),o.a.createElement(D,{width:2.5,extraProps:"color: ".concat(m.colors.text.primary,";")},t.props.laundry_cost," \u20bd"),o.a.createElement(D,{extraProps:" border-left: 1px solid ".concat(m.colors.background.support,"; margin-left: 0.5vw; width: 1.5vw; height: 2vw; cursor: pointer; ")},o.a.createElement("img",{src:Be.a,alt:"",style:{width:"1.2vw",marginLeft:"0.5vw"},onClick:function(){t.props.selectSlot(n)}})))}),o.a.createElement(D,{flexDirection:"row"},o.a.createElement(L,{visible:n,onClick:function(){t.clearSelections()}},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),o.a.createElement(L,{visible:n,disabled:t.props.selected_slots.length*t.props.laundry_cost>t.props.money,backgroundColor:m.colors.accept,onClick:function(){if(t.props.is_nfc_owner){var n=t.props.selected_slots;t.props.selected_slots.length*t.props.laundry_cost<=t.props.money&&(!function e(){var t={timestamp:n[0].timestamp,machineId:n[0].machineId};rn.a.Cloud.run("setLaundry",t).then(function(t){n.shift(),n.length&&e()})}(),t.clearSelections())}else t.props.setPopUpWindow(m.popUps.GET_NFC)}},"\u041a\u0443\u043f\u0438\u0442\u044c")))},t}return Object(p.a)(e,n),e}(o.a.Component),He=Object(M.b)(function(n){return{popUpWindow:n.ui.popUpWindow,selected_slots:n.laundry.selected_slots,is_nfc_owner:n.constants.is_nfc_owner,machines:n.machines.machines,money:n.constants.money,laundry_cost:n.constants.laundry_cost}},function(n){return{setPopUpWindow:function(e){return n(I(e))},selectSlot:function(e){return n(mn(e))}}})(Ke),Ve=T.a.div(Fe()),Qe=t(186),qe=t.n(Qe),Je=t(107),Xe=t.n(Je),Ze=t(187),$e=t.n(Ze),nt=t(108),et=t.n(nt),tt=t(109),rt=t.n(tt);function ot(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\ntransition: 0.2s\n"]);return ot=function(){return n},n}function it(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nmargin: 0.2vw;\nbackground-color: ",";\nborder-radius: 0.5vw;\ncolor: white\nwidth: 4vw;\nheight: 4vw;\ntransition: 0.2s\ncursor: pointer;\n"]);return it=function(){return n},n}var at=function(n){var e=function(e){var t=new rn.a.Query("Machines");t.equalTo("objectId",n[e].machineId),t.first().then(function(t){n[e].should_be_deleted?t.destroy().catch(function(n){console.log(n)}):(t.set("isBroken",n[e].isBroken),t.set("isDisabled",n[e].isDisabled),t.save().catch(function(n){console.log(n)}))}).catch(function(n){console.log(n)})};for(var t in n)e(t)},ct=[{backgroundColor:m.colors.yellow,image:et.a,supportImage:et.a,name:"isBroken"},{backgroundColor:m.colors.WARM_ORANGE,image:rt.a,supportImage:rt.a,name:"isDisabled"},{backgroundColor:m.colors.text.support,image:qe.a,supportImage:Xe.a,name:"should_be_deleted"}],st=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={machines:t.props.machines,openedMachine:null},t.weekDays=["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],t.render=function(){var n=t.props.popUpWindow===m.popUps.LAUNDRY_SETTINGS,e="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(m.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 57vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        ");return o.a.createElement(D,{className:m.popUps.LAUNDRY_SETTINGS,extraProps:e},o.a.createElement(D,{extraProps:"flex-direction: row"},t.state.machines.map(function(n,e){var r=null;return n.isBroken&&(r=ct[0]),n.isDisabled&&(r=ct[1]),n.should_be_deleted&&(r=ct[2]),o.a.createElement(D,{key:e,extraProps:"position: relative;"},o.a.createElement(D,{extraProps:"width: 4vw; height: 4vw; background-color: ".concat(r?r.backgroundColor:m.colors.background.support,"; border-radius: 0.5vw; margin: 0.1vw; color: white; cursor: pointer;"),onClick:function(){t.setState({openedMachine:t.state.openedMachine===e?null:e})}},r?o.a.createElement("img",{src:r.image,alt:"",style:{width:"1.5vw"}}):e+1),o.a.createElement(D,{extraProps:"visibility: ".concat(t.state.openedMachine===e?"visible":"hidden","; opacity: ").concat(+(t.state.openedMachine===e),"; position: absolute; box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05); padding: 0.5vw; border-radius: 0.5vw; top: ").concat(+(t.state.openedMachine===e)+3.5,"vw; background-color: ").concat(m.colors.background.primary,";  transition: 0.2s;")},ct.map(function(r,i){return o.a.createElement(D,{key:i,extraProps:"cursor: pointer; visibility: ".concat(t.state.openedMachine===e?"visible":"hidden","; opacity: ").concat(+(t.state.openedMachine===e),"; width: 4vw; height: 4vw; background-color: ").concat(n[r.name]?r.backgroundColor:m.colors.background.support,"; border-radius: 0.5vw; margin: 0.1vw; color: white; transition: 0.2s;"),onClick:function(){var o=t.state.machines;o[e][r.name]=!n[r.name],o[e].isDisabled&&(o[e].isBroken=!1),t.setState({machines:o})}},o.a.createElement("img",{src:n[r.name]?r.supportImage:r.image,alt:"",style:{width:"1.5vw"}}))})))}),o.a.createElement(D,{extraProps:"width: 4vw; height: 4vw; border-radius: 0.5vw; margin: 0.1vw; color: ".concat(m.colors.background.support,"; font-size: 2vw; border: 0.15vw dashed ").concat(m.colors.background.support,"; cursor: pointer; "),onClick:function(){var n=new(rn.a.Object.extend("Machines"));n.set("isBroken",!1),n.set("isDisabled",!1),n.set("comment",""),n.save().catch(function(n){console.log(n)})}},"+"),o.a.createElement(D,{extraProps:"width: 4vw; height: 4vw; border-radius: 0.5vw; margin: 0.1vw; font-size: 2vw; background-color: ".concat(m.colors.accept,"; cursor: pointer; "),onClick:function(){t.setState({openedMachine:null}),at(t.state.machines)}},o.a.createElement("img",{src:$e.a,alt:"",style:{width:"2vw"}})),o.a.createElement(D,{extraProps:"width: 4vw; height: 4vw; border-radius: 0.5vw; margin: 0.1vw; font-size: 2vw; background-color: ".concat(m.colors.background.support,"; cursor: pointer; "),onClick:function(){new rn.a.Query("Machines").find().then(function(n){t.props.loadMachines(n)}).catch(function(n){console.log(n)})}},o.a.createElement("img",{src:Xe.a,alt:"",style:{width:"1.5vw"}}))))},t}return Object(p.a)(e,n),Object(u.a)(e,[{key:"componentWillReceiveProps",value:function(n){this.props.machines!==n.machines&&this.setState({machines:n.machines}),this.props.popUpWindow!==n.popUpWindow&&this.setState({openedMachine:null})}}]),e}(o.a.Component),ut=Object(M.b)(function(n){return{popUpWindow:n.ui.popUpWindow,machines:n.machines.machines}},function(n){return{setPopUpWindow:function(e){return n(I(e))},loadMachines:function(e){return n(wn(e))}}})(st);T.a.div(it(),m.colors.background.support),T.a.div(ot());function lt(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nheight: 3vw\ntransition: 0.2s\n"]);return lt=function(){return n},n}var dt=["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],pt=function(n){var e=new rn.a.Query("Laundry");e.equalTo("objectId",n.laundryId),e.first().then(function(n){n.destroy().catch(function(n){console.log(n)})}).catch(function(n){console.log(n)})},ft=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).render=function(){var n=t.props.popUpWindow===m.popUps.RESEVATIONS,e="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(m.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 39.5vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            display: block;\n            max-height: 70vh;\n            overflow-y: scroll;\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        ");return o.a.createElement(D,{className:m.popUps.RESEVATIONS,extraProps:e},t.props.laundry.map(function(n,e){return o.a.createElement(mt,{key:e},o.a.createElement(D,null,o.a.createElement(D,{extraProps:"width: 5vw; align-items: flex-start; font-size: 0.8vw; color: ".concat(m.colors.text.support)},dt[h()(n.timestamp).tz("Europe/Moscow").day()]),o.a.createElement(D,{extraProps:"width: 5vw; align-items: flex-start; font-size: 0.8vw; color: ".concat(m.colors.text.primary)},h()(n.timestamp).tz("Europe/Moscow").format("DD.MM.YY"))),o.a.createElement(D,{extraProps:"font-size: 1.5vw; color: ".concat(m.colors.text.primary," ")},h()(n.timestamp).tz("Europe/Moscow").format("HH:mm")),o.a.createElement(D,{extraProps:"width: 2vw; height: 2vw; border-radius: 2vw; background: ".concat(m.colors.accept,"; margin-left: 1vw; color: white;")},t.props.machines.map(function(n){return n.machineId}).indexOf(n.machineId)+1),o.a.createElement(D,{extraProps:" border-left: 1px solid ".concat(m.colors.background.support,"; margin-left: 0.5vw; width: 1.5vw; height: 2vw; cursor: pointer; ")},o.a.createElement("img",{src:Be.a,alt:"",style:{width:"1.2vw",marginLeft:"0.5vw"},onClick:function(){pt(n)}})))}))},t}return Object(p.a)(e,n),e}(o.a.Component),ht=Object(M.b)(function(n){return{popUpWindow:n.ui.popUpWindow,laundry:n.laundry.laundry.filter(function(e){return e.userId===rn.a.User.current().id&&+h()(e.timestamp)>+h()(n.constants.server_time).startOf("hour")}).sort(function(n,e){return n.timestamp-e.timestamp}),machines:n.machines.machines}},function(n){return{setPopUpWindow:function(e){return n(I(e))},selectSlot:function(e){return n(mn(e))}}})(ft),mt=T.a.div(lt());function vt(){var n=Object(c.a)(["\npadding: 1vw;\nborder-radius: 1vw;\nposition: absolute;\ndisplay: flex;\nalign-items: center;\njustify-content: center;\nflex-direction: column;\ntop: ","vh;\nright: 2vw;\nz-index: ",";\nopacity: ",";\nvisibility: ",";\n// box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\ntransition: 0.2s;\n"]);return vt=function(){return n},n}function wt(){var n=Object(c.a)(["\ndisplay: flex\nposition: absolute;\nz-index: ",";\ntop: 0vw;\nright: 0vw;\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 94vw\nheight: 100vh\nbackground: rgba(0,0,0,.",");\nbackdrop-filter: blur(","px);\nvisibility: ",";\ntransition: 0.2s\n"]);return wt=function(){return n},n}function bt(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 17.5vw;\nmargin-bottom: 0.5vw;\ncolor: ",";\npadding: 1vw;\nbackground-color: ",";\nborder-radius: 0.5vw;\ntext-align: left;\ntransition: 0.2s\n"]);return bt=function(){return n},n}var gt=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={value:""},t.render=function(){var n=t.props.popUpWindow===m.popUps.GET_NFC;return o.a.createElement(xt,{className:m.popUps.GET_NFC,visible:n},o.a.createElement(Et,{visible:n},o.a.createElement(yt,null,"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0431\u0440\u043e\u043d\u044c \u0441\u0442\u0430\u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430, \u043f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e \u043a\u0430\u043a \u0412\u044b \u043f\u0440\u0438\u0432\u044f\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u043a \u043a \u043f\u0440\u043e\u0444\u0438\u043b\u044e."),o.a.createElement(D,{extraProps:"padding: 1vw; background-color: ".concat(m.colors.background.primary,"; border-radius: 0.5vw;")},o.a.createElement(dn,{short:!1,placeholder:"NFC UID (8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)",value:t.state.value,onChange:function(n){t.setState({value:n})}}),o.a.createElement(L,{visible:n,short:!1,backgroundColor:m.colors.accept,onClick:function(){rn.a.Cloud.run("createNfcRecord",{value:t.state.value.toUpperCase()})},disabled:8!==(""+t.state.value).length},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),o.a.createElement(L,{visible:n,short:!1,backgroundColor:m.colors.reject,onClick:function(){t.props.setPopUpWindow(m.popUps.EMPTY)}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))))},t}return Object(p.a)(e,n),e}(o.a.Component),yt=T.a.div(bt(),m.colors.text.primary,m.colors.background.primary),xt=T.a.div(wt(),function(n){return n.visible?1:-1},function(n){return n.visible?2:0},function(n){return n.visible?2:0},function(n){return n.visible?"visible":"hidden"}),Et=T.a.div(vt(),function(n){return n.visible?10:12},function(n){return n.visible?1:-1},function(n){return n.visible?1:0},function(n){return n.visible?"visible":"hidden"}),kt=Object(M.b)(function(n){return{popUpWindow:n.ui.popUpWindow}},function(n){return{setPopUpWindow:function(e){return n(I(e))}}})(gt),Ot=t(43),_t=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={vk:rn.a.User.current().get("vk")},t.render=function(){var n=t.props.popUpWindow===m.popUps.LAUNDRY_OPTIONS,e="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(m.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 48vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.2);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            transition: 0.2s;\n        ");return o.a.createElement(D,{className:m.popUps.LAUNDRY_OPTIONS,extraProps:e},t.state.vk?Ut(Object(Ot.a)(Object(Ot.a)(t)),n):jt(Object(Ot.a)(Object(Ot.a)(t)),n))},t}return Object(p.a)(e,n),Object(u.a)(e,[{key:"componentDidMount",value:function(){var n=this;rn.a.User.current().get("vk")&&en.getUser(rn.a.User.current().get("vk").split("/").pop(),function(e){n.setState({vk:e[0]})})}}]),e}(o.a.Component),Ut=function(n,e){return o.a.createElement(D,{extraProps:"flex-direction: row"},o.a.createElement("img",{src:n.state.vk.photo_200,style:{width:"3vw",borderRadius:"3vw"},alt:""}),o.a.createElement(D,{extraProps:"margin: 0 1vw 0 1vw; color: ".concat(m.colors.text.primary)},n.state.vk.first_name," ",n.state.vk.last_name),o.a.createElement(L,{visible:e,backgroundColor:m.colors.vk,onClick:function(){new rn.a.Query("User").equalTo("objectId",rn.a.User.current().id).first().then(function(e){e.set("vk",null),e.save().then(function(e){n.setState({vk:void 0})}).catch(function(n){console.log(n)})}).catch(function(n){console.log(n)})}},"\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u0412\u041a"))},jt=function(n,e){return o.a.createElement(D,null,o.a.createElement(D,{extraProps:"color: ".concat(m.colors.text.primary,"; width: 13vw; font-size: 0.8vw; text-align: left; margin: 1vw;")},"\u041f\u0440\u0438\u0432\u0436\u0438\u0442\u0435 \u0412\u0430\u0448 \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435, \u0438 \u0412\u0430\u043c \u0441\u0442\u0430\u043d\u0443\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439. \u0412\u044b \u0432 \u043b\u044e\u0431\u043e\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u043f\u0440\u0438\u0432\u044f\u0437\u043a\u0443."),o.a.createElement(L,{visible:e,backgroundColor:m.colors.vk,onClick:function(){en.login(function(e){new rn.a.Query("User").equalTo("objectId",rn.a.User.current().id).first().then(function(t){t.set("vk",e.session.user.href),t.save().then(function(e){en.getUser(e.get("vk").split("/").pop(),function(e){n.setState({vk:e[0]})})}).catch(function(n){console.log(n)})}).catch(function(n){console.log(n)})})}},"\u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"))},Pt=Object(M.b)(function(n){return{popUpWindow:n.ui.popUpWindow}},function(n){return{setPopUpWindow:function(e){return n(I(e))}}})(_t);function St(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 1.5vw\nheight: 1.5vw\nposition: absolute;\ntop: 0.25vw;\nleft: ","vw;\nborder-radius: 1.5vw\nbackground-color: ","\ntransform: rotate(","deg);\ncursor: pointer;\ntransition: 0.2s\n"]);return St=function(){return n},n}function Ct(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 3.5vw\nheight: 2vw\nborder-radius: 2vw\nposition: relative;\n// border: 0.15vw solid ","\nbackground-color: ","\ncursor: pointer;\ntransition: 0.2s\n"]);return Ct=function(){return n},n}var Nt=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={checked:!1},t.render=function(){return o.a.createElement(At,{checked:t.props.checked,onClick:function(){t.props.onChange(!t.props.checked)}},o.a.createElement(It,{checked:t.props.checked}))},t}return Object(p.a)(e,n),e}(o.a.Component);Nt.defaultProps={checked:!1,onChange:function(){}};var At=T.a.div(Ct(),m.colors.background.primary,function(n){return n.checked?m.colors.accept:m.colors.background.support}),It=T.a.div(St(),function(n){return n.checked?1.75:.25},m.colors.background.primary,function(n){return n.checked?0:45});function Mt(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nborder-radius: 1vw;\npadding: 1vw 1vw 1vw 1vw\nbackground-color: ",";\nflex-direction: column\nposition: absolute;\ntop: 30vh;\nright: 0vw;\nbox-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\nz-index: 2;\ntransition: 0.2s\n"]);return Mt=function(){return n},n}var Tt=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).render=function(){var n=t.props.popUpWindow===m.popUps.CLUB_BOOK,e="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(m.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 2vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        "),r=Math.ceil((h()().endOf("month").endOf("isoWeek")-h()().startOf("month").startOf("isoWeek"))/864e5/7);return o.a.createElement(D,{className:m.popUps.CLUB_BOOK,extraProps:e},o.a.createElement(L,{short:!1},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"),o.a.createElement(L,{short:!1,backgroundColor:m.colors.WARM_ORANGE,onClick:function(){t.props.openBookPopUp(void 0)}},"\u041e\u0442\u043c\u0435\u043d\u0430"),o.a.createElement(Dt,null,o.a.createElement(D,null,o.a.createElement(D,null,"\u0424\u0435\u0432\u0440\u0430\u043b\u044c"),Array.from({length:r},function(n,e){return e}).map(function(n,e){return o.a.createElement(D,{key:e},n)}))))},t}return Object(p.a)(e,n),e}(o.a.Component),Wt=Object(M.b)(function(n){return{popUpWindow:n.ui.popUpWindow,machines:n.machines.machines}},function(n){return{setPopUpWindow:function(e){return n(I(e))},openBookPopUp:function(e){return n(Tn(e))}}})(Tt),Dt=T.a.div(Mt(),m.colors.background.primary),zt=[o.a.createElement(De,{name:m.popUps.TOP_PROFILE_MENU}),o.a.createElement(Ge,{name:m.popUps.TOP_BALANCE_WINDOW}),o.a.createElement(He,{name:m.popUps.SHOPPING_BASKET}),o.a.createElement(ut,{name:m.popUps.LAUNDRY_SETTINGS}),o.a.createElement(ht,{name:m.popUps.RESEVATIONS}),o.a.createElement(kt,{name:m.popUps.GET_NFC}),o.a.createElement(Pt,{name:m.popUps.LAUNDRY_OPTIONS}),o.a.createElement(Wt,{name:m.popUps.CLUB_BOOK})];function Bt(){var n=Object(c.a)(["\n    display: flex\n    position: absolute\n    bottom: 0\n    justify-content: center\n    align-items: flex-start\n    flex-direction: row\n    width: 100vw\n    padding: 1vw;\n    background-color: ","\n    @media (min-width: 320px) and (max-width: 480px) {\n        flex-direction: column\n        align-items: center\n    }\n    transition: 0.2s\n    "]);return Bt=function(){return n},n}function Lt(){var n=Object(c.a)(["\n    display: flex\n    justify-content: center\n    align-items: center\n    flex-direction: column\n    width: 100vw\n    height: 100vh\n    transition: 0.2s\n    "]);return Lt=function(){return n},n}function Rt(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 100vw\nheight: 100vh\nbackground-color: ","\ntransition: 0.2s\n"]);return Rt=function(){return n},n}rn.a.initialize(Ae,Ie),rn.a.serverURL=Ne;var Yt=zt.map(function(n,e){return o.a.createElement(Ce,{key:e},n)}),Gt=function(n,e,t,r){var o=new rn.a.Query(n);o.equalTo(e,t),o.first().then(function(n){r(n)});var i=o.subscribe();i.on("update",function(n){r(n)}),i.on("create",function(n){r(n)}),i.on("delete",function(n){o.first().then(function(n){r(n)})})},Ft=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={auth:rn.a.User.current(),server_time:0,init:!1},t.render=function(){return t.state.init?o.a.createElement(Ht,null,t.state.auth?o.a.createElement(ve,null):o.a.createElement(X,null),t.state.auth?Yt:null):o.a.createElement(Vt,null)},t}return Object(p.a)(e,n),Object(u.a)(e,[{key:"componentDidMount",value:function(){var n=this,e=function(){n.setState({auth:rn.a.User.current()})};!function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};V.initGoogle().then(function(){V.initClient().then(function(){if(n(),V.isAuthorized())if(rn.a.User.current()){var r=new rn.a.Query("User");r.equalTo("objectId",rn.a.User.current().id),r.first().then(function(n){}).catch(function(n){console.log("user is deleted"),rn.a.User.logOut(),V.signOut()})}else Pe().then(function(n){e(n)});else V.isAuthorized(),rn.a.User.logOut();V.subscribeSignIn(function(n){n?rn.a.User.current()?(rn.a.User.logOut(),Pe().then(function(n){e()})):Pe().then(function(n){e()}):rn.a.User.logOut().then(function(n){t()}).catch(function(n){console.log(n)})})}).catch(function(n){console.log(n)})}).catch(function(n){console.log(n)})}(function(){n.setState({init:!0})},e,e),Gt("Constants","name","timestamp",function(e){n.props.setServerTime(+hn()(+e.get("value")).tz("Europe/Moscow"))}),Gt("Constants","name","laundry_cost",function(e){n.props.setLaundryCost(e.get("value"))}),en.initVK()}}]),e}(o.a.Component),Kt=Object(M.b)(function(n){return{server_time:n.constants.server_time}},function(n){return{setServerTime:function(e){return n(on(e))},setLaundryCost:function(e){return n(an(e))}}})(Ft),Ht=T.a.div(Rt(),m.colors.background.primary),Vt=function(){var n=T.a.div(Lt()),e=T.a.div(Bt(),m.colors.purple);return o.a.createElement(n,null,o.a.createElement(L,{short:!1,backgroundColor:"transparent"},o.a.createElement(D,{extraProps:" color: black; flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw } "},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430... ",o.a.createElement("span",{role:"img","aria-label":"hand"},"\ud83d\ude48"))),o.a.createElement(e,null,o.a.createElement(D,{extraProps:" width: 80%; height: 3vw; color: white; font-size: 0.8vw; text-align: left; @media (min-width: 320px) and (max-width: 480px) { height: 15vh; font-size: 3vw }"},"\u041c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c cookie \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 \u0441\u0435\u0440\u0432\u0438\u0441\u044b Google \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b. \u0415\u0441\u043b\u0438 \u044d\u0442\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0432\u0438\u0441\u0438\u0442 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0434\u043e\u043b\u0433\u043e - \u0412\u044b \u0437\u0430\u043f\u0440\u0435\u0442\u0438\u043b\u0438 cookie \u0432 \u0412\u0430\u0448\u0435\u043c \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435 \u0438\u043b\u0438 \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b. \u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 cookie \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430, \u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."),o.a.createElement(L,{short:!1,onClick:function(){alert(document.cookie)}},o.a.createElement(D,{extraProps:"flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; } "},"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c cookie ",o.a.createElement("span",{role:"img","aria-label":"hand"},"\ud83c\udf6a")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qt=t(42),qt=t(188),Jt={loading:!1,mainAppScreen:m.screens.club,popUpWindow:m.popUps.EMPTY},Xt={loading:!1,server_time:+hn()(),laundry_cost:0,is_nfc_owner:!1,money:0,mobile:!1},Zt={loading:!1,error:void 0,machines:[],subscription:!1},$t=t(189),nr={loading:!1,selected_slots:[],laundry:[]},er={loading:!1,selected_slot:void 0},tr=Object(Qt.c)({ui:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case w:return Object(Mn.a)({},n,{mainAppScreen:e.data});case b:return Object(Mn.a)({},n,{popUpWindow:e.data});case C:return Object(Mn.a)({},n,{popUpWindow:e.data?m.popUps.CLUB_BOOK:"EMPTY"});case P:return Object(Mn.a)({},n,{popUpWindow:e.data?"EMPTY":n.popUpWindow});default:return n}},constants:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case U:return Object(Mn.a)({},n,{server_time:e.data});case g:return Object(Mn.a)({},n,{laundry_cost:e.data});case P:return Object(Mn.a)({},n,{is_nfc_owner:e.data});case S:return Object(Mn.a)({},n,{money:e.data});default:return n}},machines:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case O:return Object(Mn.a)({},n,{subscription:!0});case _:return Object(Mn.a)({},n,{subscription:!1});case x:return function(n,e){return Object(Mn.a)({},n,{loading:!0,error:void 0})}(n);case k:return function(n,e){return Object(Mn.a)({},n,{loading:!1,error:e.error})}(n,e);case E:return Object(Mn.a)({},n,{machines:e.data});default:return n}},laundry:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nr,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:var t=n.selected_slots.filter(function(n){return JSON.stringify(n)===JSON.stringify(e.data)}).length;return Object(Mn.a)({},n,{selected_slots:t?n.selected_slots.filter(function(n){return JSON.stringify(n)!==JSON.stringify(e.data)}):Object($t.a)(n.selected_slots).concat([e.data])});case y:return Object(Mn.a)({},n,{laundry:e.data,selected_slots:n.selected_slots.map(function(n){return JSON.stringify(n)}).filter(function(n){return e.data.map(function(n){return JSON.stringify({timestamp:n.timestamp,machineId:n.machineId})}).indexOf(n)<0}).map(function(n){return JSON.parse(n)})});default:return n}},club:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case C:return Object(Mn.a)({},n,{selected_slot:e.data});default:return n}}}),rr=Object(Qt.d)(tr,Object(Qt.a)(qt.a));a.a.render(o.a.createElement(M.a,{store:rr},o.a.createElement(Kt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})}},[[190,2,1]]]);
//# sourceMappingURL=main.055f9192.chunk.js.map