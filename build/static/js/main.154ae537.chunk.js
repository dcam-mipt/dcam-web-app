(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(n,e,t){n.exports=t.p+"static/media/undo.feaa06e5.svg"},108:function(n,e,t){n.exports=t.p+"static/media/egg.70b07e14.svg"},109:function(n,e,t){n.exports=t.p+"static/media/no-stopping.22d397a4.svg"},129:function(n,e,t){n.exports=t.p+"static/media/laundry_selected.634e9cac.svg"},184:function(n,e,t){n.exports=t.p+"static/media/logout.d1ad6d96.png"},186:function(n,e,t){n.exports=t.p+"static/media/cros_white.eb3c67d1.svg"},187:function(n,e,t){n.exports=t.p+"static/media/upload.e7bc3c08.svg"},190:function(n,e,t){n.exports=t(411)},195:function(n,e,t){},243:function(n,e,t){n.exports=t.p+"static/media/user_selected.15168650.png"},244:function(n,e,t){n.exports=t.p+"static/media/settings_selected.9cfd49f2.svg"},313:function(n,e){},315:function(n,e){},356:function(n,e){},357:function(n,e){},41:function(n,e,t){n.exports=t.p+"static/media/cros.b1585ec7.svg"},411:function(n,e,t){"use strict";t.r(e);var o=t(0),r=t.n(o),i=t(79),a=t.n(i),c=(t(195),t(4)),s=t(10),l=t(29),u=t(12),d=t(11),p=t(13),f=t(14),h=t.n(f),m=(t(111),+h()().startOf("day").add(8,"hour")),v=+h()().startOf("day").add(17,"hour"),w={test:"test",colors:+h()()>v||+h()()<m?{black:"#000",white:"#FFF",back:"#EEEEEE",border:"#939393",lightdark:"#d5d5d5",dark:"#727272",yellow:"#FFCC00",accept:"#66CC33",reject:"#DF422B",blue:"#2B8AFF",purple:"#895aca",darkblue:"#2F61D5",modernblue:"#1e07ca",lightblue:"#3FB6DC",vk:"#3A60A1",WARM_ORANGE:"#FF7052",background:{primary:"#45464D",secondary:"#2A2B31",support:"#767676"},text:{primary:"#fff",secondary:"#fff",support:"#939393"}}:{black:"#000",white:"#FFF",back:"#EEEEEE",border:"#939393",lightdark:"#d5d5d5",dark:"#727272",yellow:"#FFCC00",accept:"#66CC33",reject:"#DF422B",blue:"#2B8AFF",purple:"#895aca",darkblue:"#2F61D5",modernblue:"#1e07ca",lightblue:"#3FB6DC",vk:"#3A60A1",WARM_ORANGE:"#FF7052",background:{primary:"#fff",secondary:"#EEEEEE",support:"#d5d5d5"},text:{primary:"#000",secondary:"#fff",support:"#939393"}},colors_:{SPACE_NAVY:"#25265E",STEEL_GREY:"#868697",SATE_PURPLE:"#7540EE",HAN_BLUE:"#2F61D5",PICTION_BLUE:"#3FB6DC",GRASS_GREEN:"#2DC76D",WARM_ORANGE:"#FF7052",GOLDEN_BAY:"#FFC800"},screens:{home:"HOME",laundry:"LAUNDRY",users:"USERS",club:"club",settings:"SETTINGS",settings_user:"SETTINGS_USER",settings_notifications:"SETTINGS_NOTIFICATIONS",settings_payment:"SETTINGS_PAYMENT"},roles:{USER:"USER",ADMIN:"ADMIN",LAUNDRY_WATCHER:"LAUNDRY_WATCHER"},popUps:{BOOKING_WINDOW:"BOOKING_WINDOW",TOP_PROFILE_MENU:"TOP_PROFILE_MENU",TOP_BALANCE_WINDOW:"TOP_BALANCE_WINDOW",RESEVATIONS:"RESEVATIONS",MOBILE_MENU:"MOBILE_MENU",LAUNDRY_SETTINGS:"LAUNDRY_SETTINGS",EMPTY:"EMPTY",SHOPPING_BASKET:"SHOPPING_BASKET",GET_NFC:"GET_NFC",LAUNDRY_OPTIONS:"LAUNDRY_OPTIONS",CLUB_BOOK:"CLUB_BOOK"},status:{booked:"booked",myBook:"myBook",selected:"selected",free:"free"},errors:{emptyAccount:"users account is exist, but empty"}},b="SET_ENTRY_SCREEN",g="SET_MAIN_APP_SCREEN",y="SET_POP_UP_WINDOW",E="SET_LAUNDRY_COST",x="LOAD_LAUNDRY_SUCCESS",k="LOAD_MACHINES_START",O="LOAD_MACHINES_SUCCESS",_="LOAD_MACHINES_FAIL",U="MACHINES_SUBSCRIPTION_ENABLED",j="MACHINES_SUBSCRIPTION_DISABLED",P="SET_SERVER_TIME",S="SELECT_SLOT",C="SET_NFC_OWNER",A="SET_MONEY",N=function(n){return{type:b,data:n}},I=function(n){return{type:g,data:n}},M=function(n){return{type:y,data:n}},T=t(9),W=t(3);function D(){var n=Object(c.a)(["\n\n    ","\n    ","\n    ","\n    ","\n    \n    box-sizing: border-box;\n    \n    user-select: none;\n    display: flex;\n    justify-content: ",";\n    align-items: ",";\n    text-align: ",";\n    flex-direction: ",";\n    font-size: ","vw;\n\n    -webkit-overflow-scrolling: touch;\n    ::-webkit-scrollbar {\n        width: 0;\n    }\n    \n    ","\n"]);return D=function(){return n},n}var z=W.a.div(D(),function(n){return void 0===n.width?null:"width: ".concat(n.width).concat(void 0===n.widthUnit?"vw":n.widthUnit)},function(n){return void 0===n.height?null:"height: ".concat(n.height).concat(void 0===n.heightUnit?"vh":n.heightUnit)},function(n){return void 0===n.backgroundColor?null:"background-color: ".concat(n.backgroundColor)},function(n){return void 0===n.bold?null:"font-family: Lato-Bold"},function(n){return void 0===n.justifyContent?"center":n.justifyContent},function(n){return void 0===n.alignItems?"center":n.alignItems},function(n){return void 0===n.textAlign?"center":n.textAlign},function(n){return void 0===n.flexDirection?"column":n.flexDirection},function(n){return void 0===n.fontSize?n.mobile?4:1:(n.mobile?4:1)*n.fontSize},function(n){return void 0===n.extraProps?null:n.extraProps}),B=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).render=function(){var n="\n            width: ".concat(100*(t.props.short?.0825:.17),"vw;\n            height: ").concat(100*(t.props.visible?.03:0),"vw;\n            padding: ").concat(100*(t.props.visible?.01:0),"vw;\n            border-radius: ").concat(.5,"vw;\n            background-color: ").concat(t.props.disabled?w.colors.background.support:t.props.backgroundColor,";\n            margin: ").concat(100*(t.props.visible?.0025:0),"vw;\n            color: white;\n            font-size: ").concat(.8,"vw;\n            cursor: ").concat(t.props.disabled?null:"pointer",";\n            visibility: ").concat(t.props.visible?"visible":"hidden",";\n            opacity: ").concat(t.props.visible?1:0,";\n            transition: 0.2s;\n            transition-delay: ").concat(t.props.visible?-1:.2,"s;\n            @media (min-width: 320px) and (max-width: 480px) {\n                width: ").concat(100*(t.props.short?.33:.68),"vw;\n                height: ").concat(100*(t.props.visible?.12:0),"vw;\n                padding: ").concat(100*(t.props.visible?.04:0),"vw;\n                border-radius: ").concat(2,"vw;\n                margin: ").concat(100*(t.props.visible?.01:0),"vw;\n                font-size: ").concat(3.2,"vw;\n            }\n        ");return r.a.createElement(z,{extraProps:n,onClick:function(){t.props.disabled||t.props.onClick()}},t.props.children||t.props.title)},t}return Object(p.a)(e,n),e}(r.a.Component);B.defaultProps={mobile:!1,title:"title",visible:!0,short:!0,disabled:!1,backgroundColor:w.colors.yellow,onClick:function(){}};var L,R=Object(T.b)(function(n){return{mobile:n.ui.mobile}})(B),F=window.gapi,Y="https://www.googleapis.com/auth/userinfo.email",G={apiKey:"AIzaSyCSGE3JZpVhBKSAHYJXkuzopFOJhx67F4w",clientId:"914233098415-eqgtkp13ai5lb3ba0m8i8an5h1lir93k.apps.googleusercontent.com",scope:Y,hosted_domain:"phystech.edu"},K=function(n){L.currentUser.get().hasGrantedScopes(Y)},H=function(){return L.currentUser.get()},V=function(){if(void 0!==L){var n=L.currentUser.get().hasGrantedScopes(Y);return n}return!1},Q={initGoogle:function(n){return new Promise(function(n,e){F.load("client:auth2",n,e)})},initClient:function(){return F.client.init(G).then(function(n){L=F.auth2.getAuthInstance(),K()})},signIn:function(){L.signIn()},signOut:function(){L.signOut()},getCurrentUser:H,isAuthorized:V,GoogleAuth:L,subscribeSignIn:function(n){L.isSignedIn.listen(function(){n(V())})}};function q(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 30vw\nheight: 100vh\nbackground-color: ","\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100vw\n}\n"]);return q=function(){return n},n}function J(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 70vw\nheight: 100vh\nbackground-color: ","\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    display: none;\n}\n"]);return J=function(){return n},n}function X(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nwidth: 100vw\nheight: 100vh\nbackground-color: ","\ntransition: 0.2s\n"]);return X=function(){return n},n}var Z=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).render=function(){return r.a.createElement($,null,r.a.createElement(nn,null),r.a.createElement(en,null,r.a.createElement(R,{short:!0,backgroundColor:w.colors.yellow,onClick:function(){Q.signIn()}},r.a.createElement(z,{extraProps:"flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; }"},"sign in ",r.a.createElement("span",{role:"img","aria-label":"hand"},"\ud83d\udc4b")))))},t}return Object(p.a)(e,n),e}(r.a.Component),$=W.a.div(X(),w.colors.background.primary),nn=W.a.div(J(),w.colors.yellow),en=W.a.div(q(),w.colors.purple),tn={VK:void 0,initVK:function(){window.VK.init({apiId:6652742})},login:function(n){n||(n=function(){}),window.VK.Auth.login(function(e){return n(e)})},logout:function(n){n||(n=function(){}),window.VK.Auth.logout(function(e){return n(e)})},getLoginStatus:function(n){n||(n=function(){}),window.VK.Auth.getLoginStatus(function(e){return n(e)})},getAvatar:function(n,e){e||(e=function(){}),window.VK.Api.call("users.get",{user_ids:n,v:"5.73",fields:"photo_200"},function(n){n.response&&e(n.response[0].photo_200)})},getUserIsDeactivated:function(n,e){e||(e=function(){}),window.VK.Api.call("users.get",{user_ids:n,v:"5.89"},function(n){n.response&&e(n.response)})},observeSubscribe:function(n,e){e||(e=function(){}),window.VK.Observer.subscribe(n,function(n){return e(n)})},getUser:function(n,e){e||(e=function(){}),window.VK.Api.call("users.get",{user_ids:n,v:"5.89",fields:"photo_200"},function(n){n.response&&e(n.response)})}},on=t(2),rn=t.n(on),an=function(n){return{type:P,data:n}},cn=function(n){return{type:E,data:n}},sn=function(n){return{type:C,data:n}},ln=function(n){return{type:A,data:n}};function un(){var n=Object(c.a)(["\n    width: ","",";\n    height: ","",";\n    ","\n    outline: none;\n    border: none;\n    text-align: center;\n    font-size: ","vw;\n    // color: ",";\n    ","\n    text-align: ",";\n    &::-webkit-input-placeholder {\n        // color: ",";\n        ","\n    }\n    \n    ","\n"]);return un=function(){return n},n}var dn=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).render=function(){var n=t.props.mobile?400:100,e="\n            width: ".concat(n*(t.props.width?.01*t.props.width:t.props.short?.0625:.15),"vw;\n            height: ").concat(n*(t.props.visible?.01:0),"vw;\n            padding: ").concat(n*(t.props.visible?.01:0),"vw;\n            border-radius: ").concat(.005*n,"vw;\n            background-color: ").concat(t.props.backgroundColor?t.props.backgroundColor:w.colors.background.secondary,";\n            margin: ").concat(n*(t.props.visible?.0025:0),"vw;\n            color: ").concat(t.props.color?t.props.color:w.colors.text.primary,";\n            font-size: ").concat(.01*n,"vw;\n            visibility: ").concat(t.props.visible?"visible":"hidden",";\n            opacity: ").concat(t.props.visible?1:0,";\n            transition: visibility 0.2s, opaicty 0.2s, height 0.2s; \n            ::placeholder {\n                color: ").concat(w.colors.text.support,";\n            }\n        ");return r.a.createElement(fn,{extraProps:e,placeholder:t.props.placeholder,type:t.props.password?"password":"input",value:t.props.value,textAlign:t.props.textAlign,onChange:function(n){!t.props.validator(n.target.value)&&n.target.value.length||t.props.onChange(n.target.value)},onKeyPress:function(n){13!==n.which&&13!==n.keyCode||t.props.onEnterPress()}})},t}return Object(p.a)(e,n),e}(r.a.Component);dn.defaultProps={mobile:!1,placeholder:"placeholder",visible:!0,short:!1,suffix:"",onEnterPress:function(){},onChange:function(){},validator:function(){return!0}};var pn=Object(T.b)(function(n){return{mobile:n.ui.mobile}})(dn),fn=W.a.input(un(),function(n){return void 0===n.width?18:n.width},function(n){return void 0===n.widthUnit?"vw":n.widthUnit},function(n){return n.square?void 0===n.width?5:n.width:void 0===n.height?5:n.height},function(n){return void 0===n.heightUnit?"vh":n.heightUnit},function(n){return void 0===n.backgroundColor?null:"background-color: ".concat(n.backgroundColor)},function(n){return n.fontSize?n.fontSize:1},function(n){return n.light?w.colors.background.primary:w.colors.black},function(n){return void 0===n.color?null:"color: ".concat(n.color)},function(n){return n.textAlign?n.textAlign:"left"},function(n){return n.placeholderColor?w.colors.background.primary:w.colors.text.support},function(n){return void 0===n.placeholderColor?null:"color: ".concat(n.placeholderColor)},function(n){return void 0===n.extraProps?null:n.extraProps}),hn=t(6),mn=t.n(hn),vn=function(n){return function(e,t){+mn()(t().constants.server_time).tz("Europe/Moscow")<+mn()(n.timestamp).tz("Europe/Moscow").add(2,"hour")&&!t().machines.machines.filter(function(e){return e.machineId===n.machineId})[0].isDisabled&&!t().laundry.laundry.filter(function(e){return e.timestamp===n.timestamp&&e.machineId===n.machineId}).length&&e({type:S,data:{timestamp:n.timestamp,machineId:n.machineId}})}},wn=function(n){return function(e,t){var o=n.filter(function(n){return n.userId===rn.a.User.current().id&&+mn()(n.timestamp)>+mn()(t().constants.server_time).startOf("hour")}).sort(function(n,e){return n.timestamp-e.timestamp});e({type:x,data:[].concat(n)}),o.length||e({type:y,data:w.popUps.EMPTY})}},bn=function(n){return{type:O,data:(e=[].concat(n),e.map(function(n){return{machineId:n.id,isBroken:n.get("isBroken"),isDisabled:n.get("isDisabled"),comment:n.get("comment")}}))};var e};function gn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: space-between\nalign-items: center\nflex-direction: row\nwidth: 63vw\nheight: 10vh\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    height: 100%\n    flex-direction: column\n}\n"]);return gn=function(){return n},n}function yn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nheight: 3vw;\nborder-radius: 0.5vw;\nmargin: 0.5vw;\n&:hover { background-color: ","; };\nbackground-color: ",";\npadding: 0 1vw 0 1vw;\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    height: 10vw\n}\n"]);return yn=function(){return n},n}function En(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: ","vw\nheight: ","vw\nborder: ","vw solid ",";\nborder-top-left-radius: ","vw;\nborder-bottom-left-radius: ","vw;\nborder-top-right-radius: ","vw;\nborder-bottom-right-radius: ","vw;\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\ncursor: ","\ntransition: 0.2s;\n&:hover{\n    ","\n}\n@media (min-width: 320px) and (max-width: 480px) {\n    width: ","vw\n    height: ","vw\n}\n"]);return En=function(){return n},n}function xn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: ","vw\nheight: 3vw\nbackground: ",";\nbackground: ",";\nborder-top-left-radius: ","vw;\nborder-bottom-left-radius: ","vw;\nborder-top-right-radius: ","vw;\nborder-bottom-right-radius: ","vw;\ncolor: white\n","\ndisplay: -webkit-box;\n   -webkit-line-clamp: 3;\n   -webkit-box-orient: vertical;\n   overflow: hidden;\n   text-overflow: ellipsis;\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    width: ","vw\n    height: 10vh\n}\n"]);return xn=function(){return n},n}function kn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 30vw\nheight: 90vh\njustify-content: flex-start;\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100%\n    height: 100%\n}\n"]);return kn=function(){return n},n}var On=["\u0412\u0421","\u041f\u041d","\u0412\u0422","\u0421\u0420","\u0427\u0422","\u041f\u0422","\u0421\u0411"],_n=function(n,e){var t=parseInt(n.slice(1),16),o=e<0?0:255,r=e<0?-1*e:e,i=t>>16,a=t>>8&255,c=255&t;return"#"+(16777216+65536*(Math.round((o-i)*r)+i)+256*(Math.round((o-a)*r)+a)+(Math.round((o-c)*r)+c)).toString(16).slice(1)},Un=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{day:+mn()(),laundry:[],machines:[],isSelected:!1,isBefore:!1},e=function(e){return"border-".concat(e,": 0.05vw solid ").concat(n.isSelected?"transparent":"rgba(0,0,0,0.1)",";")},t=12*n.machines.filter(function(n){return!n.isDisabled}).length-n.laundry.filter(function(e){return+mn()(e.timestamp).tz("Europe/Moscow").startOf("day")===+n.day}).length,o=12*n.machines.filter(function(n){return!n.isDisabled}).length;return r.a.createElement(z,{extraProps:"width: 6vw; height: 6vw; @media (min-width: 320px) and (max-width: 480px) { height: 10vw; }"},r.a.createElement(z,{extraProps:"flex-direction: row; ".concat(e("bottom"),";")},r.a.createElement(z,{extraProps:"width: 3vw; height: 3vw; ".concat(e("right"),"; font-size: ").concat(n.isSelected?1.5:1,"vw; transition: 0.2s; @media (min-width: 320px) and (max-width: 480px) { font-size: ").concat(n.isSelected?6:4,"vw; width: 8vw; height: 100%; } ")},mn()(n.day).tz("Europe/Moscow").format("DD")),r.a.createElement(z,{extraProps:"width: 3vw; height: 3vw; color: ".concat(w.colors.background.support,"; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; width: 8vw; height: 100%; } ")},mn()(n.day).tz("Europe/Moscow").format("MM"))),r.a.createElement(z,{extraProps:"flex-direction: row"},r.a.createElement(z,{extraProps:"width: 3vw; height: 3vw; ".concat(e("right"),"; color: ").concat(n.isBefore?w.colors.text.support:t/o>2/3?w.colors.accept:t/o>1/3?w.colors.yellow:w.colors.reject,"; transition: 0.2s; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; width: 8vw; height: 100%; } ")},t),r.a.createElement(z,{extraProps:"width: 3vw; height: 3vw; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; width: 8vw; height: 100%; } "},o)))},jn=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={selectedDay:+mn()(t.props.server_time).tz("Europe/Moscow").startOf("day"),is_admin:!1},t.subscriptionOptions=["update","create","delete","open"],t.machinesQuery=new rn.a.Query("Machines"),t.laundryQuery=new rn.a.Query("Laundry"),t.machinesSubscription=t.machinesQuery.subscribe(),t.laundrySubscription=t.laundryQuery.subscribe(),t.loadMachines=function(){t.machinesQuery.find().then(function(n){t.props.loadMachines(n)}).catch(function(n){console.log(n)})},t.loadLaundry=function(){rn.a.Cloud.run("getLaundry").then(function(n){t.props.loadLaundry(n)}).catch(function(n){console.log(n)})},t.render=function(){return r.a.createElement(z,{flexDirection:"row",extraProps:"position: relative; @media (min-width: 320px) and (max-width: 480px) { flex-direction: column; height: 100%; }"},r.a.createElement(Sn,{visible:t.state.selectedDay===+mn()(t.props.server_time).tz("Europe/Moscow").startOf("day")},t.props.server_time),r.a.createElement(z,null,r.a.createElement(Mn,null,r.a.createElement(z,{extraProps:"flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { flex-direction: column; } "},r.a.createElement(In,null,r.a.createElement(z,{extraProps:"flex-direction: row;  "},r.a.createElement(z,{extraProps:"color: ".concat(w.colors.text.support,"; font-size: 1.2vw;")},"\u0421\u0442\u0438\u0440\u0430\u043b\u043a\u0430"),r.a.createElement(z,{extraProps:"width: 1vw; color: ".concat(w.colors.yellow,"; font-size: 1.5vw;")},"|"),r.a.createElement(z,{extraProps:"font-size: 1.2vw; color: ".concat(w.colors.text.primary)},On[mn()(t.state.selectedDay).tz("Europe/Moscow").day()]," ",mn()(t.state.selectedDay).tz("Europe/Moscow").format("DD.MM.YY")))),r.a.createElement(R,{backgroundColor:w.colors.purple,disabled:t.state.selectedDay===+mn()(t.props.server_time).tz("Europe/Moscow").startOf("day"),onClick:function(){t.setState({selectedDay:+mn()(t.props.server_time).tz("Europe/Moscow").startOf("day")})}},"\u0421\u0435\u0433\u043e\u0434\u043d\u044f")),r.a.createElement(z,{extraProps:"flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { flex-direction: column; }"},r.a.createElement(R,{visible:t.state.is_admin,backgroundColor:w.colors.accept,onClick:function(){t.props.setPopUpWindow(w.popUps.LAUNDRY_SETTINGS)}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement(R,{backgroundColor:w.colors.lightblue,onClick:function(){t.props.setPopUpWindow(w.popUps.LAUNDRY_OPTIONS)}},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement(R,{disabled:!t.props.laundry.filter(function(n){return n.userId===rn.a.User.current().id&&+mn()(n.timestamp)>+mn()(t.props.server_time).startOf("hour")}).length,onClick:function(){t.props.setPopUpWindow(w.popUps.RESEVATIONS)}},"\u0421\u0442\u0438\u0440\u043a\u0438 | ",t.props.laundry.filter(function(n){return n.userId===rn.a.User.current().id&&+mn()(n.timestamp)>+mn()(t.props.server_time).startOf("hour")}).length),r.a.createElement(R,{disabled:!t.props.selected_slots.length,backgroundColor:w.colors.accept,onClick:function(){t.props.setPopUpWindow(w.popUps.SHOPPING_BASKET)}},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 | ",t.props.selected_slots.length))),r.a.createElement(z,{extraProps:"width: 64vw; height: 80vh; justify-content: flex-start; @media (min-width: 320px) and (max-width: 480px) { width: 100vw; flex-direction: row; max-width: 100vw; overflow: scroll; height: 100%; } "},[0,1,2,3].map(function(n,e){return r.a.createElement(z,{extraProps:"flex-direction: row;",key:e},On.map(function(n,o){var i=+mn()(t.props.server_time).tz("Europe/Moscow").startOf("isoWeek").add(e,"week").add(o,"day"),a=+mn()(t.props.server_time).tz("Europe/Moscow").startOf("day")>+mn()(i).tz("Europe/Moscow");return r.a.createElement(Nn,{key:o,inner:!1,week:e,day:o,isBefore:a},r.a.createElement(Nn,{key:o,inner:!0,week:e,day:o,isBefore:a,isToday:+mn()(t.props.server_time).tz("Europe/Moscow").startOf("day")===+mn()(i).tz("Europe/Moscow"),isSelected:+mn()(t.state.selectedDay).tz("Europe/Moscow").startOf("day")===+mn()(i).tz("Europe/Moscow"),isWeekEnd:mn()(i).tz("Europe/Moscow").add(-1,"day").day()>4,onClick:function(){a||t.setState({selectedDay:i})}},r.a.createElement(Un,{day:i,isSelected:+mn()(t.state.selectedDay).tz("Europe/Moscow").startOf("day")===+mn()(i).tz("Europe/Moscow"),isWeekEnd:mn()(i).tz("Europe/Moscow").add(-1,"day").day()>4,isBefore:a,laundry:t.props.laundry,machines:t.props.machines})))}))}))),r.a.createElement(Cn,null,[0,1,2,3,4,5,6,7,8,9,10,11].map(function(n,e){var o=+mn()(t.state.selectedDay).tz("Europe/Moscow").add(2*e,"hour");return r.a.createElement(z,{extraProps:"height: 3.4vw; flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { height: 11vh } ",key:e},r.a.createElement(z,{width:4,extraProps:"color: ".concat(w.colors.text.support,"; height: 4.5vw; justify-content: flex-start; ")},mn()(o).tz("Europe/Moscow").format("HH:mm")),t.props.machines.map(function(n,e){var i={timestamp:o,machineId:n.machineId},a=t.props.laundry.filter(function(n){return n.machineId===i.machineId&&n.timestamp===i.timestamp})[0];return r.a.createElement(z,{key:e},r.a.createElement(An,{first:0===e,last:e===t.props.machines.length-1,width:21/t.props.machines.length,isBefore:+mn()(t.props.server_time).tz("Europe/Moscow").add(-2,"hour")>+mn()(o).tz("Europe/Moscow"),isSelected:t.props.selected_slots.filter(function(n){return JSON.stringify(n)===JSON.stringify(i)}).length,isDisabled:n.isDisabled,isBook:!!a,isMyBook:!!a&&a.userId===rn.a.User.current().id,is_vk_owner:!!a&&!!a.vk,onClick:function(){a?a.vk&&window.open(a.vk):t.props.selectSlot(i)}},a?a.name.length>36/t.props.machines.length?a.name.substring(0,36/t.props.machines.length-2)+"...":a.name:"-"))}))})))},t}return Object(p.a)(e,n),Object(l.a)(e,[{key:"componentDidMount",value:function(){var n=this,e=new rn.a.Query(rn.a.Role);for(var t in e.equalTo("name","Admin"),e.find().then(function(e){new rn.a.Query("Roles").equalTo("userId",rn.a.User.current().id).equalTo("role","ADMIN").first().then(function(e){n.setState({is_admin:!!e})})}),this.subscriptionOptions)this.machinesSubscription.on(this.subscriptionOptions[t],function(){n.loadMachines()}),this.laundrySubscription.on(this.subscriptionOptions[t],function(){n.loadLaundry()})}},{key:"componentWillUnmount",value:function(){this.machinesSubscription.unsubscribe(),this.laundrySubscription.unsubscribe()}}]),e}(r.a.Component),Pn=Object(T.b)(function(n){return{server_time:n.constants.server_time,selected_slots:n.laundry.selected_slots,machines:n.machines.machines,laundry:n.laundry.laundry}},function(n){return{selectSlot:function(e){return n(vn(e))},setPopUpWindow:function(e){return n(M(e))},loadMachines:function(e){return n(bn(e))},loadLaundry:function(e){return n(wn(e))}}})(jn),Sn=function(n){var e=40*((n.children-+mn()(n.children).tz("Europe/Moscow").startOf("day"))/864e5)-1;return r.a.createElement(z,{extraProps:"visibility: ".concat(n.visible?"visible":"hidden","; transition: 0.2s; opacity: ").concat(+n.visible,"; position: absolute; right: 23.5vw; top: ").concat(e+ +!n.visible,"vw; z-index: 1; color: ").concat(w.colors.purple,";")},r.a.createElement(z,{extraProps:"padding: 0 3vw 0 0; "},mn()(n.children).tz("Europe/Moscow").format("HH:mm")),r.a.createElement(z,{extraProps:"flex-direction: row"},r.a.createElement(z,{extraProps:"width: 0.5vw; height: 0.5vw; border-radius: 1vw; background-color: ".concat(w.colors.purple,";")}),r.a.createElement(z,{extraProps:"width: 6vw; height: 0.1vw; background-color: ".concat(_n(w.colors.purple,.6),";")})))},Cn=W.a.div(kn()),An=W.a.div(xn(),function(n){return n.width},function(n){return n.isBefore||n.isDisabled?w.colors.background.support:n.isSelected?w.colors.lightblue:"rgba(0, 0, 0, 0.03)"},function(n){return n.isBefore?null:n.isMyBook?w.colors.accept:n.isBook?w.colors.WARM_ORANGE:null},function(n){return n.first?.5:0},function(n){return n.first?.5:0},function(n){return n.last?.5:0},function(n){return n.last?.5:0},function(n){return n.isBefore||n.isDisabled?null:n.isBook?n.is_vk_owner?"cursor: pointer;":null:"cursor: pointer;"},function(n){return 4*n.width}),Nn=W.a.div(En(),function(n){return n.inner?8.6:8.7},function(n){return n.inner?8.6:8.7},function(n){return n.inner?0:.1},w.colors.background.support,function(n){return 0===n.week&&0===n.day?1:0},function(n){return 3===n.week&&0===n.day?1:0},function(n){return 0===n.week&&6===n.day?1:0},function(n){return 3===n.week&&6===n.day?1:0},function(n){return n.inner?"background-color: transparent":null},function(n){return n.isToday?"border: 0.2vw solid ".concat(w.colors.accept):null},function(n){return n.isSelected?"border-radius: 0.5vw; border: 0.2vw solid ".concat(w.colors.purple):null},function(n){return n.isBefore?null:"background-color: transparent"},function(n){return n.isSelected?"background-color: ".concat(w.colors.background.primary):null},function(n){return n.isWeekEnd?"background-color: ".concat(w.colors.background.support):null},function(n){return n.isWeekEnd?"background-color: ".concat(_n(w.colors.background.support,.2)):null},function(n){return n.isBefore?"background-color: transparent":null},function(n){return n.isWeekEnd?"color: ".concat(w.colors.text.secondary,";"):"color: ".concat(w.colors.text.primary)},function(n){return n.isBefore?"color: ".concat(w.colors.text.support,";"):null},function(n){return n.isBefore?"default":"pointer;"},function(n){return n.inner?"background-color: ".concat(w.colors.background.secondary,"\n    ").concat(function(n){return n.isWeekEnd?"background-color: ".concat(w.colors.background.support):null},"\n    ").concat(function(n){return n.isBefore?"background-color: transparent":null}):null},function(n){return n.inner?30:30.5},function(n){return n.inner?30:30.5}),In=W.a.div(yn(),w.colors.background.primary,w.colors.background.primary),Mn=W.a.div(gn()),Tn=t(17);function Wn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 94vw\nheight: 10vh\ntransition: 0.2s\n"]);return Wn=function(){return n},n}function Dn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 94vw\nheight: 90vh\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    flex-direciton: column;\n}\n"]);return Dn=function(){return n},n}for(var zn=[],Bn=[],Ln=0;Ln<14;Ln++)zn.push(Ln);for(var Rn=0;Rn<48;Rn++)Bn.push(Rn);var Fn=["\u0412\u0421","\u041f\u041d","\u0412\u0422","\u0421\u0420","\u0427\u0422","\u041f\u0422","\u0421\u0411"],Yn=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={select_mode:void 0,selected_slot:void 0},t.render=function(){return r.a.createElement(Gn,null,r.a.createElement(z,{extraProps:"width: 94vw; height: 10vh; flex-direction: row"},r.a.createElement(z,{extraProps:"width: 6vw; height: 10vh; border-bottom: 0.1vw solid ".concat(w.colors.background.support,"; ")}),r.a.createElement(z,{extraProps:"width: 88vw; height: 10vh; flex-direction: row; border-bottom: 0.1vw solid ".concat(w.colors.background.support,"; ")},Bn.filter(function(n){return n%2===0}).map(function(n,e){return r.a.createElement(z,{key:e,extraProps:"width: ".concat(88/Bn.length*2,"vw; color: ").concat(w.colors.text.primary,"; font-size: 0.8vw; ")},h()().startOf("day").add(e,"hour").format("HH:mm"))}))),r.a.createElement(z,{extraProps:"width: 94vw; height: 80vh; display: block; overflow: auto; max-height: 80vh; "},zn.map(function(n,e){var o=h()().startOf("day").add(e,"day"),i=h()(o).day()>5||0===h()(o).day();return r.a.createElement(z,{extraProps:"flex-direction: row; position: relative;",key:e},r.a.createElement(z,{extraProps:"width: 6vw; height: 10vh; font-size: 0.8vw; color: ".concat(i?"white":w.colors.text.primary,"; background-color: ").concat(i?w.colors.yellow:null,"; border-right: 0.1vw solid ").concat(w.colors.background.support,"; ")},h()(o).format("DD.MM"),", ",Fn[h()(o).day()]),t.state.selected_slot&&t.state.selected_slot.day===e?r.a.createElement(z,{extraProps:"width: ".concat(88/Bn.length*(t.state.selected_slot.to-t.state.selected_slot.from+1),"vw; height: 9.6vh; background-color: ").concat(w.colors.yellow,"; border-radius: 0.5vw; position: absolute; z-index: 2; left: ").concat(6+88*t.state.selected_slot.from/Bn.length,"vw; top: 0.3vh;")}):null,r.a.createElement(z,{extraProps:"width: 88vw; height: 10vh; flex-direction: row; border-top: 0.1vw solid ".concat(w.colors.background.support,"; ")},Bn.map(function(n,o){return r.a.createElement(z,{key:o,extraProps:"\n                                                            width: ".concat(88/Bn.length,"vw;\n                                                            height: 9.6vh;\n                                                            margin: 0.2vh 0 0.2vh 0\n                                                            background-color: ").concat(t.state.select_mode&&t.state.select_mode.day===e&&o>=t.state.select_mode.from&&o<=t.state.select_mode.to?w.colors.background.primary:null,";\n                                                            border-top-left-radius: ").concat(t.state.select_mode&&t.state.select_mode.from===o?.5:0,"vw;\n                                                            border-bottom-left-radius: ").concat(t.state.select_mode&&t.state.select_mode.from===o?.5:0,"vw;\n                                                            border-top-right-radius: ").concat(t.state.select_mode&&t.state.select_mode.to===o?.5:0,"vw;\n                                                            border-bottom-right-radius: ").concat(t.state.select_mode&&t.state.select_mode.to===o?.5:0,"vw;\n                                                            &:hover {\n                                                                background-color: ").concat(w.colors.background.primary,";\n                                                                border-top-left-radius: ").concat(t.state.select_mode?t.state.select_mode.from===o?.5:0:.5,"vw;\n                                                                border-bottom-left-radius: ").concat(t.state.select_mode?t.state.select_mode.from===o?.5:0:.5,"vw;\n                                                                border-top-right-radius: ").concat(t.state.select_mode?t.state.select_mode.to===o?.5:0:.5,"vw;\n                                                                border-bottom-right-radius: ").concat(t.state.select_mode?t.state.select_mode.to===o?.5:0:.5,"vw;\n                                                            };\n                                                        "),onMouseOver:function(){t.state.select_mode&&t.state.select_mode.from<=o&&t.setState({select_mode:Object(Tn.a)({},t.state.select_mode,{to:o})})},onClick:function(){t.state.select_mode?(t.setState({selected_slot:t.state.select_mode,select_mode:void 0}),t.props.setPopUpWindow(w.popUps.CLUB_BOOK)):t.setState({selected_slot:t.state.select_mode,select_mode:{day:e,from:o,to:o}})}})})))})))},t}return Object(p.a)(e,n),e}(r.a.Component),Gn=W.a.div(Dn()),Kn=(W.a.div(Wn()),Object(T.b)(function(n){return{server_time:n.constants.server_time}},function(n){return{setPopUpWindow:function(e){return n(M(e))}}})(Yn)),Hn=[r.a.createElement(Pn,{name:w.screens.laundry}),r.a.createElement(Kn,{name:w.screens.club})];function Vn(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 100vw;\nheight: 100vh;\nbackground-color: ",";\ntransition: 0.2s;\n"]);return Vn=function(){return n},n}function Qn(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nflex-direction: column;\nalign-items: center;\nwidth: 94vw;\nheight: 100vh;\nbackground-color: ",";\ntransition: 0.2s;\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100vw\n}\n"]);return Qn=function(){return n},n}function qn(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nflex-direction: column;\nwidth: 6vw;\nheight: 100vh;\nbackground-color: ",";\ntransition: 0.2s;\n@media (min-width: 320px) and (max-width: 480px) {\n    display: none\n}\n"]);return qn=function(){return n},n}function Jn(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 94vw;\nheight: 92vh;\ntransition: 0.2s;\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100vw\n    height: 100%;\n    max-height: 92vh;\n    overflow-y: scroll;\n}\n"]);return Jn=function(){return n},n}function Xn(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: flex-end;\nalign-items: center;\nwidth: 94vw;\nheight: 10vh;\nz-index: 2;\ntransition: 0.2s;\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100vw\n}\n"]);return Xn=function(){return n},n}function Zn(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 6vw;\nheight: 10vh;\ntransition: 0.2s;\nborder-bottom: 0.1vh solid ",";\n"]);return Zn=function(){return n},n}function $n(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nflex-direction: column;\nwidth: 6vw;\nheight: 10vh;\nbackground-color: ",";\ncursor: pointer;\nfont-size: 0.6vw;\ncolor: ",";\nposition: relative;\nbox-sizing: border-box;\nborder-right: 0.15vw solid ",";\n:hover {\n    background-color: ",";\n}\n// transition: 0.2s;\n"]);return $n=function(){return n},n}function ne(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nwidth: ","vw;\nheight: 4vw;\nborder-radius: 1vw;\nmargin: 0.5vw;\ncursor: pointer;\n&:hover { background-color: ","; };\n",";\ntransition: 0.2s\n"]);return ne=function(){return n},n}var ee=function(n,e){var t=parseInt(n.slice(1),16),o=e<0?0:255,r=e<0?-1*e:e,i=t>>16,a=t>>8&255,c=255&t;return"#"+(16777216+65536*(Math.round((o-i)*r)+i)+256*(Math.round((o-a)*r)+a)+(Math.round((o-c)*r)+c)).toString(16).slice(1)},te=[{title:"\u0421\u0442\u0438\u0440\u043a\u0430",image:t(129),color:w.colors.yellow,name:w.screens.laundry},{title:"\u041a\u043b\u0443\u0431 \u0438 \u041a\u0414\u0421",image:t(129),color:w.colors.accept,name:w.screens.club}],oe=function(n,e,t,o){var r=new rn.a.Query(n);r.equalTo(e,t),r.first().then(function(n){o(n)});var i=r.subscribe();return i.on("update",function(n){o(n)}),i.on("create",function(n){o(n)}),i.on("delete",function(n){r.first().then(function(n){o(n)})}),i},re=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).render=function(){return r.a.createElement(fe,null,r.a.createElement(de,null,r.a.createElement(se,null,r.a.createElement("span",{role:"img","aria-label":"dcam"},"\ud83c\udf3f")),r.a.createElement(z,{width:6,height:90},te.map(function(n,e){return r.a.createElement(ce,{key:e,selected:t.props.mainAppScreen===n.name,color:n.color,onClick:function(){t.props.setMainAppScreen(n.name)}},r.a.createElement("img",{src:n.image,alt:n.title,style:{width:"2.5vw"}}),n.title)}))),r.a.createElement(pe,null,r.a.createElement(le,null,r.a.createElement(ae,{width:4,selected:t.props.popUpWindow===w.popUps.TOP_BALANCE_WINDOW,onClick:function(){t.props.setPopUpWindow(w.popUps.TOP_BALANCE_WINDOW)}},r.a.createElement(z,{extraProps:" width: 3vw; height: 3vw; border-radius: 3vw; background-color: ".concat(t.props.money>0?w.colors.accept:w.colors.background.support,"; color: white; font-size: 0.8vw; transition: background-color 0.2s; ")},t.props.money," \u20bd")),r.a.createElement(ae,{width:16,selected:t.props.popUpWindow===w.popUps.TOP_PROFILE_MENU,onClick:function(){t.props.setPopUpWindow(w.popUps.TOP_PROFILE_MENU)}},r.a.createElement(z,{extraProps:" width: 3vw; height: 3vw; border-radius: 3vw; background-color: ".concat(w.colors.background.support,"; ")},r.a.createElement("img",{src:rn.a.User.current().get("avatar"),alt:"",style:{width:"3vw",borderRadius:"3vw"}})),r.a.createElement(z,{alignItems:"flex-start",extraProps:" width: 9vw; height: 1vw; margin: 0.5vw; color: ".concat(w.colors.text.primary,"; ")},rn.a.User.current().get("name").split(" ")[0]),"\ud83c\udf55")),r.a.createElement(ue,null,Hn.filter(function(n){return n.props.name===t.props.mainAppScreen})[0])))},t}return Object(p.a)(e,n),Object(l.a)(e,[{key:"componentDidMount",value:function(){var n=this;this.balance_sub=oe("Balance","userId",rn.a.User.current().id,function(e){n.props.setBalance(e.get("money"))}),this.nfc_sub=oe("NFC","userId",rn.a.User.current().id,function(e){n.props.setNfcOwner(!!e)})}},{key:"componentWillUnmount",value:function(){this.balance_sub.unsubscribe(),this.nfc_sub.unsubscribe()}}]),e}(r.a.Component),ie=Object(T.b)(function(n){return{mainAppScreen:n.ui.mainAppScreen,popUpWindow:n.ui.popUpWindow,money:n.constants.money}},function(n){return{setMainAppScreen:function(e){return n(I(e))},setPopUpWindow:function(e){return n(M(e))},setNfcOwner:function(e){return n(sn(e))},setBalance:function(e){return n(ln(e))}}})(re),ae=W.a.div(ne(),function(n){return n.width?n.width:4},w.colors.background.primary,function(n){return n.selected?"background-color: ".concat(w.colors.background.primary,";"):null}),ce=W.a.div($n(),function(n){return n.selected?ee(n.color,.5):null},w.colors.text.support,function(n){return n.selected?n.color:"transparent"},function(n){return n.selected?ee(n.color,.3):w.colors.background.secondary}),se=W.a.div(Zn(),w.colors.background.secondary),le=W.a.div(Xn()),ue=W.a.div(Jn()),de=W.a.div(qn(),w.colors.background.primary),pe=W.a.div(Qn(),w.colors.background.secondary),fe=W.a.div(Vn(),w.colors.background.primary),he=t(106),me=t.n(he),ve=t(183),we=function(){var n=Object(ve.a)(me.a.mark(function n(){var e,t;return me.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=Q.getCurrentUser().w3,(t=new rn.a.Query("User")).equalTo("email",e.U3),n.abrupt("return",t.first().then(function(n){if(n)return rn.a.User.logIn(e.U3,e.Eea).then(function(n){return rn.a.User.current()}).catch(function(n){console.log(n)});var t=new rn.a.User;return t.set("username",e.U3),t.set("password",e.Eea),t.set("email",e.U3),t.set("name",e.ig),t.set("avatar",e.Paa),t.signUp().then(function(n){return rn.a.User.current()}).catch(function(n){console.log(n),Q.signOut()})}).catch(function(n){console.log(n)}));case 4:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),be=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).hideElement=function(n,e){var o=function(n){return!!n&&!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)};e===n&&function(e){var r=function(r){null===r.target.closest("."+n)&&o(e)&&(t.props.popUpWindow===n&&t.props.setPopUpWindow(w.popUps.EMPTY),i())},i=function(){document.removeEventListener("click",r)};document.addEventListener("click",r)}(document.getElementsByClassName(n)[0])},t.render=function(){var n=t.props.popUpWindow!==w.popUps.EMPTY&&t.props.mobile;return r.a.createElement(z,null,r.a.createElement(z,{extraProps:"\n                        width: 100vw;\n                        height: 100vh;\n                        position: absolute;\n                        background-color: rgba(0, 0, 0, ".concat(n?.2:0,");\n                        backdrop-filter: blur(").concat(n?5:0,"px);\n                        visibility: ").concat(n?"visible":"hidden",";\n                        z-index: 2;\n                        top: 0;\n                        transition: 0.2s;\n                    "),onClick:function(){t.props.popUpWindow!==w.popUps.EMPTY&&t.props.setPopUpWindow(w.popUps.EMPTY)}}),t.props.children)},t}return Object(p.a)(e,n),Object(l.a)(e,[{key:"componentWillReceiveProps",value:function(n){this.hideElement(this.props.children.props.name,n.popUpWindow),n.popUpWindow!==w.popUps.EMPTY&&n.mobile?document.getElementsByTagName("body")[0].style.position="fixed":document.getElementsByTagName("body")[0].style.position="inherit"}}]),e}(r.a.Component),ge=Object(T.b)(function(n){return{popUpWindow:n.ui.popUpWindow,mobile:n.ui.mobile}},function(n){return{setPopUpWindow:function(e){return n(M(e))}}})(be),ye="http://dcam.pro:1337/parse/",Ee="dcam",xe="dcam",ke=(t(243),t(244),t(184)),Oe=t.n(ke),_e=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).render=function(){var n=t.props.popUpWindow===w.popUps.TOP_PROFILE_MENU,e="\n            // width: 10vw;\n            padding: 0 1vw 0 1vw;\n            height: 4vw;\n            border-radius: 1vw;\n            position: absolute;\n            top: ".concat(n?10:12,"vh;\n            right: 0.5vw;\n            z-index: 1;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            // box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        "),o=[{image:Oe.a,onClick:function(){Q.signOut(),t.props.setPopUpWindow(w.popUps.EMPTY)}}];return r.a.createElement(z,{className:w.popUps.TOP_PROFILE_MENU,flexDirection:"row",backgroundColor:w.colors.background.primary,extraProps:e},o.map(function(n,e){return r.a.createElement(z,{key:e,extraProps:"\n                                padding: 0.5vw;\n                                border-left: ".concat(+(e===o.length-1&&o.length>1),"px solid ").concat(w.colors.background.secondary,";\n                                cursor: pointer;\n                            "),onClick:function(){n.onClick()}},r.a.createElement("img",{src:n.image,alt:"",style:{width:"2vw"}}))}))},t}return Object(p.a)(e,n),e}(r.a.Component);_e.defaultProps={visible:!1};var Ue=Object(T.b)(function(n){return{popUpWindow:n.ui.popUpWindow}},function(n){return{setEntryScreen:function(e){return n(N(e))},setPopUpWindow:function(e){return n(M(e))}}})(_e),je=t(41),Pe=t.n(je),Se=t(185),Ce=t.n(Se),Ae=(t(305),function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={value:"",order_id:""},t.render=function(){var n=t.props.popUpWindow===w.popUps.TOP_BALANCE_WINDOW,e="\n            padding: 1vw;\n            border-radius: 1vw;\n            position: absolute;\n            top: ".concat(n?10:12,"vh;\n            right: 17.5vw;\n            z-index: ").concat(n?1:-1,";\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            // box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            background-color: ").concat(w.colors.background.primary,";\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        ");return r.a.createElement(z,{className:w.popUps.TOP_BALANCE_WINDOW,extraProps:e},r.a.createElement(z,{extraProps:"flex-direction: row; color: ".concat(w.colors.text.primary)},"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c ",r.a.createElement("span",{role:"img","aria-label":"martini"},"\ud83c\udf78")),r.a.createElement(pn,{placeholder:"\u0421\u0443\u043c\u043c\u0430",short:!0,onChange:function(n){t.setState({value:n})},value:t.state.value,validator:function(n){return Ce.a.isInt(n)}}),r.a.createElement("form",{method:"POST",action:"https://money.yandex.ru/quickpay/confirm.xml"},r.a.createElement("input",{type:"hidden",name:"receiver",value:"410018436058863"}),r.a.createElement("input",{type:"hidden",name:"label",value:t.state.order_id}),r.a.createElement("input",{type:"hidden",name:"quickpay-form",value:"donate"}),r.a.createElement("input",{type:"hidden",name:"targets",value:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438: ".concat(t.state.order_id)}),r.a.createElement("input",{type:"hidden",name:"sum",value:+t.state.value,"data-type":"number"}),r.a.createElement("input",{type:"hidden",name:"paymentType",value:"AC"}),r.a.createElement("input",{id:"yandex_money_button",type:"submit",value:"\u0414\u0430\u043b\u0435\u0435",style:{display:"none"}}),r.a.createElement(R,{visible:n,disabled:t.state.value<2,backgroundColor:w.colors.accept,onClick:function(){rn.a.Cloud.run("saveTransaction",{value:+t.state.value}).then(function(n){t.setState({order_id:n}),document.getElementById("yandex_money_button").click()})}},"\u0414\u0430\u043b\u0435\u0435")))},t}return Object(p.a)(e,n),e}(r.a.Component)),Ne=Object(T.b)(function(n){return{popUpWindow:n.ui.popUpWindow}},function(n){return{setPopUpWindow:function(e){return n(M(e))}}})(Ae);function Ie(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nheight: 3vw\ntransition: 0.2s\n"]);return Ie=function(){return n},n}var Me=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).weekDays=["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],t.clearSelections=function(){for(var n in t.props.selected_slots)t.props.selectSlot(t.props.selected_slots[n]);t.props.setPopUpWindow(w.popUps.EMPTY)},t.render=function(){var n=t.props.popUpWindow===w.popUps.SHOPPING_BASKET,e="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(w.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 30.75vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            display: block;\n            max-height: 70vh;\n            overflow-y: scroll;\n            transition: 0.2s;\n        ");return r.a.createElement(z,{className:w.popUps.SHOPPING_BASKET,extraProps:e},t.props.selected_slots.map(function(n,e){return r.a.createElement(We,{key:e},r.a.createElement(z,{width:5,alignItems:"flex-start; margin: 0.5vw;"},r.a.createElement(z,{extraProps:" color: ".concat(w.colors.text.support,"; font-size: 0.8vw; ")},t.weekDays[h()(n.timestamp).day()]),r.a.createElement(z,{extraProps:" font-size: 0.8vw; color: ".concat(w.colors.text.primary,"; ")},h()(n.timestamp).format("DD.MM.YY"))),r.a.createElement(z,null,r.a.createElement(z,{extraProps:" font-size: 1.5vw; color: ".concat(w.colors.text.primary,"; ")},h()(n.timestamp).format("HH:mm"))),r.a.createElement(z,{fontSize:1,extraProps:" margin: 0.5vw; width: 2vw; height: 2vw; border-radius: 2vw; background-color: ".concat(w.colors.purple,"; color: white; ")},t.props.machines.map(function(n){return n.machineId}).indexOf(n.machineId)+1),r.a.createElement(z,{width:2.5,extraProps:"color: ".concat(w.colors.text.primary,";")},t.props.laundry_cost," \u20bd"),r.a.createElement(z,{extraProps:" border-left: 1px solid ".concat(w.colors.background.support,"; margin-left: 0.5vw; width: 1.5vw; height: 2vw; cursor: pointer; ")},r.a.createElement("img",{src:Pe.a,alt:"",style:{width:"1.2vw",marginLeft:"0.5vw"},onClick:function(){t.props.selectSlot(n)}})))}),r.a.createElement(z,{flexDirection:"row"},r.a.createElement(R,{visible:n,onClick:function(){t.clearSelections()}},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),r.a.createElement(R,{visible:n,disabled:t.props.selected_slots.length*t.props.laundry_cost>t.props.money,backgroundColor:w.colors.accept,onClick:function(){if(t.props.is_nfc_owner){var n=t.props.selected_slots;t.props.selected_slots.length*t.props.laundry_cost<=t.props.money&&(!function e(){var t={timestamp:n[0].timestamp,machineId:n[0].machineId};rn.a.Cloud.run("setLaundry",t).then(function(t){n.shift(),n.length&&e()})}(),t.clearSelections())}else t.props.setPopUpWindow(w.popUps.GET_NFC)}},"\u041a\u0443\u043f\u0438\u0442\u044c")))},t}return Object(p.a)(e,n),e}(r.a.Component),Te=Object(T.b)(function(n){return{popUpWindow:n.ui.popUpWindow,selected_slots:n.laundry.selected_slots,is_nfc_owner:n.constants.is_nfc_owner,machines:n.machines.machines,money:n.constants.money,laundry_cost:n.constants.laundry_cost}},function(n){return{setPopUpWindow:function(e){return n(M(e))},selectSlot:function(e){return n(vn(e))}}})(Me),We=W.a.div(Ie()),De=t(186),ze=t.n(De),Be=t(107),Le=t.n(Be),Re=t(187),Fe=t.n(Re),Ye=t(108),Ge=t.n(Ye),Ke=t(109),He=t.n(Ke);function Ve(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\ntransition: 0.2s\n"]);return Ve=function(){return n},n}function Qe(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nmargin: 0.2vw;\nbackground-color: ",";\nborder-radius: 0.5vw;\ncolor: white\nwidth: 4vw;\nheight: 4vw;\ntransition: 0.2s\ncursor: pointer;\n"]);return Qe=function(){return n},n}var qe=function(n){var e=function(e){var t=new rn.a.Query("Machines");t.equalTo("objectId",n[e].machineId),t.first().then(function(t){n[e].should_be_deleted?t.destroy().catch(function(n){console.log(n)}):(t.set("isBroken",n[e].isBroken),t.set("isDisabled",n[e].isDisabled),t.save().catch(function(n){console.log(n)}))}).catch(function(n){console.log(n)})};for(var t in n)e(t)},Je=[{backgroundColor:w.colors.yellow,image:Ge.a,supportImage:Ge.a,name:"isBroken"},{backgroundColor:w.colors.WARM_ORANGE,image:He.a,supportImage:He.a,name:"isDisabled"},{backgroundColor:w.colors.text.support,image:ze.a,supportImage:Le.a,name:"should_be_deleted"}],Xe=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={machines:t.props.machines,openedMachine:null},t.weekDays=["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],t.render=function(){var n=t.props.popUpWindow===w.popUps.LAUNDRY_SETTINGS,e="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(w.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 57vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        ");return r.a.createElement(z,{className:w.popUps.LAUNDRY_SETTINGS,extraProps:e},r.a.createElement(z,{extraProps:"flex-direction: row"},t.state.machines.map(function(n,e){var o=null;return n.isBroken&&(o=Je[0]),n.isDisabled&&(o=Je[1]),n.should_be_deleted&&(o=Je[2]),r.a.createElement(z,{key:e,extraProps:"position: relative;"},r.a.createElement(z,{extraProps:"width: 4vw; height: 4vw; background-color: ".concat(o?o.backgroundColor:w.colors.background.support,"; border-radius: 0.5vw; margin: 0.1vw; color: white; cursor: pointer;"),onClick:function(){t.setState({openedMachine:t.state.openedMachine===e?null:e})}},o?r.a.createElement("img",{src:o.image,alt:"",style:{width:"1.5vw"}}):e+1),r.a.createElement(z,{extraProps:"visibility: ".concat(t.state.openedMachine===e?"visible":"hidden","; opacity: ").concat(+(t.state.openedMachine===e),"; position: absolute; box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05); padding: 0.5vw; border-radius: 0.5vw; top: ").concat(+(t.state.openedMachine===e)+3.5,"vw; background-color: ").concat(w.colors.background.primary,";  transition: 0.2s;")},Je.map(function(o,i){return r.a.createElement(z,{key:i,extraProps:"cursor: pointer; visibility: ".concat(t.state.openedMachine===e?"visible":"hidden","; opacity: ").concat(+(t.state.openedMachine===e),"; width: 4vw; height: 4vw; background-color: ").concat(n[o.name]?o.backgroundColor:w.colors.background.support,"; border-radius: 0.5vw; margin: 0.1vw; color: white; transition: 0.2s;"),onClick:function(){var r=t.state.machines;r[e][o.name]=!n[o.name],r[e].isDisabled&&(r[e].isBroken=!1),t.setState({machines:r})}},r.a.createElement("img",{src:n[o.name]?o.supportImage:o.image,alt:"",style:{width:"1.5vw"}}))})))}),r.a.createElement(z,{extraProps:"width: 4vw; height: 4vw; border-radius: 0.5vw; margin: 0.1vw; color: ".concat(w.colors.background.support,"; font-size: 2vw; border: 0.15vw dashed ").concat(w.colors.background.support,"; cursor: pointer; "),onClick:function(){var n=new(rn.a.Object.extend("Machines"));n.set("isBroken",!1),n.set("isDisabled",!1),n.set("comment",""),n.save().catch(function(n){console.log(n)})}},"+"),r.a.createElement(z,{extraProps:"width: 4vw; height: 4vw; border-radius: 0.5vw; margin: 0.1vw; font-size: 2vw; background-color: ".concat(w.colors.accept,"; cursor: pointer; "),onClick:function(){t.setState({openedMachine:null}),qe(t.state.machines)}},r.a.createElement("img",{src:Fe.a,alt:"",style:{width:"2vw"}})),r.a.createElement(z,{extraProps:"width: 4vw; height: 4vw; border-radius: 0.5vw; margin: 0.1vw; font-size: 2vw; background-color: ".concat(w.colors.background.support,"; cursor: pointer; "),onClick:function(){new rn.a.Query("Machines").find().then(function(n){t.props.loadMachines(n)}).catch(function(n){console.log(n)})}},r.a.createElement("img",{src:Le.a,alt:"",style:{width:"1.5vw"}}))))},t}return Object(p.a)(e,n),Object(l.a)(e,[{key:"componentWillReceiveProps",value:function(n){this.props.machines!==n.machines&&this.setState({machines:n.machines}),this.props.popUpWindow!==n.popUpWindow&&this.setState({openedMachine:null})}}]),e}(r.a.Component),Ze=Object(T.b)(function(n){return{popUpWindow:n.ui.popUpWindow,machines:n.machines.machines}},function(n){return{setPopUpWindow:function(e){return n(M(e))},loadMachines:function(e){return n(bn(e))}}})(Xe);W.a.div(Qe(),w.colors.background.support),W.a.div(Ve());function $e(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nheight: 3vw\ntransition: 0.2s\n"]);return $e=function(){return n},n}var nt=["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],et=function(n){var e=new rn.a.Query("Laundry");e.equalTo("objectId",n.laundryId),e.first().then(function(n){n.destroy().catch(function(n){console.log(n)})}).catch(function(n){console.log(n)})},tt=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).render=function(){var n=t.props.popUpWindow===w.popUps.RESEVATIONS,e="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(w.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 39.5vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            display: block;\n            max-height: 70vh;\n            overflow-y: scroll;\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        ");return r.a.createElement(z,{className:w.popUps.RESEVATIONS,extraProps:e},t.props.laundry.map(function(n,e){return r.a.createElement(rt,{key:e},r.a.createElement(z,null,r.a.createElement(z,{extraProps:"width: 5vw; align-items: flex-start; font-size: 0.8vw; color: ".concat(w.colors.text.support)},nt[h()(n.timestamp).tz("Europe/Moscow").day()]),r.a.createElement(z,{extraProps:"width: 5vw; align-items: flex-start; font-size: 0.8vw; color: ".concat(w.colors.text.primary)},h()(n.timestamp).tz("Europe/Moscow").format("DD.MM.YY"))),r.a.createElement(z,{extraProps:"font-size: 1.5vw; color: ".concat(w.colors.text.primary," ")},h()(n.timestamp).tz("Europe/Moscow").format("HH:mm")),r.a.createElement(z,{extraProps:"width: 2vw; height: 2vw; border-radius: 2vw; background: ".concat(w.colors.accept,"; margin-left: 1vw; color: white;")},t.props.machines.map(function(n){return n.machineId}).indexOf(n.machineId)+1),r.a.createElement(z,{extraProps:" border-left: 1px solid ".concat(w.colors.background.support,"; margin-left: 0.5vw; width: 1.5vw; height: 2vw; cursor: pointer; ")},r.a.createElement("img",{src:Pe.a,alt:"",style:{width:"1.2vw",marginLeft:"0.5vw"},onClick:function(){et(n)}})))}))},t}return Object(p.a)(e,n),e}(r.a.Component),ot=Object(T.b)(function(n){return{popUpWindow:n.ui.popUpWindow,laundry:n.laundry.laundry.filter(function(e){return e.userId===rn.a.User.current().id&&+h()(e.timestamp)>+h()(n.constants.server_time).startOf("hour")}).sort(function(n,e){return n.timestamp-e.timestamp}),machines:n.machines.machines}},function(n){return{setPopUpWindow:function(e){return n(M(e))},selectSlot:function(e){return n(vn(e))}}})(tt),rt=W.a.div($e());function it(){var n=Object(c.a)(["\npadding: 1vw;\nborder-radius: 1vw;\nposition: absolute;\ndisplay: flex;\nalign-items: center;\njustify-content: center;\nflex-direction: column;\ntop: ","vh;\nright: 2vw;\nz-index: ",";\nopacity: ",";\nvisibility: ",";\n// box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\ntransition: 0.2s;\n"]);return it=function(){return n},n}function at(){var n=Object(c.a)(["\ndisplay: flex\nposition: absolute;\nz-index: ",";\ntop: 0vw;\nright: 0vw;\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 94vw\nheight: 100vh\nbackground: rgba(0,0,0,.",");\nbackdrop-filter: blur(","px);\nvisibility: ",";\ntransition: 0.2s\n"]);return at=function(){return n},n}function ct(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 17.5vw;\nmargin-bottom: 0.5vw;\ncolor: ",";\npadding: 1vw;\nbackground-color: ",";\nborder-radius: 0.5vw;\ntext-align: left;\ntransition: 0.2s\n"]);return ct=function(){return n},n}var st=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={value:""},t.render=function(){var n=t.props.popUpWindow===w.popUps.GET_NFC;return r.a.createElement(ut,{className:w.popUps.GET_NFC,visible:n},r.a.createElement(dt,{visible:n},r.a.createElement(lt,null,"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0431\u0440\u043e\u043d\u044c \u0441\u0442\u0430\u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430, \u043f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e \u043a\u0430\u043a \u0412\u044b \u043f\u0440\u0438\u0432\u044f\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u043a \u043a \u043f\u0440\u043e\u0444\u0438\u043b\u044e."),r.a.createElement(z,{extraProps:"padding: 1vw; background-color: ".concat(w.colors.background.primary,"; border-radius: 0.5vw;")},r.a.createElement(pn,{short:!1,placeholder:"NFC UID (8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)",value:t.state.value,onChange:function(n){t.setState({value:n})}}),r.a.createElement(R,{visible:n,short:!1,backgroundColor:w.colors.accept,onClick:function(){rn.a.Cloud.run("createNfcRecord",{value:t.state.value.toUpperCase()})},disabled:8!==(""+t.state.value).length},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement(R,{visible:n,short:!1,backgroundColor:w.colors.reject,onClick:function(){t.props.setPopUpWindow(w.popUps.EMPTY)}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))))},t}return Object(p.a)(e,n),e}(r.a.Component),lt=W.a.div(ct(),w.colors.text.primary,w.colors.background.primary),ut=W.a.div(at(),function(n){return n.visible?1:-1},function(n){return n.visible?2:0},function(n){return n.visible?2:0},function(n){return n.visible?"visible":"hidden"}),dt=W.a.div(it(),function(n){return n.visible?10:12},function(n){return n.visible?1:-1},function(n){return n.visible?1:0},function(n){return n.visible?"visible":"hidden"}),pt=Object(T.b)(function(n){return{popUpWindow:n.ui.popUpWindow}},function(n){return{setPopUpWindow:function(e){return n(M(e))}}})(st),ft=t(43),ht=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={vk:rn.a.User.current().get("vk")},t.render=function(){var n=t.props.popUpWindow===w.popUps.LAUNDRY_OPTIONS,e="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(w.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 48vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.2);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            transition: 0.2s;\n        ");return r.a.createElement(z,{className:w.popUps.LAUNDRY_OPTIONS,extraProps:e},t.state.vk?mt(Object(ft.a)(Object(ft.a)(t)),n):vt(Object(ft.a)(Object(ft.a)(t)),n))},t}return Object(p.a)(e,n),Object(l.a)(e,[{key:"componentDidMount",value:function(){var n=this;rn.a.User.current().get("vk")&&tn.getUser(rn.a.User.current().get("vk").split("/").pop(),function(e){n.setState({vk:e[0]})})}}]),e}(r.a.Component),mt=function(n,e){return r.a.createElement(z,{extraProps:"flex-direction: row"},r.a.createElement("img",{src:n.state.vk.photo_200,style:{width:"3vw",borderRadius:"3vw"},alt:""}),r.a.createElement(z,{extraProps:"margin: 0 1vw 0 1vw; color: ".concat(w.colors.text.primary)},n.state.vk.first_name," ",n.state.vk.last_name),r.a.createElement(R,{visible:e,backgroundColor:w.colors.vk,onClick:function(){new rn.a.Query("User").equalTo("objectId",rn.a.User.current().id).first().then(function(e){e.set("vk",null),e.save().then(function(e){n.setState({vk:void 0})}).catch(function(n){console.log(n)})}).catch(function(n){console.log(n)})}},"\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u0412\u041a"))},vt=function(n,e){return r.a.createElement(z,null,r.a.createElement(z,{extraProps:"color: ".concat(w.colors.text.primary,"; width: 13vw; font-size: 0.8vw; text-align: left; margin: 1vw;")},"\u041f\u0440\u0438\u0432\u0436\u0438\u0442\u0435 \u0412\u0430\u0448 \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435, \u0438 \u0412\u0430\u043c \u0441\u0442\u0430\u043d\u0443\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439. \u0412\u044b \u0432 \u043b\u044e\u0431\u043e\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u043f\u0440\u0438\u0432\u044f\u0437\u043a\u0443."),r.a.createElement(R,{visible:e,backgroundColor:w.colors.vk,onClick:function(){tn.login(function(e){new rn.a.Query("User").equalTo("objectId",rn.a.User.current().id).first().then(function(t){t.set("vk",e.session.user.href),t.save().then(function(e){tn.getUser(e.get("vk").split("/").pop(),function(e){n.setState({vk:e[0]})})}).catch(function(n){console.log(n)})}).catch(function(n){console.log(n)})})}},"\u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"))},wt=Object(T.b)(function(n){return{popUpWindow:n.ui.popUpWindow}},function(n){return{setPopUpWindow:function(e){return n(M(e))}}})(ht);function bt(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\ntransition: 0.2s\n"]);return bt=function(){return n},n}function gt(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nmargin: 0.2vw;\nbackground-color: ",";\nborder-radius: 0.5vw;\ncolor: white\nwidth: 4vw;\nheight: 4vw;\ntransition: 0.2s\ncursor: pointer;\n"]);return gt=function(){return n},n}var yt=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={value:""},t.render=function(){var n=t.props.popUpWindow===w.popUps.CLUB_BOOK,e="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(w.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 2vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        ");return r.a.createElement(z,{className:w.popUps.CLUB_BOOK,extraProps:e},r.a.createElement(R,null,"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))},t}return Object(p.a)(e,n),e}(r.a.Component),Et=Object(T.b)(function(n){return{popUpWindow:n.ui.popUpWindow,machines:n.machines.machines}},function(n){return{setPopUpWindow:function(e){return n(M(e))}}})(yt),xt=(W.a.div(gt(),w.colors.background.support),W.a.div(bt()),[r.a.createElement(Ue,{name:w.popUps.TOP_PROFILE_MENU}),r.a.createElement(Ne,{name:w.popUps.TOP_BALANCE_WINDOW}),r.a.createElement(Te,{name:w.popUps.SHOPPING_BASKET}),r.a.createElement(Ze,{name:w.popUps.LAUNDRY_SETTINGS}),r.a.createElement(ot,{name:w.popUps.RESEVATIONS}),r.a.createElement(pt,{name:w.popUps.GET_NFC}),r.a.createElement(wt,{name:w.popUps.LAUNDRY_OPTIONS}),r.a.createElement(Et,{name:w.popUps.CLUB_BOOK})]);function kt(){var n=Object(c.a)(["\n    display: flex\n    position: absolute\n    bottom: 0\n    justify-content: center\n    align-items: flex-start\n    flex-direction: row\n    width: 100vw\n    padding: 1vw;\n    background-color: ","\n    @media (min-width: 320px) and (max-width: 480px) {\n        flex-direction: column\n        align-items: center\n    }\n    transition: 0.2s\n    "]);return kt=function(){return n},n}function Ot(){var n=Object(c.a)(["\n    display: flex\n    justify-content: center\n    align-items: center\n    flex-direction: column\n    width: 100vw\n    height: 100vh\n    transition: 0.2s\n    "]);return Ot=function(){return n},n}function _t(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 100vw\nheight: 100vh\nbackground-color: ","\ntransition: 0.2s\n"]);return _t=function(){return n},n}rn.a.initialize(Ee,xe),rn.a.serverURL=ye;var Ut=xt.map(function(n,e){return r.a.createElement(ge,{key:e},n)}),jt=function(n,e,t,o){var r=new rn.a.Query(n);r.equalTo(e,t),r.first().then(function(n){o(n)});var i=r.subscribe();i.on("update",function(n){o(n)}),i.on("create",function(n){o(n)}),i.on("delete",function(n){r.first().then(function(n){o(n)})})},Pt=function(n){function e(){var n,t;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=Object(u.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(i)))).state={auth:rn.a.User.current(),server_time:0,init:!1},t.render=function(){return t.state.init?r.a.createElement(Ct,null,t.state.auth?r.a.createElement(ie,null):r.a.createElement(Z,null),t.state.auth?Ut:null):r.a.createElement(At,null)},t}return Object(p.a)(e,n),Object(l.a)(e,[{key:"componentDidMount",value:function(){var n=this,e=function(){n.setState({auth:rn.a.User.current()})};!function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};Q.initGoogle().then(function(){Q.initClient().then(function(){if(n(),Q.isAuthorized())if(rn.a.User.current()){var o=new rn.a.Query("User");o.equalTo("objectId",rn.a.User.current().id),o.first().then(function(n){}).catch(function(n){console.log("user is deleted"),rn.a.User.logOut(),Q.signOut()})}else we().then(function(n){e(n)});else Q.isAuthorized(),rn.a.User.logOut();Q.subscribeSignIn(function(n){n?rn.a.User.current()?(rn.a.User.logOut(),we().then(function(n){e()})):we().then(function(n){e()}):rn.a.User.logOut().then(function(n){t()}).catch(function(n){console.log(n)})})}).catch(function(n){console.log(n)})}).catch(function(n){console.log(n)})}(function(){n.setState({init:!0})},e,e),jt("Constants","name","timestamp",function(e){n.props.setServerTime(+mn()(+e.get("value")).tz("Europe/Moscow"))}),jt("Constants","name","laundry_cost",function(e){n.props.setLaundryCost(e.get("value"))}),tn.initVK()}}]),e}(r.a.Component),St=Object(T.b)(function(n){return{server_time:n.constants.server_time}},function(n){return{setServerTime:function(e){return n(an(e))},setLaundryCost:function(e){return n(cn(e))}}})(Pt),Ct=W.a.div(_t(),w.colors.background.primary),At=function(){var n=W.a.div(Ot()),e=W.a.div(kt(),w.colors.purple);return r.a.createElement(n,null,r.a.createElement(R,{short:!1,backgroundColor:"transparent"},r.a.createElement(z,{extraProps:" color: black; flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw } "},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430... ",r.a.createElement("span",{role:"img","aria-label":"hand"},"\ud83d\ude48"))),r.a.createElement(e,null,r.a.createElement(z,{extraProps:" width: 80%; height: 3vw; color: white; font-size: 0.8vw; text-align: left; @media (min-width: 320px) and (max-width: 480px) { height: 15vh; font-size: 3vw }"},"\u041c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c cookie \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 \u0441\u0435\u0440\u0432\u0438\u0441\u044b Google \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b. \u0415\u0441\u043b\u0438 \u044d\u0442\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0432\u0438\u0441\u0438\u0442 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0434\u043e\u043b\u0433\u043e - \u0412\u044b \u0437\u0430\u043f\u0440\u0435\u0442\u0438\u043b\u0438 cookie \u0432 \u0412\u0430\u0448\u0435\u043c \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435 \u0438\u043b\u0438 \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b. \u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 cookie \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430, \u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."),r.a.createElement(R,{short:!1,onClick:function(){alert(document.cookie)}},r.a.createElement(z,{extraProps:"flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; } "},"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c cookie ",r.a.createElement("span",{role:"img","aria-label":"hand"},"\ud83c\udf6a")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Nt=t(42),It=t(188),Mt={loading:!1,mainAppScreen:w.screens.club,popUpWindow:w.popUps.EMPTY},Tt={loading:!1,server_time:+mn()(),laundry_cost:0,is_nfc_owner:!1,money:0,mobile:!1},Wt={loading:!1,error:void 0,machines:[],subscription:!1},Dt=t(189),zt={loading:!1,selected_slots:[],laundry:[]},Bt=Object(Nt.c)({ui:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g:return Object(Tn.a)({},n,{mainAppScreen:e.data});case y:return Object(Tn.a)({},n,{popUpWindow:e.data});case C:return Object(Tn.a)({},n,{popUpWindow:e.data?"EMPTY":n.popUpWindow});default:return n}},constants:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case P:return Object(Tn.a)({},n,{server_time:e.data});case E:return Object(Tn.a)({},n,{laundry_cost:e.data});case C:return Object(Tn.a)({},n,{is_nfc_owner:e.data});case A:return Object(Tn.a)({},n,{money:e.data});default:return n}},machines:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case U:return Object(Tn.a)({},n,{subscription:!0});case j:return Object(Tn.a)({},n,{subscription:!1});case k:return function(n,e){return Object(Tn.a)({},n,{loading:!0,error:void 0})}(n);case _:return function(n,e){return Object(Tn.a)({},n,{loading:!1,error:e.error})}(n,e);case O:return Object(Tn.a)({},n,{machines:e.data});default:return n}},laundry:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case S:var t=n.selected_slots.filter(function(n){return JSON.stringify(n)===JSON.stringify(e.data)}).length;return Object(Tn.a)({},n,{selected_slots:t?n.selected_slots.filter(function(n){return JSON.stringify(n)!==JSON.stringify(e.data)}):Object(Dt.a)(n.selected_slots).concat([e.data])});case x:return Object(Tn.a)({},n,{laundry:e.data,selected_slots:n.selected_slots.map(function(n){return JSON.stringify(n)}).filter(function(n){return e.data.map(function(n){return JSON.stringify({timestamp:n.timestamp,machineId:n.machineId})}).indexOf(n)<0}).map(function(n){return JSON.parse(n)})});default:return n}}}),Lt=Object(Nt.d)(Bt,Object(Nt.a)(It.a));a.a.render(r.a.createElement(T.a,{store:Lt},r.a.createElement(St,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})}},[[190,2,1]]]);
//# sourceMappingURL=main.154ae537.chunk.js.map