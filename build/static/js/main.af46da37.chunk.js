(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(n,t,e){n.exports=e.p+"static/media/undo.feaa06e5.svg"},109:function(n,t,e){n.exports=e.p+"static/media/egg.70b07e14.svg"},110:function(n,t,e){n.exports=e.p+"static/media/no-stopping.22d397a4.svg"},111:function(n,t,e){n.exports=e.p+"static/media/arrow.29b551dc.svg"},131:function(n,t,e){n.exports=e.p+"static/media/laundry_selected.634e9cac.svg"},186:function(n,t,e){n.exports=e.p+"static/media/logout.d1ad6d96.png"},187:function(n,t,e){n.exports=e.p+"static/media/cros_white.eb3c67d1.svg"},188:function(n,t,e){n.exports=e.p+"static/media/upload.e7bc3c08.svg"},191:function(n,t,e){n.exports=e(412)},196:function(n,t,e){},244:function(n,t,e){n.exports=e.p+"static/media/user_selected.15168650.png"},245:function(n,t,e){n.exports=e.p+"static/media/settings_selected.9cfd49f2.svg"},314:function(n,t){},316:function(n,t){},357:function(n,t){},358:function(n,t){},41:function(n,t,e){n.exports=e.p+"static/media/cros.b1585ec7.svg"},412:function(n,t,e){"use strict";e.r(t);var r=e(0),o=e.n(r),i=e(79),a=e.n(i),c=(e(196),e(5)),s=e(11),l=e(26),u=e(13),d=e(12),p=e(14),f=e(1),m=e.n(f),h=(e(113),m()().startOf("day").add(8,"hour"),m()().startOf("day").add(17,"hour"),{test:"test",colors:{yellow:"#FFCC00",accept:"#2DC76D",purple:"#7540EE",lightblue:"#3FB6DC",vk:"#3A60A1",WARM_ORANGE:"#FF7052",background:{primary:"#fff",secondary:"#EEEEEE",support:"#d5d5d5"},text:{primary:"#000",secondary:"#fff",support:"#939393"}},weekDays:{short:["\u0412\u0421","\u041f\u041d","\u0412\u0422","\u0421\u0420","\u0427\u0422","\u041f\u0422","\u0421\u0411"],full:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"]},month:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],colors_:{SPACE_NAVY:"#25265E",STEEL_GREY:"#868697",SATE_PURPLE:"#7540EE",HAN_BLUE:"#2F61D5",PICTION_BLUE:"#3FB6DC",GRASS_GREEN:"#2DC76D",WARM_ORANGE:"#FF7052",GOLDEN_BAY:"#FFC800"},screens:{home:"HOME",laundry:"LAUNDRY",users:"USERS",club:"club",settings:"SETTINGS",settings_user:"SETTINGS_USER",settings_notifications:"SETTINGS_NOTIFICATIONS",settings_payment:"SETTINGS_PAYMENT"},roles:{USER:"USER",ADMIN:"ADMIN",LAUNDRY_WATCHER:"LAUNDRY_WATCHER"},popUps:{BOOKING_WINDOW:"BOOKING_WINDOW",TOP_PROFILE_MENU:"TOP_PROFILE_MENU",TOP_BALANCE_WINDOW:"TOP_BALANCE_WINDOW",RESEVATIONS:"RESEVATIONS",MOBILE_MENU:"MOBILE_MENU",LAUNDRY_SETTINGS:"LAUNDRY_SETTINGS",EMPTY:"EMPTY",SHOPPING_BASKET:"SHOPPING_BASKET",GET_NFC:"GET_NFC",LAUNDRY_OPTIONS:"LAUNDRY_OPTIONS",CLUB_BOOK:"CLUB_BOOK"},status:{booked:"booked",myBook:"myBook",selected:"selected",free:"free"},errors:{emptyAccount:"users account is exist, but empty"}}),v="SET_ENTRY_SCREEN",w="SET_MAIN_APP_SCREEN",b="SET_POP_UP_WINDOW",g="SET_LAUNDRY_COST",y="LOAD_LAUNDRY_SUCCESS",x="LOAD_MACHINES_START",E="LOAD_MACHINES_SUCCESS",k="LOAD_MACHINES_FAIL",O="MACHINES_SUBSCRIPTION_ENABLED",_="MACHINES_SUBSCRIPTION_DISABLED",U="SET_SERVER_TIME",j="SELECT_SLOT",P="SET_NFC_OWNER",S="SET_MONEY",C="OPEN_BOOK_POP_UP",A="SET_CLUB_BOOKS",N=function(n){return{type:v,data:n}},M=function(n){return{type:w,data:n}},I=function(n){return{type:b,data:n}},W=e(10),T=e(4);function D(){var n=Object(c.a)(["\n\n    ","\n    ","\n    ","\n    ","\n    \n    box-sizing: border-box;\n    \n    user-select: none;\n    display: flex;\n    justify-content: ",";\n    align-items: ",";\n    text-align: ",";\n    flex-direction: ",";\n    font-size: 0.8vw;\n\n    -webkit-overflow-scrolling: touch;\n    ::-webkit-scrollbar {\n        width: 0;\n    }\n    \n    ","\n"]);return D=function(){return n},n}var z=T.a.div(D(),function(n){return void 0===n.width?null:"width: ".concat(n.width).concat(void 0===n.widthUnit?"vw":n.widthUnit)},function(n){return void 0===n.height?null:"height: ".concat(n.height).concat(void 0===n.heightUnit?"vh":n.heightUnit)},function(n){return void 0===n.backgroundColor?null:"background-color: ".concat(n.backgroundColor)},function(n){return void 0===n.bold?null:"font-family: Lato-Bold"},function(n){return void 0===n.justifyContent?"center":n.justifyContent},function(n){return void 0===n.alignItems?"center":n.alignItems},function(n){return void 0===n.textAlign?"center":n.textAlign},function(n){return void 0===n.flexDirection?"column":n.flexDirection},function(n){return void 0===n.extraProps?null:n.extraProps}),B=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).render=function(){var n="\n            width: ".concat(100*(e.props.short?.0825:.17),"vw;\n            height: ").concat(100*(e.props.visible?.03:0),"vw;\n            padding: ").concat(100*(e.props.visible?.01:0),"vw;\n            border-radius: ").concat(.5,"vw;\n            background-color: ").concat(e.props.disabled?h.colors.background.support:e.props.backgroundColor,";\n            margin: ").concat(100*(e.props.visible?.0025:0),"vw;\n            color: white;\n            font-size: ").concat(.8,"vw;\n            cursor: ").concat(e.props.disabled?null:"pointer",";\n            visibility: ").concat(e.props.visible?"visible":"hidden",";\n            opacity: ").concat(e.props.visible?1:0,";\n            transition: 0.2s;\n            transition-delay: ").concat(e.props.visible?-1:.2,"s;\n            @media (min-width: 320px) and (max-width: 480px) {\n                width: ").concat(100*(e.props.short?.33:.68),"vw;\n                height: ").concat(100*(e.props.visible?.12:0),"vw;\n                padding: ").concat(100*(e.props.visible?.04:0),"vw;\n                border-radius: ").concat(2,"vw;\n                margin: ").concat(100*(e.props.visible?.01:0),"vw;\n                font-size: ").concat(3.2,"vw;\n            }\n        ");return o.a.createElement(z,{extraProps:n,onClick:function(){e.props.disabled||e.props.onClick()}},e.props.children||e.props.title)},e}return Object(p.a)(t,n),t}(o.a.Component);B.defaultProps={mobile:!1,title:"title",visible:!0,short:!0,disabled:!1,backgroundColor:h.colors.yellow,onClick:function(){}};var L,R=Object(W.b)(function(n){return{mobile:n.ui.mobile}})(B),Y=window.gapi,G="https://www.googleapis.com/auth/userinfo.email",F={apiKey:"AIzaSyCSGE3JZpVhBKSAHYJXkuzopFOJhx67F4w",clientId:"914233098415-eqgtkp13ai5lb3ba0m8i8an5h1lir93k.apps.googleusercontent.com",scope:G,hosted_domain:"phystech.edu"},H=function(n){L.currentUser.get().hasGrantedScopes(G)},K=function(){return L.currentUser.get()},V=function(){if(void 0!==L){var n=L.currentUser.get().hasGrantedScopes(G);return n}return!1},q={initGoogle:function(n){return new Promise(function(n,t){Y.load("client:auth2",n,t)})},initClient:function(){return Y.client.init(F).then(function(n){L=Y.auth2.getAuthInstance(),H()})},signIn:function(){L.signIn()},signOut:function(){L.signOut()},getCurrentUser:K,isAuthorized:V,GoogleAuth:L,subscribeSignIn:function(n){L.isSignedIn.listen(function(){n(V())})}};function Q(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 30vw\nheight: 100vh\nbackground-color: ","\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100vw\n}\n"]);return Q=function(){return n},n}function J(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 70vw\nheight: 100vh\nbackground-color: ","\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    display: none;\n}\n"]);return J=function(){return n},n}function X(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nwidth: 100vw\nheight: 100vh\nbackground-color: ","\ntransition: 0.2s\n"]);return X=function(){return n},n}var Z=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).render=function(){return o.a.createElement($,null,o.a.createElement(nn,null),o.a.createElement(tn,null,o.a.createElement(R,{short:!0,backgroundColor:h.colors.yellow,onClick:function(){q.signIn()}},o.a.createElement(z,{extraProps:"flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; }"},"sign in ",o.a.createElement("span",{role:"img","aria-label":"hand"},"\ud83d\udc4b")))))},e}return Object(p.a)(t,n),t}(o.a.Component),$=T.a.div(X(),h.colors.background.primary),nn=T.a.div(J(),h.colors.yellow),tn=T.a.div(Q(),h.colors.purple),en={VK:void 0,initVK:function(){window.VK.init({apiId:6652742})},login:function(n){n||(n=function(){}),window.VK.Auth.login(function(t){return n(t)})},logout:function(n){n||(n=function(){}),window.VK.Auth.logout(function(t){return n(t)})},getLoginStatus:function(n){n||(n=function(){}),window.VK.Auth.getLoginStatus(function(t){return n(t)})},getAvatar:function(n,t){t||(t=function(){}),window.VK.Api.call("users.get",{user_ids:n,v:"5.73",fields:"photo_200"},function(n){n.response&&t(n.response[0].photo_200)})},getUserIsDeactivated:function(n,t){t||(t=function(){}),window.VK.Api.call("users.get",{user_ids:n,v:"5.89"},function(n){n.response&&t(n.response)})},observeSubscribe:function(n,t){t||(t=function(){}),window.VK.Observer.subscribe(n,function(n){return t(n)})},getUser:function(n,t){t||(t=function(){}),window.VK.Api.call("users.get",{user_ids:n,v:"5.89",fields:"photo_200"},function(n){n.response&&t(n.response)})}},rn=e(3),on=e.n(rn),an=e(7),cn=e.n(an),sn=function(n){return{type:C,data:n}},ln=function(n){return{type:A,data:n}},un=function(n){return{type:U,data:n}},dn=function(n){return{type:g,data:n}},pn=function(n){return{type:P,data:n}},fn=function(n){return{type:S,data:n}};function mn(){var n=Object(c.a)(["\n    width: ","",";\n    height: ","",";\n    ","\n    outline: none;\n    border: none;\n    text-align: center;\n    font-size: ","vw;\n    ","\n    text-align: ",";\n    &::-webkit-input-placeholder {\n        ","\n    }\n    \n    ","\n"]);return mn=function(){return n},n}var hn=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).render=function(){var n=e.props.mobile?400:100,t="\n            width: ".concat(n*(e.props.width?.01*e.props.width:e.props.short?.0625:.15),"vw;\n            height: ").concat(n*(e.props.visible?.01:0),"vw;\n            padding: ").concat(n*(e.props.visible?.01:0),"vw;\n            border-radius: ").concat(.005*n,"vw;\n            background-color: ").concat(e.props.backgroundColor?e.props.backgroundColor:h.colors.background.secondary,";\n            margin: ").concat(n*(e.props.visible?.0025:0),"vw;\n            color: ").concat(e.props.color?e.props.color:h.colors.text.primary,";\n            font-size: ").concat(.01*n,"vw;\n            visibility: ").concat(e.props.visible?"visible":"hidden",";\n            opacity: ").concat(e.props.visible?1:0,";\n            transition: visibility 0.2s, opaicty 0.2s, height 0.2s; \n            ::placeholder {\n                color: ").concat(h.colors.text.support,";\n            }\n        ");return o.a.createElement(wn,{extraProps:t,placeholder:e.props.placeholder,type:e.props.password?"password":"input",value:e.props.value,textAlign:e.props.textAlign,onChange:function(n){!e.props.validator(n.target.value)&&n.target.value.length||e.props.onChange(n.target.value)},onKeyPress:function(n){13!==n.which&&13!==n.keyCode||e.props.onEnterPress()}})},e}return Object(p.a)(t,n),t}(o.a.Component);hn.defaultProps={mobile:!1,placeholder:"placeholder",visible:!0,short:!1,suffix:"",onEnterPress:function(){},onChange:function(){},validator:function(){return!0}};var vn=Object(W.b)(function(n){return{mobile:n.ui.mobile}})(hn),wn=T.a.input(mn(),function(n){return void 0===n.width?18:n.width},function(n){return void 0===n.widthUnit?"vw":n.widthUnit},function(n){return n.square?void 0===n.width?5:n.width:void 0===n.height?5:n.height},function(n){return void 0===n.heightUnit?"vh":n.heightUnit},function(n){return void 0===n.backgroundColor?null:"background-color: ".concat(n.backgroundColor)},function(n){return n.fontSize?n.fontSize:1},function(n){return void 0===n.color?null:"color: ".concat(n.color)},function(n){return n.textAlign?n.textAlign:"left"},function(n){return void 0===n.placeholderColor?null:"color: ".concat(n.placeholderColor)},function(n){return void 0===n.extraProps?null:n.extraProps}),bn=function(n){return function(t,e){+cn()(e().constants.server_time).tz("Europe/Moscow")<+cn()(n.timestamp).tz("Europe/Moscow").add(2,"hour")&&!e().machines.machines.filter(function(t){return t.machineId===n.machineId})[0].isDisabled&&!e().laundry.laundry.filter(function(t){return t.timestamp===n.timestamp&&t.machineId===n.machineId}).length&&t({type:j,data:{timestamp:n.timestamp,machineId:n.machineId}})}},gn=function(n){return function(t,e){var r=n.filter(function(n){return n.userId===on.a.User.current().id&&+cn()(n.timestamp)>+cn()(e().constants.server_time).startOf("hour")}).sort(function(n,t){return n.timestamp-t.timestamp});t({type:y,data:[].concat(n)}),r.length||t({type:b,data:h.popUps.EMPTY})}},yn=function(n){return{type:E,data:(t=[].concat(n),t.map(function(n){return{machineId:n.id,isBroken:n.get("isBroken"),isDisabled:n.get("isDisabled"),comment:n.get("comment")}}))};var t};function xn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: space-between\nalign-items: center\nflex-direction: row\nwidth: 63vw\nheight: 10vh\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    height: 100%\n    flex-direction: column\n}\n"]);return xn=function(){return n},n}function En(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nheight: 3vw;\nborder-radius: 0.5vw;\nmargin: 0.5vw;\n&:hover { background-color: ","; };\nbackground-color: ",";\npadding: 0 1vw 0 1vw;\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    height: 10vw\n}\n"]);return En=function(){return n},n}function kn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: ","vw\nheight: ","vw\nborder: ","vw solid ",";\nborder-top-left-radius: ","vw;\nborder-bottom-left-radius: ","vw;\nborder-top-right-radius: ","vw;\nborder-bottom-right-radius: ","vw;\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","\ncursor: ","\ntransition: 0.2s;\n&:hover{\n    ","\n}\n@media (min-width: 320px) and (max-width: 480px) {\n    width: ","vw\n    height: ","vw\n}\n"]);return kn=function(){return n},n}function On(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: ","vw\nheight: 3vw\nbackground: ",";\nbackground: ",";\nborder-top-left-radius: ","vw;\nborder-bottom-left-radius: ","vw;\nborder-top-right-radius: ","vw;\nborder-bottom-right-radius: ","vw;\ncolor: white\n","\ndisplay: -webkit-box;\n   -webkit-line-clamp: 3;\n   -webkit-box-orient: vertical;\n   overflow: hidden;\n   text-overflow: ellipsis;\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    width: ","vw\n    height: 10vh\n}\n"]);return On=function(){return n},n}function _n(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 30vw\nheight: 90vh\njustify-content: flex-start;\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100%\n    height: 100%\n}\n"]);return _n=function(){return n},n}var Un=function(n,t){var e=parseInt(n.slice(1),16),r=t<0?0:255,o=t<0?-1*t:t,i=e>>16,a=e>>8&255,c=255&e;return"#"+(16777216+65536*(Math.round((r-i)*o)+i)+256*(Math.round((r-a)*o)+a)+(Math.round((r-c)*o)+c)).toString(16).slice(1)},jn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{day:+cn()(),laundry:[],machines:[],isSelected:!1,isBefore:!1},t=function(t){return"border-".concat(t,": 0.05vw solid ").concat(n.isSelected?"transparent":"rgba(0,0,0,0.1)",";")},e=12*n.machines.filter(function(n){return!n.isDisabled}).length-n.laundry.filter(function(t){return+cn()(t.timestamp).tz("Europe/Moscow").startOf("day")===+n.day}).length,r=12*n.machines.filter(function(n){return!n.isDisabled}).length;return o.a.createElement(z,{extraProps:"width: 6vw; height: 6vw; @media (min-width: 320px) and (max-width: 480px) { height: 10vw; }"},o.a.createElement(z,{extraProps:"flex-direction: row; ".concat(t("bottom"),";")},o.a.createElement(z,{extraProps:"width: 3vw; height: 3vw; ".concat(t("right"),"; font-size: ").concat(n.isSelected?1.5:1,"vw; transition: 0.2s; @media (min-width: 320px) and (max-width: 480px) { font-size: ").concat(n.isSelected?6:4,"vw; width: 8vw; height: 100%; } ")},cn()(n.day).tz("Europe/Moscow").format("DD")),o.a.createElement(z,{extraProps:"width: 3vw; height: 3vw; color: ".concat(h.colors.background.support,"; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; width: 8vw; height: 100%; } ")},cn()(n.day).tz("Europe/Moscow").format("MM"))),o.a.createElement(z,{extraProps:"flex-direction: row"},o.a.createElement(z,{extraProps:"width: 3vw; height: 3vw; ".concat(t("right"),"; color: ").concat(n.isBefore?h.colors.text.support:e/r>2/3?h.colors.accept:e/r>1/3?h.colors.yellow:h.colors.WARM_ORANGE,"; transition: 0.2s; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; width: 8vw; height: 100%; } ")},e),o.a.createElement(z,{extraProps:"width: 3vw; height: 3vw; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; width: 8vw; height: 100%; } "},r)))},Pn=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).state={selectedDay:+cn()(e.props.server_time).tz("Europe/Moscow").startOf("day"),is_admin:!1},e.subscriptionOptions=["update","create","delete","open"],e.machinesQuery=new on.a.Query("Machines"),e.laundryQuery=new on.a.Query("Laundry"),e.machinesSubscription=e.machinesQuery.subscribe(),e.laundrySubscription=e.laundryQuery.subscribe(),e.loadMachines=function(){e.machinesQuery.find().then(function(n){e.props.loadMachines(n)}).catch(function(n){console.log(n)})},e.loadLaundry=function(){on.a.Cloud.run("getLaundry").then(function(n){e.props.loadLaundry(n)}).catch(function(n){console.log(n)})},e.render=function(){return o.a.createElement(z,{flexDirection:"row",extraProps:"position: relative; @media (min-width: 320px) and (max-width: 480px) { flex-direction: column; height: 100%; }"},o.a.createElement(Cn,{visible:e.state.selectedDay===+cn()(e.props.server_time).tz("Europe/Moscow").startOf("day")},e.props.server_time),o.a.createElement(z,null,o.a.createElement(Wn,null,o.a.createElement(z,{extraProps:"flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { flex-direction: column; } "},o.a.createElement(In,null,o.a.createElement(z,{extraProps:"flex-direction: row;  "},o.a.createElement(z,{extraProps:"color: ".concat(h.colors.text.support,"; font-size: 1.2vw;")},"\u0421\u0442\u0438\u0440\u0430\u043b\u043a\u0430"),o.a.createElement(z,{extraProps:"width: 1vw; color: ".concat(h.colors.yellow,"; font-size: 1.5vw;")},"|"),o.a.createElement(z,{extraProps:"font-size: 1.2vw; color: ".concat(h.colors.text.primary)},h.weekDays.short[cn()(e.state.selectedDay).tz("Europe/Moscow").day()]," ",cn()(e.state.selectedDay).tz("Europe/Moscow").format("DD.MM.YY")))),o.a.createElement(R,{backgroundColor:h.colors.purple,disabled:e.state.selectedDay===+cn()(e.props.server_time).tz("Europe/Moscow").startOf("day"),onClick:function(){e.setState({selectedDay:+cn()(e.props.server_time).tz("Europe/Moscow").startOf("day")})}},"\u0421\u0435\u0433\u043e\u0434\u043d\u044f")),o.a.createElement(z,{extraProps:"flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { flex-direction: column; }"},o.a.createElement(R,{visible:e.state.is_admin,backgroundColor:h.colors.accept,onClick:function(){e.props.setPopUpWindow(h.popUps.LAUNDRY_SETTINGS)}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),o.a.createElement(R,{backgroundColor:h.colors.lightblue,onClick:function(){e.props.setPopUpWindow(h.popUps.LAUNDRY_OPTIONS)}},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),o.a.createElement(R,{disabled:!e.props.laundry.filter(function(n){return n.userId===on.a.User.current().id&&+cn()(n.timestamp)>+cn()(e.props.server_time).startOf("hour")}).length,onClick:function(){e.props.setPopUpWindow(h.popUps.RESEVATIONS)}},"\u0421\u0442\u0438\u0440\u043a\u0438 | ",e.props.laundry.filter(function(n){return n.userId===on.a.User.current().id&&+cn()(n.timestamp)>+cn()(e.props.server_time).startOf("hour")}).length),o.a.createElement(R,{disabled:!e.props.selected_slots.length,backgroundColor:h.colors.accept,onClick:function(){e.props.setPopUpWindow(h.popUps.SHOPPING_BASKET)}},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 | ",e.props.selected_slots.length))),o.a.createElement(z,{extraProps:"width: 64vw; height: 80vh; justify-content: flex-start; @media (min-width: 320px) and (max-width: 480px) { width: 100vw; flex-direction: row; max-width: 100vw; overflow: scroll; height: 100%; } "},[0,1,2,3].map(function(n,t){return o.a.createElement(z,{extraProps:"flex-direction: row;",key:t},h.weekDays.short.map(function(n,r){var i=+cn()(e.props.server_time).tz("Europe/Moscow").startOf("isoWeek").add(t,"week").add(r,"day"),a=+cn()(e.props.server_time).tz("Europe/Moscow").startOf("day")>+cn()(i).tz("Europe/Moscow");return o.a.createElement(Mn,{key:r,inner:!1,week:t,day:r,isBefore:a},o.a.createElement(Mn,{key:r,inner:!0,week:t,day:r,isBefore:a,isToday:+cn()(e.props.server_time).tz("Europe/Moscow").startOf("day")===+cn()(i).tz("Europe/Moscow"),isSelected:+cn()(e.state.selectedDay).tz("Europe/Moscow").startOf("day")===+cn()(i).tz("Europe/Moscow"),isWeekEnd:cn()(i).tz("Europe/Moscow").add(-1,"day").day()>4,onClick:function(){a||e.setState({selectedDay:i})}},o.a.createElement(jn,{day:i,isSelected:+cn()(e.state.selectedDay).tz("Europe/Moscow").startOf("day")===+cn()(i).tz("Europe/Moscow"),isWeekEnd:cn()(i).tz("Europe/Moscow").add(-1,"day").day()>4,isBefore:a,laundry:e.props.laundry,machines:e.props.machines})))}))}))),o.a.createElement(An,null,[0,1,2,3,4,5,6,7,8,9,10,11].map(function(n,t){var r=+cn()(e.state.selectedDay).tz("Europe/Moscow").add(2*t,"hour");return o.a.createElement(z,{extraProps:"height: 3.4vw; flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { height: 11vh } ",key:t},o.a.createElement(z,{width:4,extraProps:"color: ".concat(h.colors.text.support,"; height: 4.5vw; justify-content: flex-start; ")},cn()(r).tz("Europe/Moscow").format("HH:mm")),e.props.machines.map(function(n,t){var i={timestamp:r,machineId:n.machineId},a=e.props.laundry.filter(function(n){return n.machineId===i.machineId&&n.timestamp===i.timestamp})[0];return o.a.createElement(z,{key:t},o.a.createElement(Nn,{first:0===t,last:t===e.props.machines.length-1,width:21/e.props.machines.length,isBefore:+cn()(e.props.server_time).tz("Europe/Moscow").add(-2,"hour")>+cn()(r).tz("Europe/Moscow"),isSelected:e.props.selected_slots.filter(function(n){return JSON.stringify(n)===JSON.stringify(i)}).length,isDisabled:n.isDisabled,isBook:!!a,isMyBook:!!a&&a.userId===on.a.User.current().id,is_vk_owner:!!a&&!!a.vk,onClick:function(){a?a.vk&&window.open(a.vk):e.props.selectSlot(i)}},a?a.name.length>36/e.props.machines.length?a.name.substring(0,36/e.props.machines.length-2)+"...":a.name:"-"))}))})))},e}return Object(p.a)(t,n),Object(l.a)(t,[{key:"componentDidMount",value:function(){var n=this,t=new on.a.Query(on.a.Role);for(var e in t.equalTo("name","Admin"),t.find().then(function(t){new on.a.Query("Roles").equalTo("userId",on.a.User.current().id).equalTo("role","ADMIN").first().then(function(t){n.setState({is_admin:!!t})})}),this.subscriptionOptions)this.machinesSubscription.on(this.subscriptionOptions[e],function(){n.loadMachines()}),this.laundrySubscription.on(this.subscriptionOptions[e],function(){n.loadLaundry()})}},{key:"componentWillUnmount",value:function(){this.machinesSubscription.unsubscribe(),this.laundrySubscription.unsubscribe()}}]),t}(o.a.Component),Sn=Object(W.b)(function(n){return{server_time:n.constants.server_time,selected_slots:n.laundry.selected_slots,machines:n.machines.machines,laundry:n.laundry.laundry}},function(n){return{selectSlot:function(t){return n(bn(t))},setPopUpWindow:function(t){return n(I(t))},loadMachines:function(t){return n(yn(t))},loadLaundry:function(t){return n(gn(t))}}})(Pn),Cn=function(n){var t=40*((n.children-+cn()(n.children).tz("Europe/Moscow").startOf("day"))/864e5)-1;return o.a.createElement(z,{extraProps:"visibility: ".concat(n.visible?"visible":"hidden","; transition: 0.2s; opacity: ").concat(+n.visible,"; position: absolute; right: 23.5vw; top: ").concat(t+ +!n.visible,"vw; z-index: 1; color: ").concat(h.colors.purple,";")},o.a.createElement(z,{extraProps:"padding: 0 3vw 0 0; "},cn()(n.children).tz("Europe/Moscow").format("HH:mm")),o.a.createElement(z,{extraProps:"flex-direction: row"},o.a.createElement(z,{extraProps:"width: 0.5vw; height: 0.5vw; border-radius: 1vw; background-color: ".concat(h.colors.purple,";")}),o.a.createElement(z,{extraProps:"width: 6vw; height: 0.1vw; background-color: ".concat(Un(h.colors.purple,.6),";")})))},An=T.a.div(_n()),Nn=T.a.div(On(),function(n){return n.width},function(n){return n.isBefore||n.isDisabled?h.colors.background.support:n.isSelected?h.colors.lightblue:"rgba(0, 0, 0, 0.03)"},function(n){return n.isBefore?null:n.isMyBook?h.colors.accept:n.isBook?h.colors.WARM_ORANGE:null},function(n){return n.first?.5:0},function(n){return n.first?.5:0},function(n){return n.last?.5:0},function(n){return n.last?.5:0},function(n){return n.isBefore||n.isDisabled?null:n.isBook?n.is_vk_owner?"cursor: pointer;":null:"cursor: pointer;"},function(n){return 4*n.width}),Mn=T.a.div(kn(),function(n){return n.inner?8.6:8.7},function(n){return n.inner?8.6:8.7},function(n){return n.inner?0:.1},h.colors.background.support,function(n){return 0===n.week&&0===n.day?1:0},function(n){return 3===n.week&&0===n.day?1:0},function(n){return 0===n.week&&6===n.day?1:0},function(n){return 3===n.week&&6===n.day?1:0},function(n){return n.inner?"background-color: transparent":null},function(n){return n.isToday?"border: 0.2vw solid ".concat(h.colors.accept):null},function(n){return n.isSelected?"border-radius: 0.5vw; border: 0.2vw solid ".concat(h.colors.purple):null},function(n){return n.isBefore?null:"background-color: transparent"},function(n){return n.isSelected?"background-color: ".concat(h.colors.background.primary):null},function(n){return n.isWeekEnd?"background-color: ".concat(h.colors.background.support):null},function(n){return n.isWeekEnd?"background-color: ".concat(Un(h.colors.background.support,.2)):null},function(n){return n.isBefore?"background-color: transparent":null},function(n){return n.isWeekEnd?"color: ".concat(h.colors.text.secondary,";"):"color: ".concat(h.colors.text.primary)},function(n){return n.isBefore?"color: ".concat(h.colors.text.support,";"):null},function(n){return n.isBefore?"default":"pointer;"},function(n){return n.inner?"background-color: ".concat(h.colors.background.secondary,"\n    ").concat(function(n){return n.isWeekEnd?"background-color: ".concat(h.colors.background.support):null},"\n    ").concat(function(n){return n.isBefore?"background-color: transparent":null}):null},function(n){return n.inner?30:30.5},function(n){return n.inner?30:30.5}),In=T.a.div(En(),h.colors.background.primary,h.colors.background.primary),Wn=T.a.div(xn()),Tn=e(15);function Dn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: ","vw; \ncolor: ","; \nfont-size: 0.8vw; \n"]);return Dn=function(){return n},n}function zn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 6vw;\nheight: 10vh;\nfont-size: 0.8vw;\ncolor: ",";\nbackground-color: ",";\nborder-right: 0.1vw solid ","; \ntransition: 0.2s\n"]);return zn=function(){return n},n}function Bn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: ","vw;\nheight: 9.4vh;\nbackground-color: ",";\nborder-radius: 0.5vw;\nposition: absolute;\nz-index: 2;\nleft: ","vw;\ntop: 0.3vh;\ncursor: pointer;\ntransition: 0.2s\n"]);return Bn=function(){return n},n}function Ln(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: ","vw;\nheight: 9.4vh;\nmargin: 0.3vh 0 0.3vh 0\nbackground-color: ",";\nborder-top-left-radius: ","vw;\nborder-bottom-left-radius: ","vw;\nborder-top-right-radius: ","vw;\nborder-bottom-right-radius: ","vw;\n&:hover {\n    background-color: ",";\n    border-top-left-radius: ","vw;\n    border-bottom-left-radius: ","vw;\n    border-top-right-radius: ","vw;\n    border-bottom-right-radius: ","vw;\n};\n"]);return Ln=function(){return n},n}function Rn(){var n=Object(c.a)(["\nwidth: 94vw;\nheight: 80vh;\ndisplay: block;\noverflow: auto;\nmax-height: 80vh;\ntransition: 0.2s\n"]);return Rn=function(){return n},n}function Yn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nwidth: 88vw;\nheight: 10vh;\nborder-bottom: 0.02vw solid ",";\ntransition: 0.2s\n"]);return Yn=function(){return n},n}function Gn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nwidth: 88vw;\nheight: 10vh;\npadding-left: 6vw;\nborder-bottom: 0.1vw solid ",";\ntransition: 0.2s\n"]);return Gn=function(){return n},n}function Fn(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 94vw\nheight: 90vh\ntransition: 0.2s\n@media (min-width: 320px) and (max-width: 480px) {\n    flex-direciton: column;\n}\n"]);return Fn=function(){return n},n}var Hn=Array.from({length:21},function(n,t){return t}),Kn=Array.from({length:48},function(n,t){return t}),Vn=function(n){return{day:+m()(n.start_timestamp).format("D")-+m()().format("D"),from:(+m()(n.start_timestamp)-+m()(n.start_timestamp).startOf("day"))/36e5*2,to:(+m()(n.end_timestamp)-+m()(n.end_timestamp).startOf("day"))/36e5*2-1,owner:n.userId,is_allowed:n.is_allowed,is_regular:n.is_regular,data:n.data}},qn=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).state={select_mode:void 0},e.render=function(){var n=e.state.select_mode,t=e.props,r=t.selected_slot,i=t.books;return o.a.createElement(Qn,null,o.a.createElement(Jn,null,Kn.filter(function(n){return n%2===0}).map(function(n,t){return o.a.createElement(et,{key:t},m()().startOf("day").add(t,"hour").format("HH:mm"))})),o.a.createElement(Zn,null,Hn.map(function(t,a){var c=m()().startOf("day").add(a,"day"),s=m()(c).day()>5||0===m()(c).day();return o.a.createElement(z,{extraProps:"flex-direction: row; position: relative;",key:a},o.a.createElement(tt,{isWeekEnd:s},m()(c).format("DD.MM"),", ",h.weekDays.short[m()(c).day()]),r&&r.day===a?o.a.createElement(nt,{selected_slot:r,onClick:function(){e.props.setPopUpWindow(h.popUps.CLUB_BOOK)}}):null,i.map(function(n,t){return Vn(n)}).filter(function(n){return n.day===a}).map(function(n,t){return o.a.createElement(nt,{booked:!0,key:t,selected_slot:n})}),o.a.createElement(Xn,null,Kn.map(function(t,i){return o.a.createElement($n,{key:i,index:i,s:n,day_index:a,onMouseOver:function(){n&&n.from<=i&&e.setState({select_mode:Object(Tn.a)({},n,{to:i})})},onClick:function(){r||(e.props.openBookPopUp(n),n?e.setState({select_mode:void 0}):e.setState({select_mode:{day:a,from:i,to:i}}))}})})))})))},e}return Object(p.a)(t,n),t}(o.a.Component),Qn=T.a.div(Fn()),Jn=T.a.div(Gn(),h.colors.background.support),Xn=T.a.div(Yn(),h.colors.background.support),Zn=T.a.div(Rn()),$n=T.a.div(Ln(),function(n){return 88/Kn.length},function(n){return n.s&&n.s.day===n.day_index&&n.index>=n.s.from&&n.index<=n.s.to?h.colors.background.primary:null},function(n){return n.s&&n.s.from===n.index?.5:0},function(n){return n.s&&n.s.from===n.index?.5:0},function(n){return n.s&&n.s.to===n.index?.5:0},function(n){return n.s&&n.s.to===n.index?.5:0},function(n){return n.s?"white":"rgba(255, 255, 255, 0.3)"},function(n){return n.s?n.s.from===n.index?.5:0:.5},function(n){return n.s?n.s.from===n.index?.5:0:.5},function(n){return n.s?n.s.to===n.index?.5:0:.5},function(n){return n.s?n.s.to===n.index?.5:0:.5}),nt=T.a.div(Bn(),function(n){return 88/Kn.length*(n.selected_slot.to-n.selected_slot.from+1)},function(n){return n.booked?h.colors.purple:h.colors.yellow},function(n){return 6+88*n.selected_slot.from/Kn.length}),tt=T.a.div(zn(),function(n){return n.isWeekEnd?"white":h.colors.text.primary},function(n){return n.isWeekEnd?h.colors.yellow:null},h.colors.background.support),et=T.a.div(Dn(),88/Kn.length*2,h.colors.text.primary),rt=Object(W.b)(function(n){return{server_time:n.constants.server_time,selected_slot:n.club.selected_slot,books:n.club.books}},function(n){return{setPopUpWindow:function(t){return n(I(t))},openBookPopUp:function(t){return n(sn(t))}}})(qn),ot=[o.a.createElement(Sn,{name:h.screens.laundry}),o.a.createElement(rt,{name:h.screens.club})];function it(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 100vw;\nheight: 100vh;\nbackground-color: ",";\ntransition: 0.2s;\n"]);return it=function(){return n},n}function at(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nflex-direction: column;\nalign-items: center;\nwidth: 94vw;\nheight: 100vh;\nbackground-color: ",";\ntransition: 0.2s;\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100vw\n}\n"]);return at=function(){return n},n}function ct(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nflex-direction: column;\nwidth: 6vw;\nheight: 100vh;\nbackground-color: ",";\ntransition: 0.2s;\n@media (min-width: 320px) and (max-width: 480px) {\n    display: none\n}\n"]);return ct=function(){return n},n}function st(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 94vw;\nheight: 92vh;\ntransition: 0.2s;\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100vw\n    height: 100%;\n    max-height: 92vh;\n    overflow-y: scroll;\n}\n"]);return st=function(){return n},n}function lt(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: flex-end;\nalign-items: center;\nwidth: 94vw;\nheight: 10vh;\nz-index: 2;\ntransition: 0.2s;\n@media (min-width: 320px) and (max-width: 480px) {\n    width: 100vw\n}\n"]);return lt=function(){return n},n}function ut(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 6vw;\nheight: 10vh;\ntransition: 0.2s;\nborder-bottom: 0.1vh solid ",";\n"]);return ut=function(){return n},n}function dt(){var n=Object(c.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nflex-direction: column;\nwidth: 6vw;\nheight: 10vh;\nbackground-color: ",";\ncursor: pointer;\nfont-size: 0.6vw;\ncolor: ",";\nposition: relative;\nbox-sizing: border-box;\nborder-right: 0.15vw solid ",";\n:hover {\n    background-color: ",";\n}\n// transition: 0.2s;\n"]);return dt=function(){return n},n}function pt(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nwidth: ","vw;\nheight: 4vw;\nborder-radius: 1vw;\nmargin: 0.5vw;\ncursor: pointer;\n&:hover { background-color: ","; };\n",";\ntransition: 0.2s\n"]);return pt=function(){return n},n}var ft=function(n,t){var e=parseInt(n.slice(1),16),r=t<0?0:255,o=t<0?-1*t:t,i=e>>16,a=e>>8&255,c=255&e;return"#"+(16777216+65536*(Math.round((r-i)*o)+i)+256*(Math.round((r-a)*o)+a)+(Math.round((r-c)*o)+c)).toString(16).slice(1)},mt=[{title:"\u0421\u0442\u0438\u0440\u043a\u0430",image:e(131),color:h.colors.yellow,name:h.screens.laundry},{title:"\u041a\u043b\u0443\u0431 \u0438 \u041a\u0414\u0421",image:e(131),color:h.colors.accept,name:h.screens.club}],ht=function(n,t,e,r){var o=new on.a.Query(n);t?(o.equalTo(t,e),o.first().then(function(n){r(n)})):o.find().then(function(n){r(n)});var i=o.subscribe();return i.on("update",function(n){r(n)}),i.on("create",function(n){r(n)}),i.on("delete",function(n){o.first().then(function(n){r(n)})}),i},vt=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).render=function(){return o.a.createElement(_t,null,o.a.createElement(kt,null,o.a.createElement(yt,null,o.a.createElement("span",{role:"img","aria-label":"dcam"},"\ud83c\udf3f")),o.a.createElement(z,{width:6,height:90},mt.map(function(n,t){return o.a.createElement(gt,{key:t,selected:e.props.mainAppScreen===n.name,color:n.color,onClick:function(){e.props.setMainAppScreen(n.name)}},o.a.createElement("img",{src:n.image,alt:n.title,style:{width:"2.5vw"}}),n.title)}))),o.a.createElement(Ot,null,o.a.createElement(xt,null,o.a.createElement(bt,{width:4,selected:e.props.popUpWindow===h.popUps.TOP_BALANCE_WINDOW,onClick:function(){e.props.setPopUpWindow(h.popUps.TOP_BALANCE_WINDOW)}},o.a.createElement(z,{extraProps:" width: 3vw; height: 3vw; border-radius: 3vw; background-color: ".concat(e.props.money>0?h.colors.accept:h.colors.background.support,"; color: white; font-size: 0.8vw; transition: background-color 0.2s; ")},e.props.money," \u20bd")),o.a.createElement(bt,{width:16,selected:e.props.popUpWindow===h.popUps.TOP_PROFILE_MENU,onClick:function(){e.props.setPopUpWindow(h.popUps.TOP_PROFILE_MENU)}},o.a.createElement(z,{extraProps:" width: 3vw; height: 3vw; border-radius: 3vw; background-color: ".concat(h.colors.background.support,"; ")},o.a.createElement("img",{src:on.a.User.current().get("avatar"),alt:"",style:{width:"3vw",borderRadius:"3vw"}})),o.a.createElement(z,{alignItems:"flex-start",extraProps:" width: 9vw; height: 1vw; margin: 0.5vw; color: ".concat(h.colors.text.primary,"; ")},on.a.User.current().get("name").split(" ")[0]),"\ud83c\udf55")),o.a.createElement(Et,null,ot.filter(function(n){return n.props.name===e.props.mainAppScreen})[0])))},e}return Object(p.a)(t,n),Object(l.a)(t,[{key:"componentDidMount",value:function(){var n=this;this.balance_sub=ht("Balance","userId",on.a.User.current().id,function(t){n.props.setBalance(t.get("money"))}),this.nfc_sub=ht("NFC","userId",on.a.User.current().id,function(t){n.props.setNfcOwner(!!t)}),this.club_sub=ht("Club",null,null,function(t){on.a.Cloud.run("getClubBooks").then(function(t){n.props.setClubBooks(t)})})}},{key:"componentWillUnmount",value:function(){this.balance_sub.unsubscribe(),this.nfc_sub.unsubscribe(),this.club_sub.unsubscribe()}}]),t}(o.a.Component),wt=Object(W.b)(function(n){return{mainAppScreen:n.ui.mainAppScreen,popUpWindow:n.ui.popUpWindow,money:n.constants.money}},function(n){return{setMainAppScreen:function(t){return n(M(t))},setPopUpWindow:function(t){return n(I(t))},setNfcOwner:function(t){return n(pn(t))},setBalance:function(t){return n(fn(t))},setClubBooks:function(t){return n(ln(t))}}})(vt),bt=T.a.div(pt(),function(n){return n.width?n.width:4},h.colors.background.primary,function(n){return n.selected?"background-color: ".concat(h.colors.background.primary,";"):null}),gt=T.a.div(dt(),function(n){return n.selected?ft(n.color,.5):null},h.colors.text.support,function(n){return n.selected?n.color:"transparent"},function(n){return n.selected?ft(n.color,.3):h.colors.background.secondary}),yt=T.a.div(ut(),h.colors.background.secondary),xt=T.a.div(lt()),Et=T.a.div(st()),kt=T.a.div(ct(),h.colors.background.primary),Ot=T.a.div(at(),h.colors.background.secondary),_t=T.a.div(it(),h.colors.background.primary),Ut=e(107),jt=e.n(Ut),Pt=e(185),St=function(){var n=Object(Pt.a)(jt.a.mark(function n(){var t,e;return jt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=q.getCurrentUser().w3,(e=new on.a.Query("User")).equalTo("email",t.U3),n.abrupt("return",e.first().then(function(n){if(n)return on.a.User.logIn(t.U3,t.Eea).then(function(n){return on.a.User.current()}).catch(function(n){console.log(n)});var e=new on.a.User;return e.set("username",t.U3),e.set("password",t.Eea),e.set("email",t.U3),e.set("name",t.ig),e.set("avatar",t.Paa),e.signUp().then(function(n){return on.a.User.current()}).catch(function(n){console.log(n),q.signOut()})}).catch(function(n){console.log(n)}));case 4:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),Ct=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).hideElement=function(n,t){var r=function(n){return!!n&&!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)};t===n&&function(t){var o=function(o){null===o.target.closest("."+n)&&r(t)&&(e.props.popUpWindow===n&&e.props.setPopUpWindow(h.popUps.EMPTY),i())},i=function(){document.removeEventListener("click",o)};document.addEventListener("click",o)}(document.getElementsByClassName(n)[0])},e.render=function(){var n=e.props.popUpWindow!==h.popUps.EMPTY&&e.props.mobile;return o.a.createElement(z,null,o.a.createElement(z,{extraProps:"\n                        width: 100vw;\n                        height: 100vh;\n                        position: absolute;\n                        background-color: rgba(0, 0, 0, ".concat(n?.2:0,");\n                        backdrop-filter: blur(").concat(n?5:0,"px);\n                        visibility: ").concat(n?"visible":"hidden",";\n                        z-index: 2;\n                        top: 0;\n                        transition: 0.2s;\n                    "),onClick:function(){e.props.popUpWindow!==h.popUps.EMPTY&&e.props.setPopUpWindow(h.popUps.EMPTY)}}),e.props.children)},e}return Object(p.a)(t,n),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(n){this.hideElement(this.props.children.props.name,n.popUpWindow),n.popUpWindow!==h.popUps.EMPTY&&n.mobile?document.getElementsByTagName("body")[0].style.position="fixed":document.getElementsByTagName("body")[0].style.position="inherit"}}]),t}(o.a.Component),At=Object(W.b)(function(n){return{popUpWindow:n.ui.popUpWindow,mobile:n.ui.mobile}},function(n){return{setPopUpWindow:function(t){return n(I(t))}}})(Ct),Nt="http://dcam.pro:1337/parse/",Mt="dcam",It="dcam",Wt=(e(244),e(245),e(186)),Tt=e.n(Wt),Dt=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).render=function(){var n=e.props.popUpWindow===h.popUps.TOP_PROFILE_MENU,t="\n            // width: 10vw;\n            padding: 0 1vw 0 1vw;\n            height: 4vw;\n            border-radius: 1vw;\n            position: absolute;\n            top: ".concat(n?10:12,"vh;\n            right: 0.5vw;\n            z-index: 1;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            // box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        "),r=[{image:Tt.a,onClick:function(){q.signOut(),e.props.setPopUpWindow(h.popUps.EMPTY)}}];return o.a.createElement(z,{className:h.popUps.TOP_PROFILE_MENU,flexDirection:"row",backgroundColor:h.colors.background.primary,extraProps:t},r.map(function(n,t){return o.a.createElement(z,{key:t,extraProps:"\n                                padding: 0.5vw;\n                                border-left: ".concat(+(t===r.length-1&&r.length>1),"px solid ").concat(h.colors.background.secondary,";\n                                cursor: pointer;\n                            "),onClick:function(){n.onClick()}},o.a.createElement("img",{src:n.image,alt:"",style:{width:"2vw"}}))}))},e}return Object(p.a)(t,n),t}(o.a.Component);Dt.defaultProps={visible:!1};var zt=Object(W.b)(function(n){return{popUpWindow:n.ui.popUpWindow}},function(n){return{setEntryScreen:function(t){return n(N(t))},setPopUpWindow:function(t){return n(I(t))}}})(Dt),Bt=e(41),Lt=e.n(Bt),Rt=e(80),Yt=e.n(Rt),Gt=(e(306),function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).state={value:"",order_id:""},e.render=function(){var n=e.props.popUpWindow===h.popUps.TOP_BALANCE_WINDOW,t="\n            padding: 1vw;\n            border-radius: 1vw;\n            position: absolute;\n            top: ".concat(n?10:12,"vh;\n            right: 17.5vw;\n            z-index: ").concat(n?1:-1,";\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            // box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            background-color: ").concat(h.colors.background.primary,";\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        ");return o.a.createElement(z,{className:h.popUps.TOP_BALANCE_WINDOW,extraProps:t},o.a.createElement(z,{extraProps:"flex-direction: row; color: ".concat(h.colors.text.primary)},"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c ",o.a.createElement("span",{role:"img","aria-label":"martini"},"\ud83c\udf78")),o.a.createElement(vn,{placeholder:"\u0421\u0443\u043c\u043c\u0430",short:!0,onChange:function(n){e.setState({value:n})},value:e.state.value,validator:function(n){return Yt.a.isInt(n)}}),o.a.createElement("form",{method:"POST",action:"https://money.yandex.ru/quickpay/confirm.xml"},o.a.createElement("input",{type:"hidden",name:"receiver",value:"410018436058863"}),o.a.createElement("input",{type:"hidden",name:"label",value:e.state.order_id}),o.a.createElement("input",{type:"hidden",name:"quickpay-form",value:"donate"}),o.a.createElement("input",{type:"hidden",name:"targets",value:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438: ".concat(e.state.order_id)}),o.a.createElement("input",{type:"hidden",name:"sum",value:+e.state.value,"data-type":"number"}),o.a.createElement("input",{type:"hidden",name:"paymentType",value:"AC"}),o.a.createElement("input",{id:"yandex_money_button",type:"submit",value:"\u0414\u0430\u043b\u0435\u0435",style:{display:"none"}}),o.a.createElement(R,{visible:n,disabled:e.state.value<2,backgroundColor:h.colors.accept,onClick:function(){on.a.Cloud.run("saveTransaction",{value:+e.state.value}).then(function(n){e.setState({order_id:n}),document.getElementById("yandex_money_button").click()})}},"\u0414\u0430\u043b\u0435\u0435")))},e}return Object(p.a)(t,n),t}(o.a.Component)),Ft=Object(W.b)(function(n){return{popUpWindow:n.ui.popUpWindow}},function(n){return{setPopUpWindow:function(t){return n(I(t))}}})(Gt);function Ht(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nheight: 3vw\ntransition: 0.2s\n"]);return Ht=function(){return n},n}var Kt=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).clearSelections=function(){for(var n in e.props.selected_slots)e.props.selectSlot(e.props.selected_slots[n]);e.props.setPopUpWindow(h.popUps.EMPTY)},e.render=function(){var n=e.props.popUpWindow===h.popUps.SHOPPING_BASKET,t="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(h.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 30.75vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            display: block;\n            max-height: 70vh;\n            overflow-y: scroll;\n            transition: 0.2s;\n        ");return o.a.createElement(z,{className:h.popUps.SHOPPING_BASKET,extraProps:t},e.props.selected_slots.map(function(n,t){return o.a.createElement(qt,{key:t},o.a.createElement(z,{width:5,alignItems:"flex-start; margin: 0.5vw;"},o.a.createElement(z,{extraProps:" color: ".concat(h.colors.text.support,"; font-size: 0.8vw; ")},h.weekDays.full[m()(n.timestamp).day()]),o.a.createElement(z,{extraProps:" font-size: 0.8vw; color: ".concat(h.colors.text.primary,"; ")},m()(n.timestamp).format("DD.MM.YY"))),o.a.createElement(z,null,o.a.createElement(z,{extraProps:" font-size: 1.5vw; color: ".concat(h.colors.text.primary,"; ")},m()(n.timestamp).format("HH:mm"))),o.a.createElement(z,{fontSize:1,extraProps:" margin: 0.5vw; width: 2vw; height: 2vw; border-radius: 2vw; background-color: ".concat(h.colors.purple,"; color: white; ")},e.props.machines.map(function(n){return n.machineId}).indexOf(n.machineId)+1),o.a.createElement(z,{width:2.5,extraProps:"color: ".concat(h.colors.text.primary,";")},e.props.laundry_cost," \u20bd"),o.a.createElement(z,{extraProps:" border-left: 1px solid ".concat(h.colors.background.support,"; margin-left: 0.5vw; width: 1.5vw; height: 2vw; cursor: pointer; ")},o.a.createElement("img",{src:Lt.a,alt:"",style:{width:"1.2vw",marginLeft:"0.5vw"},onClick:function(){e.props.selectSlot(n)}})))}),o.a.createElement(z,{flexDirection:"row"},o.a.createElement(R,{visible:n,onClick:function(){e.clearSelections()}},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),o.a.createElement(R,{visible:n,disabled:e.props.selected_slots.length*e.props.laundry_cost>e.props.money,backgroundColor:h.colors.accept,onClick:function(){if(e.props.is_nfc_owner){var n=e.props.selected_slots;e.props.selected_slots.length*e.props.laundry_cost<=e.props.money&&(!function t(){var e={timestamp:n[0].timestamp,machineId:n[0].machineId};on.a.Cloud.run("setLaundry",e).then(function(e){n.shift(),n.length&&t()})}(),e.clearSelections())}else e.props.setPopUpWindow(h.popUps.GET_NFC)}},"\u041a\u0443\u043f\u0438\u0442\u044c")))},e}return Object(p.a)(t,n),t}(o.a.Component),Vt=Object(W.b)(function(n){return{popUpWindow:n.ui.popUpWindow,selected_slots:n.laundry.selected_slots,is_nfc_owner:n.constants.is_nfc_owner,machines:n.machines.machines,money:n.constants.money,laundry_cost:n.constants.laundry_cost}},function(n){return{setPopUpWindow:function(t){return n(I(t))},selectSlot:function(t){return n(bn(t))}}})(Kt),qt=T.a.div(Ht()),Qt=e(187),Jt=e.n(Qt),Xt=e(108),Zt=e.n(Xt),$t=e(188),ne=e.n($t),te=e(109),ee=e.n(te),re=e(110),oe=e.n(re);function ie(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\ntransition: 0.2s\n"]);return ie=function(){return n},n}function ae(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nmargin: 0.2vw;\nbackground-color: ",";\nborder-radius: 0.5vw;\ncolor: white\nwidth: 4vw;\nheight: 4vw;\ntransition: 0.2s\ncursor: pointer;\n"]);return ae=function(){return n},n}var ce=function(n){var t=function(t){var e=new on.a.Query("Machines");e.equalTo("objectId",n[t].machineId),e.first().then(function(e){n[t].should_be_deleted?e.destroy().catch(function(n){console.log(n)}):(e.set("isBroken",n[t].isBroken),e.set("isDisabled",n[t].isDisabled),e.save().catch(function(n){console.log(n)}))}).catch(function(n){console.log(n)})};for(var e in n)t(e)},se=[{backgroundColor:h.colors.yellow,image:ee.a,supportImage:ee.a,name:"isBroken"},{backgroundColor:h.colors.WARM_ORANGE,image:oe.a,supportImage:oe.a,name:"isDisabled"},{backgroundColor:h.colors.text.support,image:Jt.a,supportImage:Zt.a,name:"should_be_deleted"}],le=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).state={machines:e.props.machines,openedMachine:null},e.render=function(){var n=e.props.popUpWindow===h.popUps.LAUNDRY_SETTINGS,t="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(h.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 57vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        ");return o.a.createElement(z,{className:h.popUps.LAUNDRY_SETTINGS,extraProps:t},o.a.createElement(z,{extraProps:"flex-direction: row"},e.state.machines.map(function(n,t){var r=null;return n.isBroken&&(r=se[0]),n.isDisabled&&(r=se[1]),n.should_be_deleted&&(r=se[2]),o.a.createElement(z,{key:t,extraProps:"position: relative;"},o.a.createElement(z,{extraProps:"width: 4vw; height: 4vw; background-color: ".concat(r?r.backgroundColor:h.colors.background.support,"; border-radius: 0.5vw; margin: 0.1vw; color: white; cursor: pointer;"),onClick:function(){e.setState({openedMachine:e.state.openedMachine===t?null:t})}},r?o.a.createElement("img",{src:r.image,alt:"",style:{width:"1.5vw"}}):t+1),o.a.createElement(z,{extraProps:"visibility: ".concat(e.state.openedMachine===t?"visible":"hidden","; opacity: ").concat(+(e.state.openedMachine===t),"; position: absolute; box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05); padding: 0.5vw; border-radius: 0.5vw; top: ").concat(+(e.state.openedMachine===t)+3.5,"vw; background-color: ").concat(h.colors.background.primary,";  transition: 0.2s;")},se.map(function(r,i){return o.a.createElement(z,{key:i,extraProps:"cursor: pointer; visibility: ".concat(e.state.openedMachine===t?"visible":"hidden","; opacity: ").concat(+(e.state.openedMachine===t),"; width: 4vw; height: 4vw; background-color: ").concat(n[r.name]?r.backgroundColor:h.colors.background.support,"; border-radius: 0.5vw; margin: 0.1vw; color: white; transition: 0.2s;"),onClick:function(){var o=e.state.machines;o[t][r.name]=!n[r.name],o[t].isDisabled&&(o[t].isBroken=!1),e.setState({machines:o})}},o.a.createElement("img",{src:n[r.name]?r.supportImage:r.image,alt:"",style:{width:"1.5vw"}}))})))}),o.a.createElement(z,{extraProps:"width: 4vw; height: 4vw; border-radius: 0.5vw; margin: 0.1vw; color: ".concat(h.colors.background.support,"; font-size: 2vw; border: 0.15vw dashed ").concat(h.colors.background.support,"; cursor: pointer; "),onClick:function(){var n=new(on.a.Object.extend("Machines"));n.set("isBroken",!1),n.set("isDisabled",!1),n.set("comment",""),n.save().catch(function(n){console.log(n)})}},"+"),o.a.createElement(z,{extraProps:"width: 4vw; height: 4vw; border-radius: 0.5vw; margin: 0.1vw; font-size: 2vw; background-color: ".concat(h.colors.accept,"; cursor: pointer; "),onClick:function(){e.setState({openedMachine:null}),ce(e.state.machines)}},o.a.createElement("img",{src:ne.a,alt:"",style:{width:"2vw"}})),o.a.createElement(z,{extraProps:"width: 4vw; height: 4vw; border-radius: 0.5vw; margin: 0.1vw; font-size: 2vw; background-color: ".concat(h.colors.background.support,"; cursor: pointer; "),onClick:function(){new on.a.Query("Machines").find().then(function(n){e.props.loadMachines(n)}).catch(function(n){console.log(n)})}},o.a.createElement("img",{src:Zt.a,alt:"",style:{width:"1.5vw"}}))))},e}return Object(p.a)(t,n),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(n){this.props.machines!==n.machines&&this.setState({machines:n.machines}),this.props.popUpWindow!==n.popUpWindow&&this.setState({openedMachine:null})}}]),t}(o.a.Component),ue=Object(W.b)(function(n){return{popUpWindow:n.ui.popUpWindow,machines:n.machines.machines}},function(n){return{setPopUpWindow:function(t){return n(I(t))},loadMachines:function(t){return n(yn(t))}}})(le);T.a.div(ae(),h.colors.background.support),T.a.div(ie());function de(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: row\nheight: 3vw\ntransition: 0.2s\n"]);return de=function(){return n},n}var pe=function(n){var t=new on.a.Query("Laundry");t.equalTo("objectId",n.laundryId),t.first().then(function(n){n.destroy().catch(function(n){console.log(n)})}).catch(function(n){console.log(n)})},fe=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).render=function(){var n=e.props.popUpWindow===h.popUps.RESEVATIONS,t="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(h.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 39.5vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            display: block;\n            max-height: 70vh;\n            overflow-y: scroll;\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        ");return o.a.createElement(z,{className:h.popUps.RESEVATIONS,extraProps:t},e.props.laundry.map(function(n,t){return o.a.createElement(he,{key:t},o.a.createElement(z,null,o.a.createElement(z,{extraProps:"width: 5vw; align-items: flex-start; font-size: 0.8vw; color: ".concat(h.colors.text.support)},h.weekDays.full[m()(n.timestamp).tz("Europe/Moscow").day()]),o.a.createElement(z,{extraProps:"width: 5vw; align-items: flex-start; font-size: 0.8vw; color: ".concat(h.colors.text.primary)},m()(n.timestamp).tz("Europe/Moscow").format("DD.MM.YY"))),o.a.createElement(z,{extraProps:"font-size: 1.5vw; color: ".concat(h.colors.text.primary," ")},m()(n.timestamp).tz("Europe/Moscow").format("HH:mm")),o.a.createElement(z,{extraProps:"width: 2vw; height: 2vw; border-radius: 2vw; background: ".concat(h.colors.accept,"; margin-left: 1vw; color: white;")},e.props.machines.map(function(n){return n.machineId}).indexOf(n.machineId)+1),o.a.createElement(z,{extraProps:" border-left: 1px solid ".concat(h.colors.background.support,"; margin-left: 0.5vw; width: 1.5vw; height: 2vw; cursor: pointer; ")},o.a.createElement("img",{src:Lt.a,alt:"",style:{width:"1.2vw",marginLeft:"0.5vw"},onClick:function(){pe(n)}})))}))},e}return Object(p.a)(t,n),t}(o.a.Component),me=Object(W.b)(function(n){return{popUpWindow:n.ui.popUpWindow,laundry:n.laundry.laundry.filter(function(t){return t.userId===on.a.User.current().id&&+m()(t.timestamp)>+m()(n.constants.server_time).startOf("hour")}).sort(function(n,t){return n.timestamp-t.timestamp}),machines:n.machines.machines}},function(n){return{setPopUpWindow:function(t){return n(I(t))},selectSlot:function(t){return n(bn(t))}}})(fe),he=T.a.div(de());function ve(){var n=Object(c.a)(["\npadding: 1vw;\nborder-radius: 1vw;\nposition: absolute;\ndisplay: flex;\nalign-items: center;\njustify-content: center;\nflex-direction: column;\ntop: ","vh;\nright: 2vw;\nz-index: ",";\nopacity: ",";\nvisibility: ",";\n// box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\ntransition: 0.2s;\n"]);return ve=function(){return n},n}function we(){var n=Object(c.a)(["\ndisplay: flex\nposition: absolute;\nz-index: ",";\ntop: 0vw;\nright: 0vw;\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 94vw\nheight: 100vh\nbackground: rgba(0,0,0,.",");\nbackdrop-filter: blur(","px);\nvisibility: ",";\ntransition: 0.2s\n"]);return we=function(){return n},n}function be(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 17.5vw;\nmargin-bottom: 0.5vw;\ncolor: ",";\npadding: 1vw;\nbackground-color: ",";\nborder-radius: 0.5vw;\ntext-align: left;\ntransition: 0.2s\n"]);return be=function(){return n},n}var ge=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).state={value:""},e.render=function(){var n=e.props.popUpWindow===h.popUps.GET_NFC;return o.a.createElement(xe,{className:h.popUps.GET_NFC,visible:n},o.a.createElement(Ee,{visible:n},o.a.createElement(ye,null,"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0431\u0440\u043e\u043d\u044c \u0441\u0442\u0430\u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430, \u043f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e \u043a\u0430\u043a \u0412\u044b \u043f\u0440\u0438\u0432\u044f\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u043a \u043a \u043f\u0440\u043e\u0444\u0438\u043b\u044e."),o.a.createElement(z,{extraProps:"padding: 1vw; background-color: ".concat(h.colors.background.primary,"; border-radius: 0.5vw;")},o.a.createElement(vn,{short:!1,placeholder:"NFC UID (8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)",value:e.state.value,onChange:function(n){e.setState({value:n})}}),o.a.createElement(R,{visible:n,short:!1,backgroundColor:h.colors.accept,onClick:function(){on.a.Cloud.run("createNfcRecord",{value:e.state.value.toUpperCase()})},disabled:8!==(""+e.state.value).length},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),o.a.createElement(R,{visible:n,short:!1,backgroundColor:h.colors.WARM_ORANGE,onClick:function(){e.props.setPopUpWindow(h.popUps.EMPTY)}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"))))},e}return Object(p.a)(t,n),t}(o.a.Component),ye=T.a.div(be(),h.colors.text.primary,h.colors.background.primary),xe=T.a.div(we(),function(n){return n.visible?1:-1},function(n){return n.visible?2:0},function(n){return n.visible?2:0},function(n){return n.visible?"visible":"hidden"}),Ee=T.a.div(ve(),function(n){return n.visible?10:12},function(n){return n.visible?1:-1},function(n){return n.visible?1:0},function(n){return n.visible?"visible":"hidden"}),ke=Object(W.b)(function(n){return{popUpWindow:n.ui.popUpWindow}},function(n){return{setPopUpWindow:function(t){return n(I(t))}}})(ge),Oe=e(43),_e=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).state={vk:on.a.User.current().get("vk")},e.render=function(){var n=e.props.popUpWindow===h.popUps.LAUNDRY_OPTIONS,t="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(h.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?19:21,"vh;\n            right: 48vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.2);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            transition: 0.2s;\n        ");return o.a.createElement(z,{className:h.popUps.LAUNDRY_OPTIONS,extraProps:t},e.state.vk?Ue(Object(Oe.a)(Object(Oe.a)(e)),n):je(Object(Oe.a)(Object(Oe.a)(e)),n))},e}return Object(p.a)(t,n),Object(l.a)(t,[{key:"componentDidMount",value:function(){var n=this;on.a.User.current().get("vk")&&en.getUser(on.a.User.current().get("vk").split("/").pop(),function(t){n.setState({vk:t[0]})})}}]),t}(o.a.Component),Ue=function(n,t){return o.a.createElement(z,{extraProps:"flex-direction: row"},o.a.createElement("img",{src:n.state.vk.photo_200,style:{width:"3vw",borderRadius:"3vw"},alt:""}),o.a.createElement(z,{extraProps:"margin: 0 1vw 0 1vw; color: ".concat(h.colors.text.primary)},n.state.vk.first_name," ",n.state.vk.last_name),o.a.createElement(R,{visible:t,backgroundColor:h.colors.vk,onClick:function(){new on.a.Query("User").equalTo("objectId",on.a.User.current().id).first().then(function(t){t.set("vk",null),t.save().then(function(t){n.setState({vk:void 0})}).catch(function(n){console.log(n)})}).catch(function(n){console.log(n)})}},"\u041e\u0442\u0432\u044f\u0437\u0430\u0442\u044c \u0412\u041a"))},je=function(n,t){return o.a.createElement(z,null,o.a.createElement(z,{extraProps:"color: ".concat(h.colors.text.primary,"; width: 13vw; font-size: 0.8vw; text-align: left; margin: 1vw;")},"\u041f\u0440\u0438\u0432\u0436\u0438\u0442\u0435 \u0412\u0430\u0448 \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435, \u0438 \u0412\u0430\u043c \u0441\u0442\u0430\u043d\u0443\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439. \u0412\u044b \u0432 \u043b\u044e\u0431\u043e\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u043f\u0440\u0438\u0432\u044f\u0437\u043a\u0443."),o.a.createElement(R,{visible:t,backgroundColor:h.colors.vk,onClick:function(){en.login(function(t){new on.a.Query("User").equalTo("objectId",on.a.User.current().id).first().then(function(e){e.set("vk",t.session.user.href),e.save().then(function(t){en.getUser(t.get("vk").split("/").pop(),function(t){n.setState({vk:t[0]})})}).catch(function(n){console.log(n)})}).catch(function(n){console.log(n)})})}},"\u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"))},Pe=Object(W.b)(function(n){return{popUpWindow:n.ui.popUpWindow}},function(n){return{setPopUpWindow:function(t){return n(I(t))}}})(_e);function Se(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 1.5vw\nheight: 1.5vw\nposition: absolute;\ntop: 0.25vw;\nleft: ","vw;\nborder-radius: 1.5vw\nbackground-color: ","\ntransform: rotate(","deg);\ncursor: pointer;\ntransition: 0.2s\n"]);return Se=function(){return n},n}function Ce(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 3.5vw\nheight: 2vw\nborder-radius: 2vw\nposition: relative;\n// border: 0.15vw solid ","\nbackground-color: ","\ncursor: pointer;\ntransition: 0.2s\n"]);return Ce=function(){return n},n}var Ae=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).state={checked:!1},e.render=function(){return o.a.createElement(Ne,{checked:e.props.checked,onClick:function(){e.props.onChange(!e.props.checked)}},o.a.createElement(Me,{checked:e.props.checked}))},e}return Object(p.a)(t,n),t}(o.a.Component);Ae.defaultProps={checked:!1,onChange:function(){}};var Ne=T.a.div(Ce(),h.colors.background.primary,function(n){return n.checked?h.colors.accept:h.colors.background.support}),Me=T.a.div(Se(),function(n){return n.checked?1.75:.25},h.colors.background.primary,function(n){return n.checked?0:45}),Ie=Ae,We=e(111),Te=e.n(We);function De(){var n=Object(c.a)(["\ndisplay: flex\nflex-direction: row;\nalign-items: center\njustify-content: space-between; \nwidth: 17vw;\nheight: 3vw;\n"]);return De=function(){return n},n}function ze(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 2.5vw\nheight: 2.5vw\nmargin: 0.25vw\nborder-radius: 3vw\nfont-size: 0.8vw\nbackground-color: ",";\ncolor: ",";\ncursor: ",";\ntransition: 0.2s\n"]);return ze=function(){return n},n}function Be(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 10vw;\nfont-size: 1vw;\ncursor: pointer;\npadding: 0.1vw;\nborder-radius: 0.5vw\n&:hover {\n    background-color: ","\n}\ntransition: 0.2s\n"]);return Be=function(){return n},n}function Le(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 2vw\nheight: 2vw\nmargin: 0 0.5vw 0 0.5vw\nborder-radius: 0.2vw\ncolor: ","\nbackground-color: ","\n&:hover {\n    background-color: ","\n}\ncursor: pointer;\ntransition: 0.2s;\n"]);return Le=function(){return n},n}function Re(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: flex-start\nwidth: 21vw;\nborder-radius: 1vw;\npadding: 1vw 1vw 1vw 1vw\nbackground-color: ",";\nflex-direction: column;\nposition: absolute;\ntop: ","vw;\nright: 20vw;\nbox-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\nz-index: 2;\nvisibility: ","\nopacity: ","\ntransition: 0.2s\n"]);return Re=function(){return n},n}function Ye(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nborder-radius: 1vw;\npadding: 1vw 1vw 1vw 1vw\nbackground-color: ",";\nflex-direction: row\nposition: absolute;\ntop: ","vh;\nright: 20vw;\nbox-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\nz-index: 2;\nvisibility: ","\nopacity: ","\ntransition: 0.2s\n"]);return Ye=function(){return n},n}function Ge(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nborder-radius: 1vw;\npadding: 1vw 1vw 1vw 1vw\nbackground-color: ",";\nflex-direction: column\nposition: absolute;\ntop: 4.5vw;\nright: ","vw;\nbox-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\nz-index: 2;\nvisibility: ","\nopacity: ","\ntransition: 0.2s\n"]);return Ge=function(){return n},n}var Fe=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).state={is_regular:!1,residents_number:1,using_music_equipment:!1,using_projector:!1,selected_days:[],end_of_repeat:+m()().startOf("day"),calendar_month:+m()().startOf("month")},e.render=function(){var n=e.props.popUpWindow===h.popUps.CLUB_BOOK,t="\n            border-radius: 1vw;\n            padding: 1vw 1vw 1vw 1vw\n            background-color: ".concat(h.colors.background.primary,";\n            flex-direction: column\n            position: absolute;\n            top: ").concat(n?12:14,"vh;\n            right: 2vw;\n            box-shadow: 0 0 2vw rgba(0, 0, 0, 0.05);\n            z-index: 2;\n            opacity: ").concat(n?1:0,";\n            visibility: ").concat(n?"visible":"hidden",";\n            transition: opacity 0.2s, top 0.2s, visibility 0.2s;\n        "),r=Math.ceil((m()(e.state.calendar_month).endOf("month").endOf("isoWeek")-m()(e.state.calendar_month).startOf("month").startOf("isoWeek"))/864e5/7),i=e.props.selected_slot,a=i?m()().startOf("day").add(i.day,"day").add(.5*i.from,"hour"):0,c=i?m()().startOf("day").add(i.day,"day").add(.5*(i.to+1),"hour"):0;return o.a.createElement(z,{className:h.popUps.CLUB_BOOK,extraProps:t},o.a.createElement(z,{extraProps:"color: ".concat(h.colors.text.primary)},o.a.createElement(vn,{short:!1,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f"}),o.a.createElement(z,{extraProps:"width: 15vw; height: 4vw; flex-direction: row; justify-content: space-between; "},o.a.createElement(z,null,o.a.createElement(z,{extraProps:"font-size: 0.7vw; color: ".concat(h.colors.text.support)},h.weekDays.short[m()(a).day()]," ",m()(a).format("DD.MM.YY")),o.a.createElement(z,{extraProps:"font-size: 1.5vw;"},m()(a).format("HH:mm"))),o.a.createElement(z,{extraProps:"width: 2vw; height: 0.1vw; background-color: ".concat(h.colors.background.support)}),o.a.createElement(z,{extraProps:"color: ".concat(h.colors.text.support)},(c-a)/36e5,"\u0447"),o.a.createElement(z,{extraProps:"width: 2vw; height: 0.1vw; background-color: ".concat(h.colors.background.support)}),o.a.createElement(z,null,o.a.createElement(z,{extraProps:"font-size: 0.7vw; color: ".concat(h.colors.text.support)},h.weekDays.short[m()(c).day()]," ",m()(c).format("DD.MM.YY")),o.a.createElement(z,{extraProps:"font-size: 1.5vw;"},m()(c).format("HH:mm")))),o.a.createElement(Ze,null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u044e\u0434\u0435\u0439",o.a.createElement(vn,{short:!0,placeholder:"\u0427\u0438\u0441\u043b\u043e",value:e.state.residents_number,onChange:function(n){(Yt.a.isNumeric(n)||0===n.length)&&e.setState({residents_number:n.length>1?+n:0})}})),o.a.createElement(Ze,null,"\u041c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u043e\u0435 \u043e\u0431\u043e\u0440\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0435",o.a.createElement(Ie,{checked:e.state.using_music_equipment,onChange:function(){e.setState({using_music_equipment:!e.state.using_music_equipment})}})),o.a.createElement(Ze,null,"\u041f\u0440\u043e\u0435\u043a\u0442\u043e\u0440",o.a.createElement(Ie,{checked:e.state.using_projector,onChange:function(){e.setState({using_projector:!e.state.using_projector})}})),o.a.createElement(Ze,null,"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u044b\u043c",o.a.createElement(Ie,{checked:e.state.is_regular,onChange:function(){e.setState({is_regular:!e.state.is_regular})}}))),o.a.createElement(R,{short:!1,onClick:function(){on.a.Cloud.run("createClubBook",{location:"club",start_timestamp:+m()().startOf("day").add(i.day,"day").add(.5*i.from,"hour"),end_timestamp:+m()().startOf("day").add(i.day,"day").add(.5*(i.to+1),"hour"),is_regular:e.state.is_regular,data:{}}),e.props.openBookPopUp(void 0)}},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"),o.a.createElement(R,{short:!1,backgroundColor:h.colors.WARM_ORANGE,onClick:function(){e.props.openBookPopUp(void 0)}},"\u041e\u0442\u043c\u0435\u043d\u0430"),o.a.createElement(Ve,{visible:e.state.is_regular},h.weekDays.short.filter(function(n,t){return t>0}).concat(h.weekDays.short[0]).map(function(n,t){return o.a.createElement(Qe,{index:t,key:t,onClick:function(){e.setState({selected_days:e.state.selected_days.indexOf(t)>-1?e.state.selected_days.filter(function(n){return n!==t}):e.state.selected_days.concat(t)})},is_selected:e.state.selected_days.indexOf(t)>-1},n)})),o.a.createElement(Ke,{visible:e.state.is_regular},o.a.createElement(z,null,o.a.createElement(z,{extraProps:"width: 20vw; flex-direction: row; justify-content: space-around;"},o.a.createElement("img",{src:Te.a,style:{width:"1vw",transform:"rotate(180deg)",cursor:"pointer",visibility:e.state.calendar_month===+m()().startOf("month")?"hidden":"visible",opacity:+(e.state.calendar_month!==+m()().startOf("month")),transition:"0.2s"},alt:"",onClick:function(){e.setState({calendar_month:Math.max(+m()(e.state.calendar_month).add(-1,"month"),+m()().startOf("month"))})}}),o.a.createElement(Je,{onClick:function(){e.setState({calendar_month:+m()().startOf("month")})}},h.month[+m()(e.state.calendar_month).format("M")-1],o.a.createElement(z,{extraProps:"color: ".concat(h.colors.text.support,"; font-size: 0.7vw;")},m()(e.state.calendar_month).format("YYYY"))),o.a.createElement("img",{src:Te.a,style:{width:"1vw",cursor:"pointer"},alt:"",onClick:function(){e.setState({calendar_month:m()(e.state.calendar_month).add(1,"month")})}})),Array.from({length:r},function(n,t){return t}).map(function(n,t){return o.a.createElement(z,{extraProps:"flex-direction: row",key:t},Array.from({length:7},function(n,t){return t}).map(function(n,r){var i=m()(e.state.calendar_month).startOf("month").startOf("isoWeek").add(t,"week").add(r,"day");return o.a.createElement(Xe,{is_today:+m()(i)===+m()().startOf("day"),is_selected:+m()(i)===+m()(e.state.end_of_repeat).startOf("day"),is_this_month:m()(i).format("MM")===m()(e.state.calendar_month).format("MM"),contains_event:e.state.selected_days.indexOf((m()(i).day()+6)%7)>-1&&i>+m()()&&i<m()(e.state.end_of_repeat),day:i,key:r,onClick:function(){e.setState({end_of_repeat:i})}},m()(i).format("DD"))}))}))),o.a.createElement(qe,{visible:e.state.is_regular},"\u041f\u0440\u0435\u0434\u0441\u0442\u043e\u0438\u0442 ",3," \u0437\u0430\u043d\u044f\u0442\u0438\u0439 \u0434\u043e ",m()(e.state.end_of_repeat).format("D")," ",h.month[+m()(e.state.end_of_repeat).format("M")]," \u043f\u043e ",e.state.selected_days.map(function(n,t){return h.weekDays.short[n+1]+(t<e.state.selected_days.length-1?", ":"")}),"."))},e}return Object(p.a)(t,n),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(n){var t=n.selected_slot;t?this.setState({selected_days:this.state.selected_days.concat(m()().add(t.day-1,"day").day()),end_of_repeat:+m()().startOf("day").add(t.day,"day")}):this.setState({selected_days:[]})}}]),t}(o.a.Component),He=Object(W.b)(function(n){return{popUpWindow:n.ui.popUpWindow,selected_slot:n.club.selected_slot}},function(n){return{setPopUpWindow:function(t){return n(I(t))},openBookPopUp:function(t){return n(sn(t))}}})(Fe),Ke=T.a.div(Ge(),h.colors.background.primary,function(n){return n.visible?20:100},function(n){return n.visible?"visible":"hidden"},function(n){return+n.visible}),Ve=T.a.div(Ye(),h.colors.background.primary,function(n){return n.visible?0:-50},function(n){return n.visible?"visible":"hidden"},function(n){return+n.visible}),qe=T.a.div(Re(),h.colors.background.primary,function(n){return n.visible?24:100},function(n){return n.visible?"visible":"hidden"},function(n){return+n.visible}),Qe=T.a.div(Le(),function(n){return function(n){return n.is_selected?"white":n.index>4?h.colors.text.support:h.colors.text.primary}},function(n){return n.is_selected?h.colors.purple:h.colors.background.primary},function(n){return n.is_selected?null:h.colors.background.secondary}),Je=T.a.div(Be(),h.colors.background.secondary),Xe=T.a.div(ze(),function(n){return n.is_selected?h.colors.purple:n.is_today?h.colors.accept:n.contains_event?h.colors.yellow:null},function(n){return n.is_this_month?n.is_today||n.is_selected||n.contains_event?"white":h.colors.text.primary:h.colors.text.support},function(n){return n.is_this_month?"pointer":null}),Ze=T.a.div(De()),$e=[o.a.createElement(zt,{name:h.popUps.TOP_PROFILE_MENU}),o.a.createElement(Ft,{name:h.popUps.TOP_BALANCE_WINDOW}),o.a.createElement(Vt,{name:h.popUps.SHOPPING_BASKET}),o.a.createElement(ue,{name:h.popUps.LAUNDRY_SETTINGS}),o.a.createElement(me,{name:h.popUps.RESEVATIONS}),o.a.createElement(ke,{name:h.popUps.GET_NFC}),o.a.createElement(Pe,{name:h.popUps.LAUNDRY_OPTIONS}),o.a.createElement(He,{name:h.popUps.CLUB_BOOK})];function nr(){var n=Object(c.a)(["\n    display: flex\n    position: absolute\n    bottom: 0\n    justify-content: center\n    align-items: flex-start\n    flex-direction: row\n    width: 100vw\n    padding: 1vw;\n    background-color: ","\n    @media (min-width: 320px) and (max-width: 480px) {\n        flex-direction: column\n        align-items: center\n    }\n    transition: 0.2s\n    "]);return nr=function(){return n},n}function tr(){var n=Object(c.a)(["\n    display: flex\n    justify-content: center\n    align-items: center\n    flex-direction: column\n    width: 100vw\n    height: 100vh\n    transition: 0.2s\n    "]);return tr=function(){return n},n}function er(){var n=Object(c.a)(["\ndisplay: flex\njustify-content: center\nalign-items: center\nflex-direction: column\nwidth: 100vw\nheight: 100vh\nbackground-color: ","\ntransition: 0.2s\n"]);return er=function(){return n},n}on.a.initialize(Mt,It),on.a.serverURL=Nt;var rr=$e.map(function(n,t){return o.a.createElement(At,{key:t},n)}),or=function(n,t,e,r){var o=new on.a.Query(n);o.equalTo(t,e),o.first().then(function(n){r(n)});var i=o.subscribe();i.on("update",function(n){r(n)}),i.on("create",function(n){r(n)}),i.on("delete",function(n){o.first().then(function(n){r(n)})})},ir=function(n){function t(){var n,e;Object(s.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=Object(u.a)(this,(n=Object(d.a)(t)).call.apply(n,[this].concat(i)))).state={auth:on.a.User.current(),server_time:0,init:!1},e.render=function(){return e.state.init?o.a.createElement(cr,null,e.state.auth?o.a.createElement(wt,null):o.a.createElement(Z,null),e.state.auth?rr:null):o.a.createElement(sr,null)},e}return Object(p.a)(t,n),Object(l.a)(t,[{key:"componentDidMount",value:function(){var n=this,t=function(){n.setState({auth:on.a.User.current()})};!function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};q.initGoogle().then(function(){q.initClient().then(function(){if(n(),q.isAuthorized())if(on.a.User.current()){var r=new on.a.Query("User");r.equalTo("objectId",on.a.User.current().id),r.first().then(function(n){}).catch(function(n){console.log("user is deleted"),on.a.User.logOut(),q.signOut()})}else St().then(function(n){t(n)});else q.isAuthorized(),on.a.User.logOut();q.subscribeSignIn(function(n){n?on.a.User.current()?(on.a.User.logOut(),St().then(function(n){t()})):St().then(function(n){t()}):on.a.User.logOut().then(function(n){e()}).catch(function(n){console.log(n)})})}).catch(function(n){console.log(n)})}).catch(function(n){console.log(n)})}(function(){n.setState({init:!0})},t,t),or("Constants","name","timestamp",function(t){n.props.setServerTime(+cn()(+t.get("value")).tz("Europe/Moscow"))}),or("Constants","name","laundry_cost",function(t){n.props.setLaundryCost(t.get("value"))}),en.initVK()}}]),t}(o.a.Component),ar=Object(W.b)(function(n){return{server_time:n.constants.server_time}},function(n){return{setServerTime:function(t){return n(un(t))},setLaundryCost:function(t){return n(dn(t))}}})(ir),cr=T.a.div(er(),h.colors.background.primary),sr=function(){var n=T.a.div(tr()),t=T.a.div(nr(),h.colors.purple);return o.a.createElement(n,null,o.a.createElement(R,{short:!1,backgroundColor:"transparent"},o.a.createElement(z,{extraProps:" color: black; flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw } "},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430... ",o.a.createElement("span",{role:"img","aria-label":"hand"},"\ud83d\ude48"))),o.a.createElement(t,null,o.a.createElement(z,{extraProps:" width: 80%; height: 3vw; color: white; font-size: 0.8vw; text-align: left; @media (min-width: 320px) and (max-width: 480px) { height: 15vh; font-size: 3vw }"},"\u041c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c cookie \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 \u0441\u0435\u0440\u0432\u0438\u0441\u044b Google \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b. \u0415\u0441\u043b\u0438 \u044d\u0442\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0432\u0438\u0441\u0438\u0442 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0434\u043e\u043b\u0433\u043e - \u0412\u044b \u0437\u0430\u043f\u0440\u0435\u0442\u0438\u043b\u0438 cookie \u0432 \u0412\u0430\u0448\u0435\u043c \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435 \u0438\u043b\u0438 \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b. \u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 cookie \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430, \u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."),o.a.createElement(R,{short:!1,onClick:function(){alert(document.cookie)}},o.a.createElement(z,{extraProps:"flex-direction: row; @media (min-width: 320px) and (max-width: 480px) { font-size: 4vw; } "},"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c cookie ",o.a.createElement("span",{role:"img","aria-label":"hand"},"\ud83c\udf6a")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var lr=e(42),ur=e(189),dr={loading:!1,mainAppScreen:h.screens.club,popUpWindow:h.popUps.EMPTY},pr={loading:!1,server_time:+cn()(),laundry_cost:0,is_nfc_owner:!1,money:0,mobile:!1},fr={loading:!1,error:void 0,machines:[],subscription:!1},mr=e(190),hr={loading:!1,selected_slots:[],laundry:[]},vr={loading:!1,selected_slot:void 0,books:[]},wr=Object(lr.c)({ui:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(Tn.a)({},n,{mainAppScreen:t.data});case b:return Object(Tn.a)({},n,{popUpWindow:t.data});case C:return Object(Tn.a)({},n,{popUpWindow:t.data?h.popUps.CLUB_BOOK:"EMPTY"});case P:return Object(Tn.a)({},n,{popUpWindow:t.data?"EMPTY":n.popUpWindow});default:return n}},constants:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(Tn.a)({},n,{server_time:t.data});case g:return Object(Tn.a)({},n,{laundry_cost:t.data});case P:return Object(Tn.a)({},n,{is_nfc_owner:t.data});case S:return Object(Tn.a)({},n,{money:t.data});default:return n}},machines:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(Tn.a)({},n,{subscription:!0});case _:return Object(Tn.a)({},n,{subscription:!1});case x:return function(n,t){return Object(Tn.a)({},n,{loading:!0,error:void 0})}(n);case k:return function(n,t){return Object(Tn.a)({},n,{loading:!1,error:t.error})}(n,t);case E:return Object(Tn.a)({},n,{machines:t.data});default:return n}},laundry:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:var e=n.selected_slots.filter(function(n){return JSON.stringify(n)===JSON.stringify(t.data)}).length;return Object(Tn.a)({},n,{selected_slots:e?n.selected_slots.filter(function(n){return JSON.stringify(n)!==JSON.stringify(t.data)}):Object(mr.a)(n.selected_slots).concat([t.data])});case y:return Object(Tn.a)({},n,{laundry:t.data,selected_slots:n.selected_slots.map(function(n){return JSON.stringify(n)}).filter(function(n){return t.data.map(function(n){return JSON.stringify({timestamp:n.timestamp,machineId:n.machineId})}).indexOf(n)<0}).map(function(n){return JSON.parse(n)})});default:return n}},club:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(Tn.a)({},n,{selected_slot:t.data});case A:return Object(Tn.a)({},n,{books:t.data});default:return n}}}),br=Object(lr.d)(wr,Object(lr.a)(ur.a));a.a.render(o.a.createElement(W.a,{store:br},o.a.createElement(ar,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})}},[[191,2,1]]]);
//# sourceMappingURL=main.af46da37.chunk.js.map